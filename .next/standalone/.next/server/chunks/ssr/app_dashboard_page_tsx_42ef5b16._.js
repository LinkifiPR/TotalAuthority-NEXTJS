module.exports=[20731,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(97226),e=a.i(50944),f=a.i(41130),g=a.i(38246),h=a.i(40695),i=a.i(46842),j=a.i(20005);let k=({user:a,onSignOut:c})=>(0,b.jsx)("header",{className:"bg-white/95 backdrop-blur-sm border-b border-slate-200 sticky top-0 z-50",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-3 md:py-4 flex items-center justify-between",children:[(0,b.jsxs)(g.default,{href:"/",className:"flex items-center space-x-2 md:space-x-3",children:[(0,b.jsxs)("div",{className:"relative w-8 h-8 md:w-10 md:h-10 flex items-center justify-center",children:[(0,b.jsx)("div",{className:"absolute inset-0 rounded-full border-2 border-orange-200 opacity-30"}),(0,b.jsx)("div",{className:"absolute inset-1 rounded-full border border-orange-300 opacity-50"}),(0,b.jsxs)("div",{className:"relative w-5 h-5 md:w-6 md:h-6 bg-gradient-to-br from-orange-500 to-orange-600 rounded-full flex items-center justify-center shadow-lg",children:[(0,b.jsx)("div",{className:"absolute top-1 md:top-1.5 left-0.5 md:left-1 w-0.5 md:w-1 h-0.5 md:h-1 bg-white rounded-full"}),(0,b.jsx)("div",{className:"absolute top-1 md:top-1.5 right-0.5 md:right-1 w-0.5 md:w-1 h-0.5 md:h-1 bg-white rounded-full"}),(0,b.jsx)("div",{className:"absolute bottom-1 md:bottom-1.5 left-1/2 transform -translate-x-1/2 w-1 md:w-1.5 h-0.5 bg-white rounded-full"}),(0,b.jsx)("div",{className:"absolute -top-0.5 left-1/2 transform -translate-x-1/2 w-0.5 h-0.5 bg-orange-400 rounded-full"})]}),(0,b.jsx)("div",{className:"absolute top-0.5 right-0.5 w-0.5 md:w-1 h-0.5 md:h-1 bg-blue-500 rounded-full"}),(0,b.jsx)("div",{className:"absolute bottom-0.5 left-0.5 w-0.5 h-0.5 bg-purple-500 rounded-full"})]}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsxs)("span",{className:"text-lg md:text-xl font-black text-slate-900 tracking-tight leading-none",children:["Total",(0,b.jsx)("span",{className:"text-orange-500",children:"Authority"})]}),(0,b.jsx)("span",{className:"text-xs text-slate-500 font-medium tracking-wider uppercase leading-none mt-0.5 hidden sm:block",children:"AI Visibility"})]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2 md:space-x-4",children:[(0,b.jsxs)("div",{className:"hidden md:flex items-center space-x-2 text-sm text-slate-600",children:[(0,b.jsx)(i.User,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"truncate max-w-40",children:a.email})]}),(0,b.jsx)("div",{className:"flex md:hidden items-center",children:(0,b.jsx)(i.User,{className:"w-4 h-4 text-slate-600"})}),(0,b.jsxs)(h.Button,{variant:"outline",onClick:c,className:"flex items-center space-x-1 md:space-x-2 text-xs md:text-sm px-2 md:px-4 py-1 md:py-2",size:"sm",children:[(0,b.jsx)(j.LogOut,{className:"w-3 h-3 md:w-4 md:h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Sign Out"})]})]})]})});var l=a.i(8406);let m=({user:a})=>(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,b.jsx)(l.Sparkles,{className:"w-6 h-6 text-orange-500"}),(0,b.jsxs)("h1",{className:"text-3xl font-bold text-slate-900",children:["Welcome back, ",a.user_metadata?.full_name||a.email?.split("@")[0],"!"]})]}),(0,b.jsx)("p",{className:"text-slate-600",children:"Access your audits, manage your packages, and explore AI visibility resources."})]});var n=a.i(3130),o=a.i(54161),p=a.i(70106);let q=(0,p.default)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),r=(0,p.default)("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);var s=a.i(5522),t=a.i(77687),u=a.i(87532);let v=(0,p.default)("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]);var w=a.i(16201);let x=({user:a,userAudits:d,onAuditAdded:e,justFetchedAudit:i,setJustFetchedAudit:j})=>{let[k,l]=(0,c.useState)(""),[m,o]=(0,c.useState)(!1),{toast:p}=(0,t.useToast)(),q=async b=>{if(b.preventDefault(),k.trim()&&a){o(!0);try{console.log("Searching for audit code:",k.trim().toUpperCase());let{data:b,error:c}=await f.supabase.from("audit_reports").select("*").eq("audit_code",k.trim().toUpperCase()).maybeSingle();if(console.log("Audit search result:",{auditReport:b,auditError:c}),c){console.error("Error searching for audit:",c),p({title:"Error searching for audit",description:c.message,variant:"destructive"});return}if(!b)return void p({title:"Audit not found",description:"Please check your audit code and try again.",variant:"destructive"});let{data:d}=await f.supabase.from("user_audit_codes").select("*").eq("user_id",a.id).eq("audit_code",k.trim().toUpperCase()).maybeSingle();if(d)return void p({title:"Audit already added",description:"This audit is already in your dashboard.",variant:"destructive"});let{error:g}=await f.supabase.from("user_audit_codes").insert({user_id:a.id,audit_code:k.trim().toUpperCase(),audit_report_id:b.id,used_at:new Date().toISOString()});if(g)throw g;j(k.trim().toUpperCase()),p({title:"ðŸŽ‰ Audit added successfully!",description:"Your free audit has been added to your dashboard."}),l(""),e(),setTimeout(()=>{j(null)},3e3)}catch(a){console.error("Error in handleFetchAudit:",a),p({title:"Error adding audit",description:a.message,variant:"destructive"})}finally{o(!1)}}},r=null!==i;return(0,b.jsxs)(n.Card,{className:`shadow-lg border-0 hover:shadow-xl transition-all duration-300 hover:scale-[1.02] ${r?"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 animate-pulse":"bg-white"}`,children:[(0,b.jsx)(n.CardHeader,{className:"pb-4",children:(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:`p-2 rounded-lg ${r?"bg-green-200":"bg-green-100"}`,children:r?(0,b.jsx)(v,{className:"w-5 h-5 text-green-700 animate-bounce"}):(0,b.jsx)(u.Search,{className:"w-5 h-5 text-green-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(n.CardTitle,{className:`text-lg ${r?"text-green-800":""}`,children:"Mini Audits"}),(0,b.jsx)(n.CardDescription,{className:r?"text-green-600":"",children:r?"ðŸŽ‰ Audit Successfully Added!":"Access your audit reports"})]})]})}),(0,b.jsxs)(n.CardContent,{className:"space-y-4",children:[!r&&(0,b.jsxs)("form",{onSubmit:q,className:"space-y-3",children:[(0,b.jsx)(s.Input,{placeholder:"Enter audit code",value:k,onChange:a=>l(a.target.value),className:"text-sm"}),(0,b.jsx)(h.Button,{type:"submit",disabled:m||!k.trim(),className:"w-full bg-green-600 hover:bg-green-700 text-sm",children:m?"Adding...":"Fetch Audit"})]}),r&&(0,b.jsxs)("div",{className:"text-center py-4",children:[(0,b.jsx)(w.CheckCircle,{className:"w-12 h-12 text-green-600 mx-auto mb-2 animate-bounce"}),(0,b.jsx)("p",{className:"text-green-800 font-semibold",children:"Audit Added Successfully!"}),(0,b.jsx)("p",{className:"text-green-600 text-sm",children:"Check your audits below"})]}),(0,b.jsxs)("div",{className:"pt-2 border-t",children:[(0,b.jsxs)("p",{className:"text-xs text-slate-500 mb-2",children:["Your Audits (",d.length,")"]}),d.length>0?(0,b.jsx)("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:d.slice(0,3).map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-2 bg-slate-50 rounded text-xs",children:[(0,b.jsx)("span",{className:"truncate",children:a.audit_reports?.client_name}),(0,b.jsx)(g.default,{href:`/audit/${a.audit_reports?.share_url_slug}`,children:(0,b.jsx)(h.Button,{size:"sm",variant:"outline",className:"h-6 px-2 text-xs",children:"View Audit"})})]},a.id))}):(0,b.jsx)("p",{className:"text-xs text-slate-400",children:"No audits yet"})]})]})]})};var y=a.i(4720),z=a.i(84505),A=a.i(21374),B=a.i(93518);let C=({user:a})=>{let[d,e]=(0,c.useState)([]),[g,i]=(0,c.useState)(!0);(0,c.useEffect)(()=>{j()},[a.id]);let j=async()=>{try{let{data:b,error:c}=await f.supabase.from("audit_reports").select("*").contains("audit_data",{uploaded_for_user:a.id}).order("created_at",{ascending:!1});if(c)throw c;let d=(b||[]).filter(b=>{if(!b.audit_data||"object"!=typeof b.audit_data)return!1;let c=b.audit_data;return"uploaded_pdf"===c.type&&c.uploaded_for_user===a.id});e(d)}catch(a){console.error("Error fetching paid audits:",a)}finally{i(!1)}},k=async(a,b)=>{try{let{data:c,error:d}=await f.supabase.storage.from("blog-media").download(a);if(d)throw d;let e=URL.createObjectURL(c),g=document.createElement("a");g.href=e,g.download=b,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(e)}catch(a){console.error("Error downloading file:",a)}};return g?(0,b.jsxs)(n.Card,{className:"bg-white shadow-lg border-0 hover:shadow-xl transition-all duration-300",children:[(0,b.jsx)(n.CardHeader,{className:"pb-4",children:(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-blue-100",children:(0,b.jsx)(y.FileText,{className:"w-5 h-5 text-blue-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(n.CardTitle,{className:"text-lg",children:"Full Audits"}),(0,b.jsx)(n.CardDescription,{children:"Premium audit services"})]})]})}),(0,b.jsx)(n.CardContent,{children:(0,b.jsx)("div",{className:"text-center py-6",children:(0,b.jsxs)("div",{className:"animate-pulse",children:[(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mx-auto mb-2"}),(0,b.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2 mx-auto"})]})})})]}):0===d.length?(0,b.jsxs)(n.Card,{className:"bg-white shadow-lg border-0 hover:shadow-xl transition-all duration-300 hover:scale-[1.02]",children:[(0,b.jsx)(n.CardHeader,{className:"pb-4",children:(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-blue-100",children:(0,b.jsx)(y.FileText,{className:"w-5 h-5 text-blue-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(n.CardTitle,{className:"text-lg",children:"Full Audits"}),(0,b.jsx)(n.CardDescription,{children:"Premium audit services"})]})]})}),(0,b.jsx)(n.CardContent,{children:(0,b.jsxs)("div",{className:"text-center py-6",children:[(0,b.jsx)(y.FileText,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-sm text-slate-600 mb-4",children:"Professional audit services with detailed insights"}),(0,b.jsx)(o.Badge,{variant:"secondary",className:"text-xs",children:"Advanced Analytics"})]})})]}):(0,b.jsxs)(n.Card,{className:"bg-gradient-to-br from-blue-50 to-indigo-50 shadow-lg border-0 hover:shadow-xl transition-all duration-300 hover:scale-[1.02] border-2 border-blue-200",children:[(0,b.jsx)(n.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-gradient-to-r from-blue-600 to-indigo-600 shadow-lg",children:(0,b.jsx)(B.Award,{className:"w-5 h-5 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(n.CardTitle,{className:"text-lg flex items-center space-x-2",children:[(0,b.jsx)("span",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Full Audits"}),(0,b.jsx)(l.Sparkles,{className:"w-4 h-4 text-yellow-500"})]}),(0,b.jsx)(n.CardDescription,{className:"text-blue-700",children:"Premium audit services complete"})]})]})}),(0,b.jsxs)(n.CardContent,{className:"space-y-3",children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-green-100 to-emerald-100 p-3 rounded-lg border-l-4 border-green-500",children:(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(w.CheckCircle,{className:"w-4 h-4 text-green-600 flex-shrink-0"}),(0,b.jsx)("span",{className:"font-semibold text-green-800 text-sm",children:"Your Full Audit is Complete!"})]})}),(0,b.jsxs)("div",{className:"space-y-2",children:[d.slice(0,2).map(a=>(0,b.jsx)("div",{className:"bg-white p-3 rounded-lg shadow-sm border border-blue-100",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[(0,b.jsx)(A.Star,{className:"w-3 h-3 text-blue-600 flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsx)("h4",{className:"font-medium text-sm text-gray-900 truncate mb-1",children:a.client_name}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:new Date(a.audit_data?.uploaded_at||a.created_at).toLocaleDateString()})]})]}),(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsxs)(h.Button,{size:"sm",onClick:()=>k(a.audit_data?.file_path,`${a.client_name}-audit-report.pdf`),className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white text-xs px-2 py-1 h-6 min-w-[70px]",children:[(0,b.jsx)(z.Download,{className:"w-3 h-3 mr-1"}),"Download"]})})]})},a.id)),d.length>2&&(0,b.jsx)("div",{className:"text-center py-2",children:(0,b.jsxs)("span",{className:"text-xs text-blue-600 font-medium",children:["+",d.length-2," more audit",d.length-2>1?"s":""]})})]}),(0,b.jsx)("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 p-2 rounded-lg border border-yellow-200",children:(0,b.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,b.jsx)(B.Award,{className:"w-3 h-3 text-yellow-600"}),(0,b.jsx)("span",{className:"text-xs font-medium text-yellow-800",children:"Premium Service Complete"})]})})]})]})},D=({user:a,userAudits:c,onAuditAdded:d,justFetchedAudit:e,setJustFetchedAudit:f})=>(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,b.jsx)(x,{user:a,userAudits:c,onAuditAdded:d,justFetchedAudit:e,setJustFetchedAudit:f}),(0,b.jsx)(C,{user:a}),(0,b.jsxs)(n.Card,{className:"bg-white shadow-lg border-0 hover:shadow-xl transition-all duration-300 hover:scale-[1.02]",children:[(0,b.jsx)(n.CardHeader,{className:"pb-4",children:(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-purple-100",children:(0,b.jsx)(q,{className:"w-5 h-5 text-purple-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(n.CardTitle,{className:"text-lg",children:"Packages"}),(0,b.jsx)(n.CardDescription,{children:"Service bundles"})]})]})}),(0,b.jsx)(n.CardContent,{children:(0,b.jsxs)("div",{className:"text-center py-6",children:[(0,b.jsx)(q,{className:"w-8 h-8 text-purple-600 mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-sm text-slate-600 mb-4",children:"Comprehensive service bundles for your business"}),(0,b.jsx)(o.Badge,{variant:"secondary",className:"text-xs",children:"Custom Solutions"})]})})]}),(0,b.jsxs)(n.Card,{className:"bg-white shadow-lg border-0 hover:shadow-xl transition-all duration-300 hover:scale-[1.02]",children:[(0,b.jsx)(n.CardHeader,{className:"pb-4",children:(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-orange-100",children:(0,b.jsx)(r,{className:"w-5 h-5 text-orange-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(n.CardTitle,{className:"text-lg",children:"Resources"}),(0,b.jsx)(n.CardDescription,{children:"Learning materials"})]})]})}),(0,b.jsx)(n.CardContent,{children:(0,b.jsxs)("div",{className:"text-center py-6",children:[(0,b.jsx)(r,{className:"w-8 h-8 text-orange-600 mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-sm text-slate-600 mb-4",children:"Educational content and best practices"}),(0,b.jsx)(o.Badge,{variant:"secondary",className:"text-xs",children:"Guides & Tips"})]})})]})]});var E=a.i(32860);let F=({userAudits:a})=>0===a.length?null:(0,b.jsxs)(n.Card,{className:"bg-white shadow-lg border-0",children:[(0,b.jsx)(n.CardHeader,{children:(0,b.jsxs)(n.CardTitle,{className:"flex items-center space-x-2",children:[(0,b.jsx)(w.CheckCircle,{className:"w-5 h-5 text-green-500"}),(0,b.jsx)("span",{children:"Recent Audits"})]})}),(0,b.jsx)(n.CardContent,{children:(0,b.jsx)("div",{className:"space-y-3",children:a.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-slate-900",children:a.audit_reports?.client_name}),(0,b.jsxs)("p",{className:"text-sm text-slate-500",children:["Added ",new Date(a.created_at).toLocaleDateString()]})]})]}),(0,b.jsx)(g.default,{href:`/audit/${a.audit_reports?.share_url_slug}`,children:(0,b.jsxs)(h.Button,{variant:"outline",size:"sm",className:"flex items-center space-x-2",children:[(0,b.jsx)("span",{children:"View Report"}),(0,b.jsx)(E.ArrowRight,{className:"w-4 h-4"})]})})]},a.id))})})]});a.s(["default",0,()=>{let{user:a,signOut:g,loading:h}=(0,d.useAuth)(),i=(0,e.useRouter)(),[j,l]=(0,c.useState)([]),[n,o]=(0,c.useState)(null);(0,c.useEffect)(()=>{h||a||i.push("/auth")},[a,h,i]),(0,c.useEffect)(()=>{a&&p()},[a]);let p=async()=>{if(a)try{let{data:b,error:c}=await f.supabase.from("user_audit_codes").select(`
          *,
          audit_reports (
            id,
            client_name,
            created_at,
            share_url_slug
          )
        `).eq("user_id",a.id).order("created_at",{ascending:!1});if(c)throw c;l(b||[])}catch(a){console.error("Error fetching user audits:",a)}},q=async()=>{await g(),i.push("/")};return h?(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 flex items-center justify-center",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"})}):a?(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50",children:[(0,b.jsx)(k,{user:a,onSignOut:q}),(0,b.jsxs)("main",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,b.jsx)(m,{user:a}),(0,b.jsx)(D,{user:a,userAudits:j,onAuditAdded:p,justFetchedAudit:n,setJustFetchedAudit:o}),(0,b.jsx)(F,{userAudits:j})]})]}):null}],20731)}];

//# sourceMappingURL=app_dashboard_page_tsx_42ef5b16._.js.map