module.exports=[54235,83531,a=>{"use strict";var b,c=a.i(87924),d=a.i(72131),e=a.i(40695),f=a.i(5522),g=a.i(17171),h=a.i(46893),i=a.i(3130),j=a.i(41130),k=a.i(77687);a.s(["AdminAuditForm",0,({onAuditCreated:a})=>{let[b,l]=(0,d.useState)(""),[m,n]=(0,d.useState)(""),[o,p]=(0,d.useState)(!1),[q,r]=(0,d.useState)(!1),{toast:s}=(0,k.useToast)(),t=async c=>{c.preventDefault(),r(!0);try{let c=b.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")+"-"+Date.now(),d=(()=>{let a="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",b="";for(let c=0;c<8;c++)b+=a.charAt(Math.floor(Math.random()*a.length));return b})(),{data:e,error:f}=await j.supabase.from("audit_reports").insert({client_name:b,share_url_slug:c,audit_code:d,audit_data:m}).select().single();if(f)throw f;s({title:"Success",description:`Audit created successfully! Code: ${d}`}),l(""),n(""),a()}catch(a){s({title:"Error",description:a.message||"Failed to create audit report",variant:"destructive"})}finally{r(!1)}};return(0,c.jsxs)(i.Card,{children:[(0,c.jsxs)(i.CardHeader,{children:[(0,c.jsx)(i.CardTitle,{children:"Create New Audit Report"}),(0,c.jsx)(i.CardDescription,{children:"Paste the audit data and generate a beautiful client dashboard"})]}),(0,c.jsx)(i.CardContent,{children:(0,c.jsxs)("form",{onSubmit:t,className:"space-y-6",children:[(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(g.Label,{htmlFor:"clientName",children:"Client Name"}),(0,c.jsx)(f.Input,{id:"clientName",value:b,onChange:a=>l(a.target.value),placeholder:"Enter client name",required:!0})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(g.Label,{htmlFor:"auditData",children:"Audit Data"}),(0,c.jsx)("div",{className:"flex space-x-2 mb-2",children:(0,c.jsx)(e.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{l("Bramlett Partners"),n(JSON.stringify({discovery_coverage:"3 of 4 queries",knowledge_accuracy:"Partial (size, sales, rebrand noted; no founding year)",knowledge_panel:"Not Present",overall_score:"7",discovery_phrases:[{query:"best realtor in Austin",results:"Mark Martin â€¢ Roman Lopez â€¢ Eric Bramlett â€¢ Lindsay Neuren â€¢ Kent Redding â€¢ Ashley Stucki â€¢ Wade Giles â€¢ Bridget Ramey â€¢ Kumara Wilcoxon â€¢ Laurie Flood",mentioned:!0,mention_type:"Eric"},{query:"top real estate agents in Austin",results:"Eric Bramlett â€¢ Mark Martin â€¢ Roman Lopez â€¢ Ryan Smith â€¢ Kumara Wilcoxon â€¢ Wade Giles â€¢ Bridget Ramey â€¢ Kent Redding â€¢ Sara Coltharp â€¢ Chrissy Caputo",mentioned:!0,mention_type:"Eric"},{query:"best real estate agency in Austin",results:"Realty Austin â€¢ Keller Williams â€¢ Compass â€¢ Kuper Sotheby's â€¢ Modere Group â€¢ Bramlett Partners â€¢ Spyglass â€¢ Realty Texas â€¢ The Agency Texas â€¢ JBGoodwin",mentioned:!0,mention_type:"Partners"},{query:"best real estate brokerage in Austin",results:"Keller Williams â€¢ Compass â€¢ Realty Austin â€¢ Kuper Sotheby's â€¢ Realty Texas â€¢ JBGoodwin â€¢ The Agency Texas â€¢ Modere Group â€¢ Twelve Rivers â€¢ Moreland Properties",mentioned:!1,mention_type:""}],chatgpt_knowledge:"Bramlett Partners (formerly Bramlett Residential) is a top boutique brokerage in Austin with 115+ agents and over $800 million in 2024 sales. Founded by Eric Bramlett, a multiâ€‘year Austin Business Journal award winner, the firm is known for dataâ€‘driven marketing and 2,100+ fiveâ€‘star reviews on Google, Yelp, and Zillow.",knowledge_gaps:["No founding year (2003)","No mention of recent PT50 awards or RealTrends ranking","No citation links shown"],platforms:[{name:"LinkedIn company page",reviews:"~2,900 followers",rating:null},{name:"Google Business Profile",reviews:"1,200+",rating:"4.9"},{name:"Yelp profile",reviews:"400+",rating:"5.0"},{name:"Zillow profile",reviews:"1,100+",rating:"5.0"}],citation_domains:["yelp.com","listwithclever.com","expertise.com","bizjournals.com"],knowledge_panel_status:'None for "Bramlett Partners" or "Eric Bramlett (Realtor)"',schema_status:"No Organization markup detected on site",kg_implication:"Without a resolved entity, Gemini/Bing Chat have weaker trust signals; name change may delay panel creation.",chatgpt_insights:[{signal:"Highâ€‘authority listicles",evidence:"Clever Top Agents 2025 & Expertise Best Realtors Austin drive agent lists",implication:'Secure or refresh inclusionsâ€”critical for "brokerage" query too'},{signal:"Review volume & rating",evidence:"Agents/firms listed all carry â‰¥1,000 reviews & â‰¥4.8â˜… average",implication:"Maintain review velocity; expand to Trustpilot, HAR.com"},{signal:"Fresh dates (2025)",evidence:"Lists updated in 2025 outrank older posts",implication:"Issue PR & blog content dated 2025 featuring rebrand"},{signal:"Name consistency",evidence:'Model sometimes still sees "Bramlett Residential"',implication:'Standardise "Bramlett Partners (formerly ...)" across all bios and citations'},{signal:"Entity presence",evidence:"Realty Austin & Keller Williams have Knowledge Panels",implication:'Claiming a KP will improve inclusion for generic "brokerage" phrases'}],quick_wins:[{title:"Publish an Entity Home page detailing rebrand + add Organization schema (sameAs: LinkedIn, Yelp, Zillow, GBP)",description:"Create structured data markup to help search engines understand your business entity",effort:"Low",impact:"Foundation for Knowledge Panel"},{title:"Update all existing citations to unified name; request Google/Yelp merge old & new names",description:"Consolidate brand mentions across platforms",effort:"Low",impact:"Removes duplication & boosts model confidence"},{title:"Pitch Expertise.com & Clever with 2025 sales & awards data to lock list spots",description:"Proactively reach out to list publishers with updated information",effort:"Med",impact:'Likely adds Bramlett to "brokerage" query list'},{title:"Syndicate a BusinessWire press release on rebrand & $800M milestone (indexed 2025)",description:"Generate authoritative news coverage of company achievements",effort:"Med",impact:"Generates fresh highâ€‘authority citations"}],next_steps:["Execute Quick Wins; reâ€‘check ChatGPT in 4â€“6 weeks","Begin Knowledge Panel path: claim GBP â†’ add schema â†’ secure press coverage",'Consider Deepâ€‘Dive Audit to assess Claude, Gemini & Perplexity visibility and run buyerâ€‘journey queries (e.g., "best neighborhood agent for relocating families in Austin")']},null,2))},children:"Load Sample Data (Bramlett Partners)"})}),(0,c.jsx)(h.Textarea,{id:"auditData",value:m,onChange:a=>n(a.target.value),placeholder:"Paste the audit data here (JSON or plain text)",className:"min-h-[300px] font-mono text-sm",required:!0})]}),(0,c.jsx)(e.Button,{type:"submit",disabled:o||q,className:"w-full",children:o?"Creating...":"Generate Audit Report"})]})})]})}],54235);var l=a.i(39761),m=a.i(24669),n=a.i(60246),o=a.i(41710);let p=({totalAudits:a,completedCount:b,pendingCount:d,activeCount:e})=>(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,c.jsx)(i.Card,{className:"bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200",children:(0,c.jsx)(i.CardContent,{className:"p-6",children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-sm font-medium text-blue-600 mb-1",children:"Total Audits"}),(0,c.jsx)("p",{className:"text-2xl font-bold text-blue-900",children:a})]}),(0,c.jsx)(l.BarChart3,{className:"w-8 h-8 text-blue-600"})]})})}),(0,c.jsx)(i.Card,{className:"bg-gradient-to-r from-green-50 to-green-100 border-green-200",children:(0,c.jsx)(i.CardContent,{className:"p-6",children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-sm font-medium text-green-600 mb-1",children:"Completed"}),(0,c.jsx)("p",{className:"text-2xl font-bold text-green-900",children:b})]}),(0,c.jsx)(m.TrendingUp,{className:"w-8 h-8 text-green-600"})]})})}),(0,c.jsx)(i.Card,{className:"bg-gradient-to-r from-orange-50 to-orange-100 border-orange-200",children:(0,c.jsx)(i.CardContent,{className:"p-6",children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-sm font-medium text-orange-600 mb-1",children:"Pending"}),(0,c.jsx)("p",{className:"text-2xl font-bold text-orange-900",children:d})]}),(0,c.jsx)(o.Clock,{className:"w-8 h-8 text-orange-600"})]})})}),(0,c.jsx)(i.Card,{className:"bg-gradient-to-r from-purple-50 to-purple-100 border-purple-200",children:(0,c.jsx)(i.CardContent,{className:"p-6",children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-sm font-medium text-purple-600 mb-1",children:"Active"}),(0,c.jsx)("p",{className:"text-2xl font-bold text-purple-900",children:e})]}),(0,c.jsx)(n.Users,{className:"w-8 h-8 text-purple-600"})]})})})]});var q=a.i(70106);let r=(0,q.default)("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),s=({showArchived:a,activeCount:b,archivedCount:d,onToggleArchived:f})=>(0,c.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,c.jsxs)(e.Button,{variant:a?"outline":"default",size:"sm",onClick:()=>f(!1),children:["Active (",b,")"]}),(0,c.jsxs)(e.Button,{variant:a?"default":"outline",size:"sm",onClick:()=>f(!0),children:[(0,c.jsx)(r,{className:"w-4 h-4 mr-2"}),"Archived (",d,")"]})]});var t=a.i(70121),u=a.i(50104),v=a.i(7554),w=a.i(25152),x=a.i(77994),y=a.i(3688),z=a.i(77192),A=a.i(30553),B="Checkbox",[C,D]=(0,u.createContextScope)(B),[E,F]=C(B),G=d.forwardRef((a,b)=>{let{__scopeCheckbox:e,name:f,checked:g,defaultChecked:h,required:i,disabled:j,value:k="on",onCheckedChange:l,form:m,...n}=a,[o,p]=d.useState(null),q=(0,t.useComposedRefs)(b,a=>p(a)),r=d.useRef(!1),s=!o||m||!!o.closest("form"),[u=!1,x]=(0,w.useControllableState)({prop:g,defaultProp:h,onChange:l}),y=d.useRef(u);return d.useEffect(()=>{let a=o?.form;if(a){let b=()=>x(y.current);return a.addEventListener("reset",b),()=>a.removeEventListener("reset",b)}},[o,x]),(0,c.jsxs)(E,{scope:e,state:u,disabled:j,children:[(0,c.jsx)(A.Primitive.button,{type:"button",role:"checkbox","aria-checked":K(u)?"mixed":u,"aria-required":i,"data-state":L(u),"data-disabled":j?"":void 0,disabled:j,value:k,...n,ref:q,onKeyDown:(0,v.composeEventHandlers)(a.onKeyDown,a=>{"Enter"===a.key&&a.preventDefault()}),onClick:(0,v.composeEventHandlers)(a.onClick,a=>{x(a=>!!K(a)||!a),s&&(r.current=a.isPropagationStopped(),r.current||a.stopPropagation())})}),s&&(0,c.jsx)(J,{control:o,bubbles:!r.current,name:f,value:k,checked:u,required:i,disabled:j,form:m,style:{transform:"translateX(-100%)"},defaultChecked:!K(h)&&h})]})});G.displayName=B;var H="CheckboxIndicator",I=d.forwardRef((a,b)=>{let{__scopeCheckbox:d,forceMount:e,...f}=a,g=F(H,d);return(0,c.jsx)(z.Presence,{present:e||K(g.state)||!0===g.state,children:(0,c.jsx)(A.Primitive.span,{"data-state":L(g.state),"data-disabled":g.disabled?"":void 0,...f,ref:b,style:{pointerEvents:"none",...a.style}})})});I.displayName=H;var J=a=>{let{control:b,checked:e,bubbles:f=!0,defaultChecked:g,...h}=a,i=d.useRef(null),j=(0,x.usePrevious)(e),k=(0,y.useSize)(b);d.useEffect(()=>{let a=i.current,b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(j!==e&&b){let c=new Event("click",{bubbles:f});a.indeterminate=K(e),b.call(a,!K(e)&&e),a.dispatchEvent(c)}},[j,e,f]);let l=d.useRef(!K(e)&&e);return(0,c.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:g??l.current,...h,tabIndex:-1,ref:i,style:{...a.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function K(a){return"indeterminate"===a}function L(a){return K(a)?"indeterminate":a?"checked":"unchecked"}var M=a.i(33441),N=a.i(97895);let O=d.forwardRef(({className:a,...b},d)=>(0,c.jsx)(G,{ref:d,className:(0,N.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...b,children:(0,c.jsx)(I,{className:(0,N.cn)("flex items-center justify-center text-current"),children:(0,c.jsx)(M.Check,{className:"h-4 w-4"})})}));O.displayName=G.displayName;let P=(0,q.default)("ArchiveRestore",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h2",key:"tvwodi"}],["path",{d:"M20 8v11a2 2 0 0 1-2 2h-2",key:"1gkqxj"}],["path",{d:"m9 15 3-3 3 3",key:"1pd0qc"}],["path",{d:"M12 12v9",key:"192myk"}]]);var Q=a.i(43108);let R=(0,q.default)("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),S=({selectedCount:a,totalCount:b,showArchived:d,onSelectAll:f,onBulkArchive:g,onBulkRestore:h,onBulkLock:i,onBulkUnlock:j})=>0===b?null:(0,c.jsxs)("div",{className:"flex items-center justify-between pb-2 border-b",children:[(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsx)(O,{checked:a===b&&b>0,onCheckedChange:f}),(0,c.jsx)("span",{className:"text-sm text-gray-600",children:"Select All"})]}),a>0&&(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsxs)("span",{className:"text-sm text-gray-600",children:[a," selected"]}),i&&(0,c.jsxs)(e.Button,{size:"sm",variant:"outline",onClick:i,children:[(0,c.jsx)(Q.Lock,{className:"w-4 h-4 mr-1"}),"Lock"]}),j&&(0,c.jsxs)(e.Button,{size:"sm",variant:"outline",onClick:j,children:[(0,c.jsx)(R,{className:"w-4 h-4 mr-1"}),"Unlock"]}),d?(0,c.jsxs)(e.Button,{size:"sm",variant:"outline",onClick:h,children:[(0,c.jsx)(P,{className:"w-4 h-4 mr-1"}),"Restore"]}):(0,c.jsxs)(e.Button,{size:"sm",variant:"outline",onClick:g,children:[(0,c.jsx)(r,{className:"w-4 h-4 mr-1"}),"Archive"]})]})]}),T=({showArchived:a,activeCount:b,archivedCount:d,selectedAudits:e,totalCount:f,onToggleArchived:g,onSelectAll:h,onBulkArchive:j,onBulkRestore:k,onBulkLock:m,onBulkUnlock:n})=>(0,c.jsx)(i.CardHeader,{className:"bg-gradient-to-r from-gray-50 to-white border-b",children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)(i.CardTitle,{className:"flex items-center gap-2 text-xl",children:[(0,c.jsx)(l.BarChart3,{className:"w-6 h-6 text-blue-600"}),"Audit Reports Dashboard"]}),(0,c.jsx)(i.CardDescription,{className:"mt-1",children:"Manage and track all audit reports with advanced filtering and sorting"})]}),(0,c.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,c.jsx)(s,{showArchived:a,activeCount:b,archivedCount:d,onToggleArchived:g}),e.size>0&&(0,c.jsx)(S,{selectedCount:e.size,totalCount:f,showArchived:a,onSelectAll:h,onBulkArchive:j,onBulkRestore:k,onBulkLock:m,onBulkUnlock:n})]})]})}),U={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function V(a){return (b={})=>{let c=b.width?String(b.width):a.defaultWidth;return a.formats[c]||a.formats[a.defaultWidth]}}let W={date:V({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:V({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:V({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},X={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Y(a){return(b,c)=>{let d;if("formatting"===(c?.context?String(c.context):"standalone")&&a.formattingValues){let b=a.defaultFormattingWidth||a.defaultWidth,e=c?.width?String(c.width):b;d=a.formattingValues[e]||a.formattingValues[b]}else{let b=a.defaultWidth,e=c?.width?String(c.width):a.defaultWidth;d=a.values[e]||a.values[b]}return d[a.argumentCallback?a.argumentCallback(b):b]}}function Z(a){return(b,c={})=>{let d,e=c.width,f=e&&a.matchPatterns[e]||a.matchPatterns[a.defaultMatchWidth],g=b.match(f);if(!g)return null;let h=g[0],i=e&&a.parsePatterns[e]||a.parsePatterns[a.defaultParseWidth],j=Array.isArray(i)?function(a,b){for(let c=0;c<a.length;c++)if(b(a[c]))return c}(i,a=>a.test(h)):function(a,b){for(let c in a)if(Object.prototype.hasOwnProperty.call(a,c)&&b(a[c]))return c}(i,a=>a.test(h));return d=a.valueCallback?a.valueCallback(j):j,{value:d=c.valueCallback?c.valueCallback(d):d,rest:b.slice(h.length)}}}let $={code:"en-US",formatDistance:(a,b,c)=>{let d,e=U[a];if(d="string"==typeof e?e:1===b?e.one:e.other.replace("{{count}}",b.toString()),c?.addSuffix)if(c.comparison&&c.comparison>0)return"in "+d;else return d+" ago";return d},formatLong:W,formatRelative:(a,b,c,d)=>X[a],localize:{ordinalNumber:(a,b)=>{let c=Number(a),d=c%100;if(d>20||d<10)switch(d%10){case 1:return c+"st";case 2:return c+"nd";case 3:return c+"rd"}return c+"th"},era:Y({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Y({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:a=>a-1}),month:Y({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Y({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Y({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(b={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:a=>parseInt(a,10)},(a,c={})=>{let d=a.match(b.matchPattern);if(!d)return null;let e=d[0],f=a.match(b.parsePattern);if(!f)return null;let g=b.valueCallback?b.valueCallback(f[0]):f[0];return{value:g=c.valueCallback?c.valueCallback(g):g,rest:a.slice(e.length)}}),era:Z({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Z({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:a=>a+1}),month:Z({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Z({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Z({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},_={};function aa(a){let b=Object.prototype.toString.call(a);return a instanceof Date||"object"==typeof a&&"[object Date]"===b?new a.constructor(+a):new Date("number"==typeof a||"[object Number]"===b||"string"==typeof a||"[object String]"===b?a:NaN)}function ab(a){let b=aa(a);return b.setHours(0,0,0,0),b}function ac(a){let b=aa(a),c=new Date(Date.UTC(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds(),b.getMilliseconds()));return c.setUTCFullYear(b.getFullYear()),a-c}function ad(a,b){return a instanceof Date?new a.constructor(b):new Date(b)}function ae(a,b){let c=b?.weekStartsOn??b?.locale?.options?.weekStartsOn??_.weekStartsOn??_.locale?.options?.weekStartsOn??0,d=aa(a),e=d.getDay();return d.setDate(d.getDate()-(7*(e<c)+e-c)),d.setHours(0,0,0,0),d}function af(a){return ae(a,{weekStartsOn:1})}function ag(a){let b=aa(a),c=b.getFullYear(),d=ad(a,0);d.setFullYear(c+1,0,4),d.setHours(0,0,0,0);let e=af(d),f=ad(a,0);f.setFullYear(c,0,4),f.setHours(0,0,0,0);let g=af(f);return b.getTime()>=e.getTime()?c+1:b.getTime()>=g.getTime()?c:c-1}function ah(a,b){let c=aa(a),d=c.getFullYear(),e=b?.firstWeekContainsDate??b?.locale?.options?.firstWeekContainsDate??_.firstWeekContainsDate??_.locale?.options?.firstWeekContainsDate??1,f=ad(a,0);f.setFullYear(d+1,0,e),f.setHours(0,0,0,0);let g=ae(f,b),h=ad(a,0);h.setFullYear(d,0,e),h.setHours(0,0,0,0);let i=ae(h,b);return c.getTime()>=g.getTime()?d+1:c.getTime()>=i.getTime()?d:d-1}function ai(a,b){let c=Math.abs(a).toString().padStart(b,"0");return(a<0?"-":"")+c}let aj={y(a,b){let c=a.getFullYear(),d=c>0?c:1-c;return ai("yy"===b?d%100:d,b.length)},M(a,b){let c=a.getMonth();return"M"===b?String(c+1):ai(c+1,2)},d:(a,b)=>ai(a.getDate(),b.length),a(a,b){let c=a.getHours()/12>=1?"pm":"am";switch(b){case"a":case"aa":return c.toUpperCase();case"aaa":return c;case"aaaaa":return c[0];default:return"am"===c?"a.m.":"p.m."}},h:(a,b)=>ai(a.getHours()%12||12,b.length),H:(a,b)=>ai(a.getHours(),b.length),m:(a,b)=>ai(a.getMinutes(),b.length),s:(a,b)=>ai(a.getSeconds(),b.length),S(a,b){let c=b.length;return ai(Math.trunc(a.getMilliseconds()*Math.pow(10,c-3)),b.length)}},ak={G:function(a,b,c){let d=+(a.getFullYear()>0);switch(b){case"G":case"GG":case"GGG":return c.era(d,{width:"abbreviated"});case"GGGGG":return c.era(d,{width:"narrow"});default:return c.era(d,{width:"wide"})}},y:function(a,b,c){if("yo"===b){let b=a.getFullYear();return c.ordinalNumber(b>0?b:1-b,{unit:"year"})}return aj.y(a,b)},Y:function(a,b,c,d){let e=ah(a,d),f=e>0?e:1-e;return"YY"===b?ai(f%100,2):"Yo"===b?c.ordinalNumber(f,{unit:"year"}):ai(f,b.length)},R:function(a,b){return ai(ag(a),b.length)},u:function(a,b){return ai(a.getFullYear(),b.length)},Q:function(a,b,c){let d=Math.ceil((a.getMonth()+1)/3);switch(b){case"Q":return String(d);case"QQ":return ai(d,2);case"Qo":return c.ordinalNumber(d,{unit:"quarter"});case"QQQ":return c.quarter(d,{width:"abbreviated",context:"formatting"});case"QQQQQ":return c.quarter(d,{width:"narrow",context:"formatting"});default:return c.quarter(d,{width:"wide",context:"formatting"})}},q:function(a,b,c){let d=Math.ceil((a.getMonth()+1)/3);switch(b){case"q":return String(d);case"qq":return ai(d,2);case"qo":return c.ordinalNumber(d,{unit:"quarter"});case"qqq":return c.quarter(d,{width:"abbreviated",context:"standalone"});case"qqqqq":return c.quarter(d,{width:"narrow",context:"standalone"});default:return c.quarter(d,{width:"wide",context:"standalone"})}},M:function(a,b,c){let d=a.getMonth();switch(b){case"M":case"MM":return aj.M(a,b);case"Mo":return c.ordinalNumber(d+1,{unit:"month"});case"MMM":return c.month(d,{width:"abbreviated",context:"formatting"});case"MMMMM":return c.month(d,{width:"narrow",context:"formatting"});default:return c.month(d,{width:"wide",context:"formatting"})}},L:function(a,b,c){let d=a.getMonth();switch(b){case"L":return String(d+1);case"LL":return ai(d+1,2);case"Lo":return c.ordinalNumber(d+1,{unit:"month"});case"LLL":return c.month(d,{width:"abbreviated",context:"standalone"});case"LLLLL":return c.month(d,{width:"narrow",context:"standalone"});default:return c.month(d,{width:"wide",context:"standalone"})}},w:function(a,b,c,d){let e,f,g,h,i=Math.round((ae(e=aa(a),d)-(f=d?.firstWeekContainsDate??d?.locale?.options?.firstWeekContainsDate??_.firstWeekContainsDate??_.locale?.options?.firstWeekContainsDate??1,g=ah(e,d),(h=ad(e,0)).setFullYear(g,0,f),h.setHours(0,0,0,0),ae(h,d)))/6048e5)+1;return"wo"===b?c.ordinalNumber(i,{unit:"week"}):ai(i,b.length)},I:function(a,b,c){let d,e,f,g=Math.round((af(d=aa(a))-(e=ag(d),(f=ad(d,0)).setFullYear(e,0,4),f.setHours(0,0,0,0),af(f)))/6048e5)+1;return"Io"===b?c.ordinalNumber(g,{unit:"week"}):ai(g,b.length)},d:function(a,b,c){return"do"===b?c.ordinalNumber(a.getDate(),{unit:"date"}):aj.d(a,b)},D:function(a,b,c){var d;let e,f,g,h,i,j=(e=aa(a),f=aa(e),(g=ad(e,0)).setFullYear(f.getFullYear(),0,1),g.setHours(0,0,0,0),d=g,h=ab(e),i=ab(d),Math.round((h-ac(h)-(i-ac(i)))/864e5)+1);return"Do"===b?c.ordinalNumber(j,{unit:"dayOfYear"}):ai(j,b.length)},E:function(a,b,c){let d=a.getDay();switch(b){case"E":case"EE":case"EEE":return c.day(d,{width:"abbreviated",context:"formatting"});case"EEEEE":return c.day(d,{width:"narrow",context:"formatting"});case"EEEEEE":return c.day(d,{width:"short",context:"formatting"});default:return c.day(d,{width:"wide",context:"formatting"})}},e:function(a,b,c,d){let e=a.getDay(),f=(e-d.weekStartsOn+8)%7||7;switch(b){case"e":return String(f);case"ee":return ai(f,2);case"eo":return c.ordinalNumber(f,{unit:"day"});case"eee":return c.day(e,{width:"abbreviated",context:"formatting"});case"eeeee":return c.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return c.day(e,{width:"short",context:"formatting"});default:return c.day(e,{width:"wide",context:"formatting"})}},c:function(a,b,c,d){let e=a.getDay(),f=(e-d.weekStartsOn+8)%7||7;switch(b){case"c":return String(f);case"cc":return ai(f,b.length);case"co":return c.ordinalNumber(f,{unit:"day"});case"ccc":return c.day(e,{width:"abbreviated",context:"standalone"});case"ccccc":return c.day(e,{width:"narrow",context:"standalone"});case"cccccc":return c.day(e,{width:"short",context:"standalone"});default:return c.day(e,{width:"wide",context:"standalone"})}},i:function(a,b,c){let d=a.getDay(),e=0===d?7:d;switch(b){case"i":return String(e);case"ii":return ai(e,b.length);case"io":return c.ordinalNumber(e,{unit:"day"});case"iii":return c.day(d,{width:"abbreviated",context:"formatting"});case"iiiii":return c.day(d,{width:"narrow",context:"formatting"});case"iiiiii":return c.day(d,{width:"short",context:"formatting"});default:return c.day(d,{width:"wide",context:"formatting"})}},a:function(a,b,c){let d=a.getHours()/12>=1?"pm":"am";switch(b){case"a":case"aa":return c.dayPeriod(d,{width:"abbreviated",context:"formatting"});case"aaa":return c.dayPeriod(d,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return c.dayPeriod(d,{width:"narrow",context:"formatting"});default:return c.dayPeriod(d,{width:"wide",context:"formatting"})}},b:function(a,b,c){let d,e=a.getHours();switch(d=12===e?"noon":0===e?"midnight":e/12>=1?"pm":"am",b){case"b":case"bb":return c.dayPeriod(d,{width:"abbreviated",context:"formatting"});case"bbb":return c.dayPeriod(d,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return c.dayPeriod(d,{width:"narrow",context:"formatting"});default:return c.dayPeriod(d,{width:"wide",context:"formatting"})}},B:function(a,b,c){let d,e=a.getHours();switch(d=e>=17?"evening":e>=12?"afternoon":e>=4?"morning":"night",b){case"B":case"BB":case"BBB":return c.dayPeriod(d,{width:"abbreviated",context:"formatting"});case"BBBBB":return c.dayPeriod(d,{width:"narrow",context:"formatting"});default:return c.dayPeriod(d,{width:"wide",context:"formatting"})}},h:function(a,b,c){if("ho"===b){let b=a.getHours()%12;return 0===b&&(b=12),c.ordinalNumber(b,{unit:"hour"})}return aj.h(a,b)},H:function(a,b,c){return"Ho"===b?c.ordinalNumber(a.getHours(),{unit:"hour"}):aj.H(a,b)},K:function(a,b,c){let d=a.getHours()%12;return"Ko"===b?c.ordinalNumber(d,{unit:"hour"}):ai(d,b.length)},k:function(a,b,c){let d=a.getHours();return(0===d&&(d=24),"ko"===b)?c.ordinalNumber(d,{unit:"hour"}):ai(d,b.length)},m:function(a,b,c){return"mo"===b?c.ordinalNumber(a.getMinutes(),{unit:"minute"}):aj.m(a,b)},s:function(a,b,c){return"so"===b?c.ordinalNumber(a.getSeconds(),{unit:"second"}):aj.s(a,b)},S:function(a,b){return aj.S(a,b)},X:function(a,b,c){let d=a.getTimezoneOffset();if(0===d)return"Z";switch(b){case"X":return am(d);case"XXXX":case"XX":return an(d);default:return an(d,":")}},x:function(a,b,c){let d=a.getTimezoneOffset();switch(b){case"x":return am(d);case"xxxx":case"xx":return an(d);default:return an(d,":")}},O:function(a,b,c){let d=a.getTimezoneOffset();switch(b){case"O":case"OO":case"OOO":return"GMT"+al(d,":");default:return"GMT"+an(d,":")}},z:function(a,b,c){let d=a.getTimezoneOffset();switch(b){case"z":case"zz":case"zzz":return"GMT"+al(d,":");default:return"GMT"+an(d,":")}},t:function(a,b,c){return ai(Math.trunc(a.getTime()/1e3),b.length)},T:function(a,b,c){return ai(a.getTime(),b.length)}};function al(a,b=""){let c=a>0?"-":"+",d=Math.abs(a),e=Math.trunc(d/60),f=d%60;return 0===f?c+String(e):c+String(e)+b+ai(f,2)}function am(a,b){return a%60==0?(a>0?"-":"+")+ai(Math.abs(a)/60,2):an(a,b)}function an(a,b=""){let c=Math.abs(a);return(a>0?"-":"+")+ai(Math.trunc(c/60),2)+b+ai(c%60,2)}let ao=(a,b)=>{switch(a){case"P":return b.date({width:"short"});case"PP":return b.date({width:"medium"});case"PPP":return b.date({width:"long"});default:return b.date({width:"full"})}},ap=(a,b)=>{switch(a){case"p":return b.time({width:"short"});case"pp":return b.time({width:"medium"});case"ppp":return b.time({width:"long"});default:return b.time({width:"full"})}},aq={p:ap,P:(a,b)=>{let c,d=a.match(/(P+)(p+)?/)||[],e=d[1],f=d[2];if(!f)return ao(a,b);switch(e){case"P":c=b.dateTime({width:"short"});break;case"PP":c=b.dateTime({width:"medium"});break;case"PPP":c=b.dateTime({width:"long"});break;default:c=b.dateTime({width:"full"})}return c.replace("{{date}}",ao(e,b)).replace("{{time}}",ap(f,b))}},ar=/^D+$/,as=/^Y+$/,at=["D","DD","YY","YYYY"],au=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,av=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,aw=/^'([^]*?)'?$/,ax=/''/g,ay=/[a-zA-Z]/;function az(a,b,c){let d=c?.locale??_.locale??$,e=c?.firstWeekContainsDate??c?.locale?.options?.firstWeekContainsDate??_.firstWeekContainsDate??_.locale?.options?.firstWeekContainsDate??1,f=c?.weekStartsOn??c?.locale?.options?.weekStartsOn??_.weekStartsOn??_.locale?.options?.weekStartsOn??0,g=aa(a);if(!((g instanceof Date||"object"==typeof g&&"[object Date]"===Object.prototype.toString.call(g)||"number"==typeof g)&&!isNaN(Number(aa(g)))))throw RangeError("Invalid time value");let h=b.match(av).map(a=>{let b=a[0];return"p"===b||"P"===b?(0,aq[b])(a,d.formatLong):a}).join("").match(au).map(a=>{if("''"===a)return{isToken:!1,value:"'"};let b=a[0];if("'"===b){var c;let b;return{isToken:!1,value:(b=(c=a).match(aw))?b[1].replace(ax,"'"):c}}if(ak[b])return{isToken:!0,value:a};if(b.match(ay))throw RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:a}});d.localize.preprocessor&&(h=d.localize.preprocessor(g,h));let i={firstWeekContainsDate:e,weekStartsOn:f,locale:d};return h.map(e=>{if(!e.isToken)return e.value;let f=e.value;return(!c?.useAdditionalWeekYearTokens&&as.test(f)||!c?.useAdditionalDayOfYearTokens&&ar.test(f))&&function(a,b,c){var d,e,f;let g,h=(d=a,e=b,f=c,g="Y"===d[0]?"years":"days of the month",`Use \`${d.toLowerCase()}\` instead of \`${d}\` (in \`${e}\`) for formatting ${g} to the input \`${f}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`);if(console.warn(h),at.includes(a))throw RangeError(h)}(f,b,String(a)),(0,ak[f[0]])(g,f,d.localize,i)}).join("")}var aA=a.i(54161),aB=a.i(87532),aC=a.i(87682),aD=a.i(81464),aE=a.i(33508),aF=a.i(67453),aG=a.i(41675);let aH=({searchTerm:a,statusFilter:b,reviewStatusFilter:d,groupBy:g,filteredCount:h,onSearchChange:j,onStatusFilterChange:k,onReviewStatusFilterChange:l,onGroupByChange:m,onClearAllFilters:p})=>{let q=a||"all"!==b||"all"!==d||"none"!==g;return(0,c.jsxs)(i.Card,{className:"border-2 border-dashed border-blue-200 hover:border-blue-400 transition-all duration-300 shadow-lg bg-gradient-to-r from-blue-50 to-indigo-50",children:[(0,c.jsx)(i.CardHeader,{className:"pb-4",children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)("div",{className:"p-3 bg-blue-100 rounded-xl shadow-sm",children:(0,c.jsx)(aD.Filter,{className:"w-6 h-6 text-blue-700"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)(i.CardTitle,{className:"text-xl text-blue-900 font-bold",children:"Advanced Search & Filters"}),(0,c.jsx)(i.CardDescription,{className:"text-sm text-blue-700 mt-1",children:"Powerful tools to find and organize your audit reports efficiently"})]})]}),q&&(0,c.jsxs)(e.Button,{variant:"ghost",size:"sm",onClick:p,className:"text-blue-600 hover:text-blue-800 hover:bg-blue-100 transition-colors duration-200",children:[(0,c.jsx)(aE.X,{className:"w-4 h-4 mr-1"}),"Clear all filters"]})]})}),(0,c.jsx)(i.CardContent,{children:(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)(aB.Search,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-blue-500"}),(0,c.jsx)(f.Input,{placeholder:"Search by client name, audit code, or reviewer...",value:a,onChange:a=>j(a.target.value),className:"pl-12 h-14 text-base border-2 border-blue-200 focus:border-blue-500 focus:ring-blue-500 bg-white shadow-sm rounded-xl"}),a&&(0,c.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:()=>j(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0 hover:bg-blue-100",children:(0,c.jsx)(aE.X,{className:"w-4 h-4"})})]}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,c.jsxs)("div",{className:"space-y-3",children:[(0,c.jsxs)("label",{className:"text-sm font-semibold text-blue-800 flex items-center gap-2",children:[(0,c.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full shadow-sm"}),"Status Filter"]}),(0,c.jsxs)(aC.Select,{value:b,onValueChange:k,children:[(0,c.jsx)(aC.SelectTrigger,{className:"h-12 border-2 border-blue-200 focus:border-blue-500 bg-white shadow-sm",children:(0,c.jsx)(aC.SelectValue,{placeholder:"All Statuses"})}),(0,c.jsxs)(aC.SelectContent,{children:[(0,c.jsx)(aC.SelectItem,{value:"all",children:"All Statuses"}),(0,c.jsx)(aC.SelectItem,{value:"active",children:"ðŸŸ¢ Active"}),(0,c.jsx)(aC.SelectItem,{value:"archived",children:"ðŸ“¦ Archived"})]})]})]}),(0,c.jsxs)("div",{className:"space-y-3",children:[(0,c.jsxs)("label",{className:"text-sm font-semibold text-blue-800 flex items-center gap-2",children:[(0,c.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full shadow-sm"}),"Review Status"]}),(0,c.jsxs)(aC.Select,{value:d,onValueChange:l,children:[(0,c.jsx)(aC.SelectTrigger,{className:"h-12 border-2 border-blue-200 focus:border-blue-500 bg-white shadow-sm",children:(0,c.jsx)(aC.SelectValue,{placeholder:"All Reviews"})}),(0,c.jsxs)(aC.SelectContent,{children:[(0,c.jsx)(aC.SelectItem,{value:"all",children:"All Reviews"}),(0,c.jsx)(aC.SelectItem,{value:"completed",children:"âœ… Completed"}),(0,c.jsx)(aC.SelectItem,{value:"pending",children:"â³ Pending"})]})]})]}),(0,c.jsxs)("div",{className:"space-y-3",children:[(0,c.jsxs)("label",{className:"text-sm font-semibold text-blue-800 flex items-center gap-2",children:[(0,c.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full shadow-sm"}),"Group By"]}),(0,c.jsxs)(aC.Select,{value:g,onValueChange:a=>m(a),children:[(0,c.jsx)(aC.SelectTrigger,{className:"h-12 border-2 border-blue-200 focus:border-blue-500 bg-white shadow-sm",children:(0,c.jsx)(aC.SelectValue,{placeholder:"No Grouping"})}),(0,c.jsxs)(aC.SelectContent,{children:[(0,c.jsx)(aC.SelectItem,{value:"none",children:"ðŸ“‹ No Grouping"}),(0,c.jsx)(aC.SelectItem,{value:"month",children:"ðŸ“… By Month"}),(0,c.jsx)(aC.SelectItem,{value:"status",children:"ðŸ·ï¸ By Status"}),(0,c.jsx)(aC.SelectItem,{value:"review_status",children:"âœ… By Review Status"})]})]})]}),(0,c.jsxs)("div",{className:"space-y-3",children:[(0,c.jsxs)("label",{className:"text-sm font-semibold text-blue-800 flex items-center gap-2",children:[(0,c.jsx)("div",{className:"w-3 h-3 bg-orange-500 rounded-full shadow-sm"}),"Results"]}),(0,c.jsxs)("div",{className:"flex items-center h-12 px-4 bg-white border-2 border-blue-200 rounded-lg shadow-sm",children:[(0,c.jsx)(n.Users,{className:"w-5 h-5 text-blue-500 mr-3"}),(0,c.jsxs)("span",{className:"text-base font-semibold text-blue-800",children:[h," audit",1!==h?"s":""]})]})]})]}),(0,c.jsxs)("div",{className:"flex flex-wrap gap-3 pt-4 border-t border-blue-200",children:[(0,c.jsx)("span",{className:"text-sm font-semibold text-blue-700 mr-3 flex items-center",children:"âš¡ Quick filters:"}),(0,c.jsxs)(e.Button,{variant:"pending"===d?"default":"outline",size:"sm",onClick:()=>l("pending"===d?"all":"pending"),className:"h-8 text-sm bg-orange-100 text-orange-800 border-orange-300 hover:bg-orange-200 transition-all duration-200",children:[(0,c.jsx)(o.Clock,{className:"w-4 h-4 mr-2"}),"Pending Reviews"]}),(0,c.jsxs)(e.Button,{variant:"completed"===d?"default":"outline",size:"sm",onClick:()=>l("completed"===d?"all":"completed"),className:"h-8 text-sm bg-green-100 text-green-800 border-green-300 hover:bg-green-200 transition-all duration-200",children:[(0,c.jsx)(aF.CheckCircle2,{className:"w-4 h-4 mr-2"}),"Completed"]}),(0,c.jsxs)(e.Button,{variant:"month"===g?"default":"outline",size:"sm",onClick:()=>m("month"===g?"none":"month"),className:"h-8 text-sm bg-purple-100 text-purple-800 border-purple-300 hover:bg-purple-200 transition-all duration-200",children:[(0,c.jsx)(aG.Calendar,{className:"w-4 h-4 mr-2"}),"Group by Month"]})]})]})})]})};var aI=a.i(67552),aJ=a.i(5784);let aK=({audits:a,selectedAudits:b,sortField:d,sortDirection:f,onSort:g,onSelectAll:h})=>{let i=a.length>0&&b.size===a.length,j=b.size>0&&b.size<a.length,k=({field:a,children:b})=>(0,c.jsxs)(e.Button,{variant:"ghost",size:"sm",onClick:()=>g(a),className:"h-auto p-1 font-medium justify-start",children:[b,d===a&&("asc"===f?(0,c.jsx)(aI.ChevronUp,{className:"w-4 h-4 ml-1"}):(0,c.jsx)(aJ.ChevronDown,{className:"w-4 h-4 ml-1"}))]});return(0,c.jsx)("thead",{className:"bg-gray-50",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"p-4 text-left",children:(0,c.jsx)(O,{checked:i,onCheckedChange:h,className:j?"data-[state=checked]:bg-blue-600":""})}),(0,c.jsx)("th",{className:"p-4 text-left",children:(0,c.jsx)(k,{field:"client_name",children:"Client"})}),(0,c.jsx)("th",{className:"p-4 text-left",children:(0,c.jsx)(k,{field:"created_at",children:"Created"})}),(0,c.jsx)("th",{className:"p-4 text-left",children:(0,c.jsx)(k,{field:"status",children:"Status"})}),(0,c.jsx)("th",{className:"p-4 text-left",children:(0,c.jsx)(k,{field:"review_status",children:"Review"})}),(0,c.jsx)("th",{className:"p-4 text-left",children:(0,c.jsx)(k,{field:"reviewer_name",children:"Reviewer"})}),(0,c.jsx)("th",{className:"p-4 text-left",children:"Lock Status"}),(0,c.jsx)("th",{className:"p-4 text-left",children:"Code"}),(0,c.jsx)("th",{className:"p-4 text-left",children:"Actions"})]})})};var aL=a.i(54816);let aM=(0,q.default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var aN=a.i(77156),aO=a.i(81560),aP=a.i(24569);let aQ=(0,q.default)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);var aR=a.i(46842);let aS=({audit:a,isSelected:b,onSelectAudit:d,onCopyAuditCode:f,onViewAudit:g,onCopyShareUrl:h,onDeleteAudit:i,onEditAudit:j,onToggleLock:k})=>{let l=a.user_audit_codes&&a.user_audit_codes.length>0,m=l?a.user_audit_codes[0]:null;return(0,c.jsxs)("tr",{className:`border-b ${l?"bg-green-100 hover:bg-green-200":"hover:bg-gray-50"}`,children:[(0,c.jsx)("td",{className:"p-4",children:(0,c.jsx)(O,{checked:b,onCheckedChange:b=>d(a.id,!!b)})}),(0,c.jsx)("td",{className:"p-4",children:(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"font-medium",children:a.client_name}),(0,c.jsx)("div",{className:"text-sm text-gray-500",children:a.share_url_slug})]}),l&&(0,c.jsx)(aL.TooltipProvider,{children:(0,c.jsxs)(aL.Tooltip,{children:[(0,c.jsx)(aL.TooltipTrigger,{children:(0,c.jsx)("div",{className:"flex items-center",children:(0,c.jsx)(aR.User,{className:"w-4 h-4 text-green-600"})})}),(0,c.jsxs)(aL.TooltipContent,{children:[(0,c.jsxs)("p",{children:["Claimed by: ",m?.profiles?.email||"Unknown user"]}),(0,c.jsx)("p",{className:"text-xs text-gray-500",children:m?.created_at?az(new Date(m.created_at),"MMM d, yyyy h:mm a"):""})]})]})})]})}),(0,c.jsxs)("td",{className:"p-4 text-sm text-gray-600",children:[(0,c.jsx)("div",{children:az(new Date(a.created_at),"MMM d, yyyy")}),(0,c.jsx)("div",{className:"text-xs",children:az(new Date(a.created_at),"h:mm a")})]}),(0,c.jsx)("td",{className:"p-4",children:(0,c.jsx)(aA.Badge,{variant:"active"===a.status?"default":"secondary",children:a.status})}),(0,c.jsx)("td",{className:"p-4",children:(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsx)(aA.Badge,{variant:"completed"===a.review_status?"default":"secondary",className:"completed"===a.review_status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",children:"completed"===a.review_status?"Completed":"Pending"}),"completed"===a.review_status&&(0,c.jsx)(aF.CheckCircle2,{className:"w-4 h-4 text-green-500"})]})}),(0,c.jsx)("td",{className:"p-4 text-sm",children:a.reviewer_name||"Not assigned"}),(0,c.jsx)("td",{className:"px-4 py-4 text-sm text-gray-600",children:(0,c.jsx)("div",{className:"flex items-center space-x-2",children:a.is_locked?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Q.Lock,{className:"w-4 h-4 text-orange-500"}),(0,c.jsxs)("span",{className:"text-orange-600 font-medium",children:["Locked ",a.snapshot_version?`(${a.snapshot_version.toUpperCase()})`:"(Legacy)"]})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(R,{className:"w-4 h-4 text-green-500"}),(0,c.jsx)("span",{className:"text-green-600",children:"Live"})]})})}),(0,c.jsx)("td",{className:"p-4 text-sm font-mono",children:a.audit_code||"N/A"}),(0,c.jsx)("td",{className:"p-4",children:(0,c.jsxs)("div",{className:"flex items-center space-x-1",children:[k&&(0,c.jsx)(e.Button,{size:"sm",variant:"outline",onClick:()=>{k&&k(a.id,!!a.is_locked)},title:a.is_locked?"Unlock Audit":"Lock Audit",className:a.is_locked?"text-red-600":"text-green-600",children:a.is_locked?(0,c.jsx)(R,{className:"w-4 h-4"}):(0,c.jsx)(Q.Lock,{className:"w-4 h-4"})}),(0,c.jsx)(e.Button,{size:"sm",variant:"outline",onClick:()=>{j(a.id)},title:"completed"===a.review_status?"Edit Review":"Complete Review",className:"pending"===a.review_status?"bg-yellow-50 border-yellow-200 text-yellow-700 hover:bg-yellow-100":"",children:(0,c.jsx)(aP.Edit,{className:"w-4 h-4"})}),a.audit_code&&(0,c.jsx)(e.Button,{size:"sm",variant:"outline",onClick:()=>f(a.audit_code,a.client_name),title:"Copy Audit Code",children:(0,c.jsx)(aQ,{className:"w-4 h-4"})}),(0,c.jsx)(e.Button,{size:"sm",variant:"outline",onClick:()=>g(a.share_url_slug),title:"View Audit",children:(0,c.jsx)(aN.Eye,{className:"w-4 h-4"})}),(0,c.jsx)(e.Button,{size:"sm",variant:"outline",onClick:()=>h(a.share_url_slug),title:"Copy Share URL",children:(0,c.jsx)(aM,{className:"w-4 h-4"})}),(0,c.jsx)(e.Button,{size:"sm",variant:"destructive",onClick:()=>i(a.id,a.client_name),title:"Delete Audit",children:(0,c.jsx)(aO.Trash2,{className:"w-4 h-4"})})]})})]})},aT=({groupName:a,audits:b,selectedAudits:d,sortField:e,sortDirection:f,groupBy:g,onSelectAudit:h,onSelectAll:i,onSort:j,onCopyAuditCode:k,onViewAudit:l,onCopyShareUrl:m,onDeleteAudit:n,onEditAudit:o,onToggleLock:p})=>{let q=b.filter(a=>b.map(a=>a.id).includes(a.id)),r=q.filter(a=>d.has(a.id)).length,s=r===q.length&&q.length>0,t=r>0&&r<q.length;return 0===b.length?null:(0,c.jsxs)("div",{className:"mb-6",children:["none"!==g&&(0,c.jsxs)("div",{className:"flex items-center justify-between mb-4 p-3 bg-gray-50 rounded-lg",children:[(0,c.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,c.jsx)(O,{checked:s,onCheckedChange:a=>{q.forEach(b=>{h(b.id,a)})},className:t?"data-[state=checked]:bg-blue-600":""}),(0,c.jsx)("h3",{className:"font-semibold text-gray-900",children:a}),(0,c.jsxs)(aA.Badge,{variant:"outline",children:[q.length," audits"]})]}),r>0&&(0,c.jsxs)(aA.Badge,{variant:"secondary",children:[r," selected"]})]}),(0,c.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,c.jsxs)("table",{className:"w-full",children:[(0,c.jsx)(aK,{audits:b,selectedAudits:d,sortField:e,sortDirection:f,onSort:j,onSelectAll:i}),(0,c.jsx)("tbody",{children:b.map(a=>(0,c.jsx)(aS,{audit:a,isSelected:d.has(a.id),onSelectAudit:h,onCopyAuditCode:k,onViewAudit:l,onCopyShareUrl:m,onDeleteAudit:n,onEditAudit:o,onToggleLock:p},a.id))})]})})]})},aU=({audits:a,selectedAudits:b,onSelectAudit:e,onSelectAll:f,onCopyAuditCode:g,onViewAudit:h,onCopyShareUrl:j,onDeleteAudit:k,onEditAudit:l,onToggleLock:m})=>{let[n,o]=(0,d.useState)(""),[p,q]=(0,d.useState)("created_at"),[r,s]=(0,d.useState)("desc"),[t,u]=(0,d.useState)("none"),[v,w]=(0,d.useState)("all"),[x,y]=(0,d.useState)("all"),z=(0,d.useMemo)(()=>{let b=a.filter(a=>{let b=a.client_name.toLowerCase().includes(n.toLowerCase())||a.audit_code?.toLowerCase().includes(n.toLowerCase())||a.reviewer_name?.toLowerCase().includes(n.toLowerCase()),c="all"===v||a.status===v,d="all"===x||a.review_status===x;return b&&c&&d});return b.sort((a,b)=>{let c=a[p],d=b[p];return("created_at"===p?(c=new Date(c).getTime(),d=new Date(d).getTime()):(c=c?.toString().toLowerCase()||"",d=d?.toString().toLowerCase()||""),"asc"===r)?c>d?1:-1:c<d?1:-1}),b},[a,n,p,r,v,x]),A=(0,d.useMemo)(()=>{if("none"===t)return{"All Audits":z};let a={};return z.forEach(b=>{let c="";switch(t){case"month":c=az(new Date(b.created_at),"MMMM yyyy");break;case"status":c=b.status||"Unknown Status";break;case"review_status":c="completed"===b.review_status?"Completed":"Pending"}a[c]||(a[c]=[]),a[c].push(b)}),a},[z,t]),B=a=>{p===a?s("asc"===r?"desc":"asc"):(q(a),s("asc"))};return(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsx)(aH,{searchTerm:n,statusFilter:v,reviewStatusFilter:x,groupBy:t,filteredCount:z.length,onSearchChange:o,onStatusFilterChange:w,onReviewStatusFilterChange:y,onGroupByChange:u,onClearAllFilters:()=>{o(""),w("all"),y("all"),u("none")}}),(0,c.jsxs)(i.Card,{children:[(0,c.jsx)("div",{className:"p-6 pb-4",children:(0,c.jsxs)(i.CardTitle,{className:"flex items-center justify-between",children:[(0,c.jsx)("span",{children:"Audit Reports"}),b.size>0&&(0,c.jsxs)(aA.Badge,{variant:"outline",className:"ml-2",children:[b.size," selected"]})]})}),(0,c.jsxs)(i.CardContent,{children:[Object.entries(A).map(([a,d])=>(0,c.jsx)(aT,{groupName:a,audits:d,selectedAudits:b,sortField:p,sortDirection:r,groupBy:t,onSelectAudit:e,onSelectAll:f,onSort:B,onCopyAuditCode:g,onViewAudit:h,onCopyShareUrl:j,onDeleteAudit:k,onEditAudit:l,onToggleLock:m},a)),0===z.length&&(0,c.jsxs)("div",{className:"text-center py-12",children:[(0,c.jsx)("div",{className:"text-gray-400 mb-4",children:(0,c.jsx)(aB.Search,{className:"w-12 h-12 mx-auto"})}),(0,c.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No audits found"}),(0,c.jsx)("p",{className:"text-gray-500",children:"Try adjusting your search or filter criteria."})]})]})]})]})};var aV=a.i(11011),aW=a=>a instanceof Date,aX=a=>null==a,aY=a=>!aX(a)&&!Array.isArray(a)&&"object"==typeof a&&!aW(a),aZ=a=>aY(a)&&a.target?"checkbox"===a.target.type?a.target.checked:a.target.value:a,a$=(a,b)=>a.has(b.substring(0,b.search(/\.\d+(\.|$)/))||b);function a_(a){let b,c=Array.isArray(a);if("undefined"!=typeof FileList&&FileList,a instanceof Date)b=new Date(a);else if(a instanceof Set)b=new Set(a);else{let d;if(!(c||aY(a)))return a;if(b=c?[]:{},c||aY(d=a.constructor&&a.constructor.prototype)&&d.hasOwnProperty("isPrototypeOf"))for(let c in a)a.hasOwnProperty(c)&&(b[c]=a_(a[c]));else b=a}return b}var a0=a=>Array.isArray(a)?a.filter(Boolean):[],a1=a=>void 0===a,a2=(a,b,c)=>{if(!b||!aY(a))return c;let d=a0(b.split(/[,[\].]+?/)).reduce((a,b)=>aX(a)?a:a[b],a);return a1(d)||d===a?a1(a[b])?c:a[b]:d},a3=a=>a0(a.replace(/["|']|\]/g,"").split(/\.|\[/)),a4=(a,b,c)=>{let d=-1,e=/^\w*$/.test(b)?[b]:a3(b),f=e.length,g=f-1;for(;++d<f;){let b=e[d],f=c;if(d!==g){let c=a[b];f=aY(c)||Array.isArray(c)?c:isNaN(+e[d+1])?{}:[]}if("__proto__"===b||"constructor"===b||"prototype"===b)return;a[b]=f,a=a[b]}};let a5="blur",a6="onChange",a7="onSubmit",a8="maxLength",a9="minLength",ba="pattern",bb="required",bc=d.default.createContext(null);var bd=(a,b,c,d=!0)=>{let e={defaultValues:b._defaultValues};for(let f in a)Object.defineProperty(e,f,{get:()=>("all"!==b._proxyFormState[f]&&(b._proxyFormState[f]=!d||"all"),c&&(c[f]=!0),a[f])});return e},be=(a,b,c,d,e)=>"string"==typeof a?(d&&b.watch.add(a),a2(c,a,e)):Array.isArray(a)?a.map(a=>(d&&b.watch.add(a),a2(c,a))):(d&&(b.watchAll=!0),c);let bf=a=>a.render(function(a){let b=d.default.useContext(bc),{name:c,disabled:e,control:f=b.control,shouldUnregister:g}=a,h=a$(f._names.array,c),i=function(a){let b=d.default.useContext(bc),{control:c=b.control,name:e,defaultValue:f,disabled:g,exact:h}=a||{},i=d.default.useRef(e),j=d.default.useRef(f);i.current=e,d.default.useEffect(()=>c._subscribe({name:i.current,formState:{values:!0},exact:h,callback:a=>!g&&l(be(i.current,c._names,a.values||c._formValues,!1,j.current))}),[c,g,h]);let[k,l]=d.default.useState(c._getWatch(e,f));return d.default.useEffect(()=>c._removeUnmounted()),k}({control:f,name:c,defaultValue:a2(f._formValues,c,a2(f._defaultValues,c,a.defaultValue)),exact:!0}),j=function(a){let b=d.default.useContext(bc),{control:c=b.control,disabled:e,name:f,exact:g}=a||{},[h,i]=d.default.useState(c._formState),j=d.default.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),k=d.default.useRef(f);return k.current=f,d.default.useEffect(()=>c._subscribe({name:k.current,formState:j.current,exact:g,callback:a=>{e||i({...c._formState,...a})}}),[c,e,g]),d.default.useEffect(()=>{j.current.isValid&&c._setValid(!0)},[c]),d.default.useMemo(()=>bd(h,c,j.current,!1),[h,c])}({control:f,name:c,exact:!0}),k=d.default.useRef(a),l=d.default.useRef(f.register(c,{...a.rules,value:i,..."boolean"==typeof a.disabled?{disabled:a.disabled}:{}})),m=d.default.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!a2(j.errors,c)},isDirty:{enumerable:!0,get:()=>!!a2(j.dirtyFields,c)},isTouched:{enumerable:!0,get:()=>!!a2(j.touchedFields,c)},isValidating:{enumerable:!0,get:()=>!!a2(j.validatingFields,c)},error:{enumerable:!0,get:()=>a2(j.errors,c)}}),[j,c]),n=d.default.useCallback(a=>l.current.onChange({target:{value:aZ(a),name:c},type:"change"}),[c]),o=d.default.useCallback(()=>l.current.onBlur({target:{value:a2(f._formValues,c),name:c},type:a5}),[c,f._formValues]),p=d.default.useCallback(a=>{let b=a2(f._fields,c);b&&a&&(b._f.ref={focus:()=>a.focus(),select:()=>a.select(),setCustomValidity:b=>a.setCustomValidity(b),reportValidity:()=>a.reportValidity()})},[f._fields,c]),q=d.default.useMemo(()=>({name:c,value:i,..."boolean"==typeof e||j.disabled?{disabled:j.disabled||e}:{},onChange:n,onBlur:o,ref:p}),[c,e,j.disabled,n,o,p,i]);return d.default.useEffect(()=>{let a=f._options.shouldUnregister||g;f.register(c,{...k.current.rules,..."boolean"==typeof k.current.disabled?{disabled:k.current.disabled}:{}});let b=(a,b)=>{let c=a2(f._fields,a);c&&c._f&&(c._f.mount=b)};if(b(c,!0),a){let a=a_(a2(f._options.defaultValues,c));a4(f._defaultValues,c,a),a1(a2(f._formValues,c))&&a4(f._formValues,c,a)}return h||f.register(c),()=>{(h?a&&!f._state.action:a)?f.unregister(c):b(c,!1)}},[c,f,h,g]),d.default.useEffect(()=>{f._setDisabledField({disabled:e,name:c})},[e,c,f]),d.default.useMemo(()=>({field:q,formState:j,fieldState:m}),[q,j,m])}(a));var bg=(a,b,c,d,e)=>b?{...c[a],types:{...c[a]&&c[a].types?c[a].types:{},[d]:e||!0}}:{},bh=a=>Array.isArray(a)?a:[a],bi=()=>{let a=[];return{get observers(){return a},next:b=>{for(let c of a)c.next&&c.next(b)},subscribe:b=>(a.push(b),{unsubscribe:()=>{a=a.filter(a=>a!==b)}}),unsubscribe:()=>{a=[]}}},bj=a=>aX(a)||"object"!=typeof a;function bk(a,b){if(bj(a)||bj(b))return a===b;if(aW(a)&&aW(b))return a.getTime()===b.getTime();let c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(let e of c){let c=a[e];if(!d.includes(e))return!1;if("ref"!==e){let a=b[e];if(aW(c)&&aW(a)||aY(c)&&aY(a)||Array.isArray(c)&&Array.isArray(a)?!bk(c,a):c!==a)return!1}}return!0}var bl=a=>aY(a)&&!Object.keys(a).length,bm=a=>"function"==typeof a,bn=a=>!1;function bo(a,b){let c=Array.isArray(b)?b:/^\w*$/.test(b)?[b]:a3(b),d=1===c.length?a:function(a,b){let c=b.slice(0,-1).length,d=0;for(;d<c;)a=a1(a)?d++:a[b[d++]];return a}(a,c),e=c.length-1,f=c[e];return d&&delete d[f],0!==e&&(aY(d)&&bl(d)||Array.isArray(d)&&function(a){for(let b in a)if(a.hasOwnProperty(b)&&!a1(a[b]))return!1;return!0}(d))&&bo(a,c.slice(0,-1)),a}var bp=a=>{for(let b in a)if(bm(a[b]))return!0;return!1};function bq(a,b={}){let c=Array.isArray(a);if(aY(a)||c)for(let c in a)Array.isArray(a[c])||aY(a[c])&&!bp(a[c])?(b[c]=Array.isArray(a[c])?[]:{},bq(a[c],b[c])):aX(a[c])||(b[c]=!0);return b}var br=(a,b)=>(function a(b,c,d){let e=Array.isArray(b);if(aY(b)||e)for(let e in b)Array.isArray(b[e])||aY(b[e])&&!bp(b[e])?a1(c)||bj(d[e])?d[e]=Array.isArray(b[e])?bq(b[e],[]):{...bq(b[e])}:a(b[e],aX(c)?{}:c[e],d[e]):d[e]=!bk(b[e],c[e]);return d})(a,b,bq(b));let bs={value:!1,isValid:!1},bt={value:!0,isValid:!0};var bu=a=>{if(Array.isArray(a)){if(a.length>1){let b=a.filter(a=>a&&a.checked&&!a.disabled).map(a=>a.value);return{value:b,isValid:!!b.length}}return a[0].checked&&!a[0].disabled?a[0].attributes&&!a1(a[0].attributes.value)?a1(a[0].value)||""===a[0].value?bt:{value:a[0].value,isValid:!0}:bt:bs}return bs},bv=(a,{valueAsNumber:b,valueAsDate:c,setValueAs:d})=>a1(a)?a:b?""===a?NaN:a?+a:a:c&&"string"==typeof a?new Date(a):d?d(a):a;let bw={isValid:!1,value:null};var bx=a=>Array.isArray(a)?a.reduce((a,b)=>b&&b.checked&&!b.disabled?{isValid:!0,value:b.value}:a,bw):bw;function by(a){let b=a.ref;return"file"===b.type?b.files:"radio"===b.type?bx(a.refs).value:"select-multiple"===b.type?[...b.selectedOptions].map(({value:a})=>a):"checkbox"===b.type?bu(a.refs).value:bv(a1(b.value)?a.ref.value:b.value,a)}var bz=a=>a1(a)?a:a instanceof RegExp?a.source:aY(a)?a.value instanceof RegExp?a.value.source:a.value:a,bA=a=>({isOnSubmit:!a||a===a7,isOnBlur:"onBlur"===a,isOnChange:a===a6,isOnAll:"all"===a,isOnTouch:"onTouched"===a});let bB="AsyncFunction";var bC=a=>!!a&&!!a.validate&&!!(bm(a.validate)&&a.validate.constructor.name===bB||aY(a.validate)&&Object.values(a.validate).find(a=>a.constructor.name===bB)),bD=(a,b,c)=>!c&&(b.watchAll||b.watch.has(a)||[...b.watch].some(b=>a.startsWith(b)&&/^\.\w+/.test(a.slice(b.length))));let bE=(a,b,c,d)=>{for(let e of c||Object.keys(a)){let c=a2(a,e);if(c){let{_f:a,...f}=c;if(a){if(a.refs&&a.refs[0]&&b(a.refs[0],e)&&!d)return!0;else if(a.ref&&b(a.ref,a.name)&&!d)return!0;else if(bE(f,b))break}else if(aY(f)&&bE(f,b))break}}};function bF(a,b,c){let d=a2(a,c);if(d||/^\w*$/.test(c))return{error:d,name:c};let e=c.split(".");for(;e.length;){let d=e.join("."),f=a2(b,d),g=a2(a,d);if(f&&!Array.isArray(f)&&c!==d)break;if(g&&g.type)return{name:d,error:g};e.pop()}return{name:c}}var bG=(a,b,c)=>{let d=bh(a2(a,c));return a4(d,"root",b[c]),a4(a,c,d),a},bH=a=>"string"==typeof a;function bI(a,b,c="validate"){if(bH(a)||Array.isArray(a)&&a.every(bH)||"boolean"==typeof a&&!a)return{type:c,message:bH(a)?a:"",ref:b}}var bJ=a=>!aY(a)||a instanceof RegExp?{value:a,message:""}:a,bK=async(a,b,c,d,e,f)=>{let{ref:g,refs:h,required:i,maxLength:j,minLength:k,min:l,max:m,pattern:n,validate:o,name:p,valueAsNumber:q,mount:r}=a._f,s=a2(c,p);if(!r||b.has(p))return{};let t=h?h[0]:g,u=a=>{e&&t.reportValidity&&(t.setCustomValidity("boolean"==typeof a?"":a||""),t.reportValidity())},v={},w="radio"===g.type,x="checkbox"===g.type,y=(q||"file"===g.type)&&a1(g.value)&&a1(s)||""===s||Array.isArray(s)&&!s.length,z=bg.bind(null,p,d,v),A=(a,b,c,d=a8,e=a9)=>{let f=a?b:c;v[p]={type:a?d:e,message:f,ref:g,...z(a?d:e,f)}};if(f?!Array.isArray(s)||!s.length:i&&(!(w||x)&&(y||aX(s))||"boolean"==typeof s&&!s||x&&!bu(h).isValid||w&&!bx(h).isValid)){let{value:a,message:b}=bH(i)?{value:!!i,message:i}:bJ(i);if(a&&(v[p]={type:bb,message:b,ref:t,...z(bb,b)},!d))return u(b),v}if(!y&&(!aX(l)||!aX(m))){let a,b,c=bJ(m),e=bJ(l);if(aX(s)||isNaN(s)){let d=g.valueAsDate||new Date(s),f=a=>new Date(new Date().toDateString()+" "+a),h="time"==g.type,i="week"==g.type;"string"==typeof c.value&&s&&(a=h?f(s)>f(c.value):i?s>c.value:d>new Date(c.value)),"string"==typeof e.value&&s&&(b=h?f(s)<f(e.value):i?s<e.value:d<new Date(e.value))}else{let d=g.valueAsNumber||(s?+s:s);aX(c.value)||(a=d>c.value),aX(e.value)||(b=d<e.value)}if((a||b)&&(A(!!a,c.message,e.message,"max","min"),!d))return u(v[p].message),v}if((j||k)&&!y&&("string"==typeof s||f&&Array.isArray(s))){let a=bJ(j),b=bJ(k),c=!aX(a.value)&&s.length>+a.value,e=!aX(b.value)&&s.length<+b.value;if((c||e)&&(A(c,a.message,b.message),!d))return u(v[p].message),v}if(n&&!y&&"string"==typeof s){let{value:a,message:b}=bJ(n);if(a instanceof RegExp&&!s.match(a)&&(v[p]={type:ba,message:b,ref:g,...z(ba,b)},!d))return u(b),v}if(o){if(bm(o)){let a=bI(await o(s,c),t);if(a&&(v[p]={...a,...z("validate",a.message)},!d))return u(a.message),v}else if(aY(o)){let a={};for(let b in o){if(!bl(a)&&!d)break;let e=bI(await o[b](s,c),t,b);e&&(a={...e,...z(b,e.message)},u(e.message),d&&(v[p]=a))}if(!bl(a)&&(v[p]={ref:t,...a},!d))return v}}return u(!0),v};let bL={mode:a7,reValidateMode:a6,shouldFocusError:!0},bM=a=>{let{children:b,...c}=a;return d.default.createElement(bc.Provider,{value:c},b)},bN=d.createContext({}),bO=({...a})=>(0,c.jsx)(bN.Provider,{value:{name:a.name},children:(0,c.jsx)(bf,{...a})}),bP=()=>{let a=d.useContext(bN),b=d.useContext(bQ),{getFieldState:c,formState:e}=d.default.useContext(bc),f=c(a.name,e);if(!a)throw Error("useFormField should be used within <FormField>");let{id:g}=b;return{id:g,name:a.name,formItemId:`${g}-form-item`,formDescriptionId:`${g}-form-item-description`,formMessageId:`${g}-form-item-message`,...f}},bQ=d.createContext({}),bR=d.forwardRef(({className:a,...b},e)=>{let f=d.useId();return(0,c.jsx)(bQ.Provider,{value:{id:f},children:(0,c.jsx)("div",{ref:e,className:(0,N.cn)("space-y-2",a),...b})})});bR.displayName="FormItem";let bS=d.forwardRef(({className:a,...b},d)=>{let{error:e,formItemId:f}=bP();return(0,c.jsx)(g.Label,{ref:d,className:(0,N.cn)(e&&"text-destructive",a),htmlFor:f,...b})});bS.displayName="FormLabel";let bT=d.forwardRef(({...a},b)=>{let{error:d,formItemId:e,formDescriptionId:f,formMessageId:g}=bP();return(0,c.jsx)(aV.Slot,{ref:b,id:e,"aria-describedby":d?`${f} ${g}`:`${f}`,"aria-invalid":!!d,...a})});bT.displayName="FormControl",d.forwardRef(({className:a,...b},d)=>{let{formDescriptionId:e}=bP();return(0,c.jsx)("p",{ref:d,id:e,className:(0,N.cn)("text-sm text-muted-foreground",a),...b})}).displayName="FormDescription";let bU=d.forwardRef(({className:a,children:b,...d},e)=>{let{error:f,formMessageId:g}=bP(),h=f?String(f?.message):b;return h?(0,c.jsx)("p",{ref:e,id:g,className:(0,N.cn)("text-sm font-medium text-destructive",a),...d,children:h}):null});bU.displayName="FormMessage";let bV=({form:a})=>(0,c.jsx)(bO,{control:a.control,name:"reviewer_name",render:({field:a})=>(0,c.jsxs)(bR,{children:[(0,c.jsx)(bS,{className:"text-sm",children:"Reviewer Name *"}),(0,c.jsx)(bT,{children:(0,c.jsx)(f.Input,{placeholder:"Enter reviewer name",...a,value:a.value||""})}),(0,c.jsx)(bU,{})]})});var bW=a.i(24050),bX=a.i(7827),bY="Radio",[bZ,b$]=(0,u.createContextScope)(bY),[b_,b0]=bZ(bY),b1=d.forwardRef((a,b)=>{let{__scopeRadio:e,name:f,checked:g=!1,required:h,disabled:i,value:j="on",onCheck:k,form:l,...m}=a,[n,o]=d.useState(null),p=(0,t.useComposedRefs)(b,a=>o(a)),q=d.useRef(!1),r=!n||l||!!n.closest("form");return(0,c.jsxs)(b_,{scope:e,checked:g,disabled:i,children:[(0,c.jsx)(A.Primitive.button,{type:"button",role:"radio","aria-checked":g,"data-state":b5(g),"data-disabled":i?"":void 0,disabled:i,value:j,...m,ref:p,onClick:(0,v.composeEventHandlers)(a.onClick,a=>{g||k?.(),r&&(q.current=a.isPropagationStopped(),q.current||a.stopPropagation())})}),r&&(0,c.jsx)(b4,{control:n,bubbles:!q.current,name:f,value:j,checked:g,required:h,disabled:i,form:l,style:{transform:"translateX(-100%)"}})]})});b1.displayName=bY;var b2="RadioIndicator",b3=d.forwardRef((a,b)=>{let{__scopeRadio:d,forceMount:e,...f}=a,g=b0(b2,d);return(0,c.jsx)(z.Presence,{present:e||g.checked,children:(0,c.jsx)(A.Primitive.span,{"data-state":b5(g.checked),"data-disabled":g.disabled?"":void 0,...f,ref:b})})});b3.displayName=b2;var b4=a=>{let{control:b,checked:e,bubbles:f=!0,...g}=a,h=d.useRef(null),i=(0,x.usePrevious)(e),j=(0,y.useSize)(b);return d.useEffect(()=>{let a=h.current,b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(i!==e&&b){let c=new Event("click",{bubbles:f});b.call(a,e),a.dispatchEvent(c)}},[i,e,f]),(0,c.jsx)("input",{type:"radio","aria-hidden":!0,defaultChecked:e,...g,tabIndex:-1,ref:h,style:{...a.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function b5(a){return a?"checked":"unchecked"}var b6=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],b7="RadioGroup",[b8,b9]=(0,u.createContextScope)(b7,[bW.createRovingFocusGroupScope,b$]),ca=(0,bW.createRovingFocusGroupScope)(),cb=b$(),[cc,cd]=b8(b7),ce=d.forwardRef((a,b)=>{let{__scopeRadioGroup:d,name:e,defaultValue:f,value:g,required:h=!1,disabled:i=!1,orientation:j,dir:k,loop:l=!0,onValueChange:m,...n}=a,o=ca(d),p=(0,bX.useDirection)(k),[q,r]=(0,w.useControllableState)({prop:g,defaultProp:f,onChange:m});return(0,c.jsx)(cc,{scope:d,name:e,required:h,disabled:i,value:q,onValueChange:r,children:(0,c.jsx)(bW.Root,{asChild:!0,...o,orientation:j,dir:p,loop:l,children:(0,c.jsx)(A.Primitive.div,{role:"radiogroup","aria-required":h,"aria-orientation":j,"data-disabled":i?"":void 0,dir:p,...n,ref:b})})})});ce.displayName=b7;var cf="RadioGroupItem",cg=d.forwardRef((a,b)=>{let{__scopeRadioGroup:e,disabled:f,...g}=a,h=cd(cf,e),i=h.disabled||f,j=ca(e),k=cb(e),l=d.useRef(null),m=(0,t.useComposedRefs)(b,l),n=h.value===g.value,o=d.useRef(!1);return d.useEffect(()=>{let a=a=>{b6.includes(a.key)&&(o.current=!0)},b=()=>o.current=!1;return document.addEventListener("keydown",a),document.addEventListener("keyup",b),()=>{document.removeEventListener("keydown",a),document.removeEventListener("keyup",b)}},[]),(0,c.jsx)(bW.Item,{asChild:!0,...j,focusable:!i,active:n,children:(0,c.jsx)(b1,{disabled:i,required:h.required,checked:n,...k,...g,name:h.name,ref:m,onCheck:()=>h.onValueChange(g.value),onKeyDown:(0,v.composeEventHandlers)(a=>{"Enter"===a.key&&a.preventDefault()}),onFocus:(0,v.composeEventHandlers)(g.onFocus,()=>{o.current&&l.current?.click()})})})});cg.displayName=cf;var ch=d.forwardRef((a,b)=>{let{__scopeRadioGroup:d,...e}=a,f=cb(d);return(0,c.jsx)(b3,{...f,...e,ref:b})});ch.displayName="RadioGroupIndicator";var ci=a.i(65151);let cj=d.forwardRef(({className:a,...b},d)=>(0,c.jsx)(ce,{className:(0,N.cn)("grid gap-2",a),...b,ref:d}));cj.displayName=ce.displayName;let ck=d.forwardRef(({className:a,...b},d)=>(0,c.jsx)(cg,{ref:d,className:(0,N.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...b,children:(0,c.jsx)(ch,{className:"flex items-center justify-center",children:(0,c.jsx)(ci.Circle,{className:"h-2.5 w-2.5 fill-current text-current"})})}));ck.displayName=cg.displayName;let cl=({form:a})=>(0,c.jsx)(bO,{control:a.control,name:"video_option",render:({field:a})=>(0,c.jsxs)(bR,{children:[(0,c.jsx)(bS,{className:"text-sm",children:"Video Option"}),(0,c.jsx)(bT,{children:(0,c.jsxs)(cj,{onValueChange:a.onChange,value:a.value,className:"flex flex-col space-y-2",children:[(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsx)(ck,{value:"include",id:"include"}),(0,c.jsx)(g.Label,{htmlFor:"include",children:"Include video (Loom)"})]}),(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsx)(ck,{value:"exclude",id:"exclude"}),(0,c.jsx)(g.Label,{htmlFor:"exclude",children:"Do not include video (AI-generated feedback)"})]})]})}),(0,c.jsx)(bU,{})]})}),cm=({form:a})=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(bO,{control:a.control,name:"loom_video_url",render:({field:a})=>(0,c.jsxs)(bR,{children:[(0,c.jsx)(bS,{className:"text-sm",children:"Loom Video (URL or Embed Code) *"}),(0,c.jsx)(bT,{children:(0,c.jsx)(f.Input,{placeholder:"Paste Loom share URL or embed code",...a,value:a.value||""})}),(0,c.jsx)(bU,{})]})}),(0,c.jsx)(bO,{control:a.control,name:"key_strengths",render:({field:a})=>(0,c.jsxs)(bR,{children:[(0,c.jsx)(bS,{className:"text-sm",children:"Key Strengths (one per line) *"}),(0,c.jsx)(bT,{children:(0,c.jsx)(h.Textarea,{placeholder:"Enter key strengths, one per line",className:"min-h-[60px]",...a,value:a.value||""})}),(0,c.jsx)(bU,{})]})}),(0,c.jsx)(bO,{control:a.control,name:"priority_actions",render:({field:a})=>(0,c.jsxs)(bR,{children:[(0,c.jsx)(bS,{className:"text-sm",children:"Priority Actions (one per line) *"}),(0,c.jsx)(bT,{children:(0,c.jsx)(h.Textarea,{placeholder:"Enter priority actions, one per line",className:"min-h-[60px]",...a,value:a.value||""})}),(0,c.jsx)(bU,{})]})}),(0,c.jsx)(bO,{control:a.control,name:"strategic_insights",render:({field:a})=>(0,c.jsxs)(bR,{children:[(0,c.jsx)(bS,{className:"text-sm",children:"Strategic Insights (one per line) *"}),(0,c.jsx)(bT,{children:(0,c.jsx)(h.Textarea,{placeholder:"Enter strategic insights, one per line",className:"min-h-[60px]",...a,value:a.value||""})}),(0,c.jsx)(bU,{})]})})]}),cn=({form:a,audit:b})=>{let[f,g]=(0,d.useState)(!1),{toast:i}=(0,k.useToast)(),l=async()=>{g(!0);try{console.log("Generating AI feedback for:",b.client_name),console.log("Audit ID:",b.id);let{data:c,error:d}=await j.supabase.functions.invoke("generate-audit-feedback",{body:{clientName:b.client_name,auditData:b.audit_data,auditId:b.id}});if(console.log("AI feedback response:",c),console.log("AI feedback error:",d),d)throw console.error("Supabase function error:",d),Error(d.message||"Failed to generate AI feedback");if(!c?.feedback)throw Error("No feedback received from AI service");a.setValue("ai_feedback",c.feedback),i({title:"Success",description:"AI feedback generated successfully!"})}catch(a){console.error("AI feedback generation error:",a),i({title:"Error",description:a.message||"Failed to generate AI feedback. Please try again.",variant:"destructive"})}finally{g(!1)}};return(0,c.jsx)(bO,{control:a.control,name:"ai_feedback",render:({field:a})=>(0,c.jsxs)(bR,{children:[(0,c.jsx)(bS,{className:"text-sm",children:"AI-Generated Feedback *"}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(e.Button,{type:"button",variant:"outline",onClick:l,disabled:f,className:"w-full",children:f?"Generating...":"Generate AI Feedback"}),(0,c.jsx)(bT,{children:(0,c.jsx)(h.Textarea,{placeholder:"AI-generated feedback will appear here. You can edit it after generation...",className:"min-h-[120px]",...a,value:a.value||""})}),(0,c.jsx)("p",{className:"text-xs text-gray-500",children:"Tip: After generating AI feedback, you can edit the content above to customize it as needed."})]}),(0,c.jsx)(bU,{})]})})},co=({audit:a,submittingReview:b,onSubmit:f,onCancel:g})=>{let{validateForm:h}=(()=>{let{toast:a}=(0,k.useToast)();return{validateForm:b=>{if(console.log("Validating form data:",b),!b.reviewer_name?.trim())return a({title:"Validation Error",description:"Reviewer name is required",variant:"destructive"}),!1;if("include"===b.video_option){if(!b.loom_video_url?.trim())return a({title:"Validation Error",description:"Loom video URL is required when including video",variant:"destructive"}),!1;if(!b.key_strengths?.trim()||!b.priority_actions?.trim()||!b.strategic_insights?.trim())return a({title:"Validation Error",description:"Key strengths, priority actions, and strategic insights are required when including video",variant:"destructive"}),!1}else if("exclude"===b.video_option&&!b.ai_feedback?.trim())return a({title:"Validation Error",description:"AI feedback is required when excluding video. Please generate AI feedback first.",variant:"destructive"}),!1;return!0}}})(),i=function(a={}){let b=d.default.useRef(void 0),c=d.default.useRef(void 0),[e,f]=d.default.useState({isDirty:!1,isValidating:!1,isLoading:bm(a.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:a.errors||{},disabled:a.disabled||!1,defaultValues:bm(a.defaultValues)?void 0:a.defaultValues});!b.current&&(b.current={...a.formControl?a.formControl:function(a={}){let b,c={...bL,...a},d={submitCount:0,isDirty:!1,isLoading:bm(c.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:c.errors||{},disabled:c.disabled||!1},e={},f=(aY(c.defaultValues)||aY(c.values))&&a_(c.values||c.defaultValues)||{},g=c.shouldUnregister?{}:a_(f),h={action:!1,mount:!1,watch:!1},i={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},j=0,k={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},l={...k},m={array:bi(),state:bi()},n=bA(c.mode),o=bA(c.reValidateMode),p="all"===c.criteriaMode,q=async a=>{if(!c.disabled&&(k.isValid||l.isValid||a)){let a=c.resolver?bl((await u()).errors):await w(e,!0);a!==d.isValid&&m.state.next({isValid:a})}},r=(a,b)=>{!c.disabled&&(k.isValidating||k.validatingFields||l.isValidating||l.validatingFields)&&((a||Array.from(i.mount)).forEach(a=>{a&&(b?a4(d.validatingFields,a,b):bo(d.validatingFields,a))}),m.state.next({validatingFields:d.validatingFields,isValidating:!bl(d.validatingFields)}))},s=(a,b,c,d)=>{let i=a2(e,a);if(i){let e=a2(g,a,a1(c)?a2(f,a):c);a1(e)||d&&d.defaultChecked||b?a4(g,a,b?e:by(i._f)):z(a,e),h.mount&&q()}},t=(a,b,e,g,h)=>{let i=!1,j=!1,n={name:a};if(!c.disabled){if(!e||g){(k.isDirty||l.isDirty)&&(j=d.isDirty,d.isDirty=n.isDirty=x(),i=j!==n.isDirty);let c=bk(a2(f,a),b);j=!!a2(d.dirtyFields,a),c?bo(d.dirtyFields,a):a4(d.dirtyFields,a,!0),n.dirtyFields=d.dirtyFields,i=i||(k.dirtyFields||l.dirtyFields)&&!c!==j}if(e){let b=a2(d.touchedFields,a);b||(a4(d.touchedFields,a,e),n.touchedFields=d.touchedFields,i=i||(k.touchedFields||l.touchedFields)&&b!==e)}i&&h&&m.state.next(n)}return i?n:{}},u=async a=>{r(a,!0);let b=await c.resolver(g,c.context,((a,b,c,d)=>{let e={};for(let c of a){let a=a2(b,c);a&&a4(e,c,a._f)}return{criteriaMode:c,names:[...a],fields:e,shouldUseNativeValidation:d}})(a||i.mount,e,c.criteriaMode,c.shouldUseNativeValidation));return r(a),b},v=async a=>{let{errors:b}=await u(a);if(a)for(let c of a){let a=a2(b,c);a?a4(d.errors,c,a):bo(d.errors,c)}else d.errors=b;return b},w=async(a,b,e={valid:!0})=>{for(let f in a){let h=a[f];if(h){let{_f:a,...j}=h;if(a){let j=i.array.has(a.name),l=h._f&&bC(h._f);l&&k.validatingFields&&r([f],!0);let m=await bK(h,i.disabled,g,p,c.shouldUseNativeValidation&&!b,j);if(l&&k.validatingFields&&r([f]),m[a.name]&&(e.valid=!1,b))break;b||(a2(m,a.name)?j?bG(d.errors,m,a.name):a4(d.errors,a.name,m[a.name]):bo(d.errors,a.name))}bl(j)||await w(j,b,e)}}return e.valid},x=(a,b)=>!c.disabled&&(a&&b&&a4(g,a,b),!bk(F(),f)),y=(a,b,c)=>be(a,i,{...h.mount?g:a1(b)?f:"string"==typeof a?{[a]:b}:b},c,b),z=(a,b,c={})=>{let d=a2(e,a),f=b;if(d){let c=d._f;c&&(c.disabled||a4(g,a,bv(b,c)),c.ref,f=b,"select-multiple"===c.ref.type?[...c.ref.options].forEach(a=>a.selected=f.includes(a.value)):c.refs?"checkbox"===c.ref.type?c.refs.length>1?c.refs.forEach(a=>(!a.defaultChecked||!a.disabled)&&(a.checked=Array.isArray(f)?!!f.find(b=>b===a.value):f===a.value)):c.refs[0]&&(c.refs[0].checked=!!f):c.refs.forEach(a=>a.checked=a.value===f):"file"===c.ref.type?c.ref.value="":(c.ref.value=f,c.ref.type||m.state.next({name:a,values:a_(g)})))}(c.shouldDirty||c.shouldTouch)&&t(a,f,c.shouldTouch,c.shouldDirty,!0),c.shouldValidate&&E(a)},A=(a,b,c)=>{for(let d in b){let f=b[d],g=`${a}.${d}`,h=a2(e,g);(i.array.has(a)||aY(f)||h&&!h._f)&&!aW(f)?A(g,f,c):z(g,f,c)}},B=(a,b,c={})=>{let j=a2(e,a),n=i.array.has(a),o=a_(b);a4(g,a,o),n?(m.array.next({name:a,values:a_(g)}),(k.isDirty||k.dirtyFields||l.isDirty||l.dirtyFields)&&c.shouldDirty&&m.state.next({name:a,dirtyFields:br(f,g),isDirty:x(a,o)})):!j||j._f||aX(o)?z(a,o,c):A(a,o,c),bD(a,i)&&m.state.next({...d}),m.state.next({name:h.mount?a:void 0,values:a_(g)})},C=async a=>{h.mount=!0;let f=a.target,s=f.name,v=!0,x=a2(e,s),y=a=>{v=Number.isNaN(a)||aW(a)&&isNaN(a.getTime())||bk(a,a2(g,s,a))};if(x){var z,A,B,C,D;let h,I,J,K=f.type?by(x._f):aZ(a),L=a.type===a5||"focusout"===a.type,M=!((J=x._f).mount&&(J.required||J.min||J.max||J.maxLength||J.minLength||J.pattern||J.validate))&&!c.resolver&&!a2(d.errors,s)&&!x._f.deps||(z=L,A=a2(d.touchedFields,s),B=d.isSubmitted,C=o,!(D=n).isOnAll&&(!B&&D.isOnTouch?!(A||z):(B?C.isOnBlur:D.isOnBlur)?!z:(B?!C.isOnChange:!D.isOnChange)||z)),N=bD(s,i,L);a4(g,s,K),L?(x._f.onBlur&&x._f.onBlur(a),b&&b(0)):x._f.onChange&&x._f.onChange(a);let O=t(s,K,L),P=!bl(O)||N;if(L||m.state.next({name:s,type:a.type,values:a_(g)}),M)return(k.isValid||l.isValid)&&("onBlur"===c.mode?L&&q():L||q()),P&&m.state.next({name:s,...N?{}:O});if(!L&&N&&m.state.next({...d}),c.resolver){let{errors:a}=await u([s]);if(y(K),v){let b=bF(d.errors,e,s),c=bF(a,e,b.name||s);h=c.error,s=c.name,I=bl(a)}}else r([s],!0),h=(await bK(x,i.disabled,g,p,c.shouldUseNativeValidation))[s],r([s]),y(K),v&&(h?I=!1:(k.isValid||l.isValid)&&(I=await w(e,!0)));if(v){x._f.deps&&E(x._f.deps);var F=s,G=I,H=h;let a=a2(d.errors,F),e=(k.isValid||l.isValid)&&"boolean"==typeof G&&d.isValid!==G;if(c.delayError&&H){let a;a=()=>{a4(d.errors,F,H),m.state.next({errors:d.errors})},(b=b=>{clearTimeout(j),j=setTimeout(a,b)})(c.delayError)}else clearTimeout(j),b=null,H?a4(d.errors,F,H):bo(d.errors,F);if((H?!bk(a,H):a)||!bl(O)||e){let a={...O,...e&&"boolean"==typeof G?{isValid:G}:{},errors:d.errors,name:F};d={...d,...a},m.state.next(a)}}}},D=(a,b)=>{if(a2(d.errors,b)&&a.focus)return a.focus(),1},E=async(a,b={})=>{let f,g,h=bh(a);if(c.resolver){let b=await v(a1(a)?a:h);f=bl(b),g=a?!h.some(a=>a2(b,a)):f}else a?((g=(await Promise.all(h.map(async a=>{let b=a2(e,a);return await w(b&&b._f?{[a]:b}:b)}))).every(Boolean))||d.isValid)&&q():g=f=await w(e);return m.state.next({..."string"!=typeof a||(k.isValid||l.isValid)&&f!==d.isValid?{}:{name:a},...c.resolver||!a?{isValid:f}:{},errors:d.errors}),b.shouldFocus&&!g&&bE(e,D,a?h:i.mount),g},F=a=>{let b={...h.mount?g:f};return a1(a)?b:"string"==typeof a?a2(b,a):a.map(a=>a2(b,a))},G=(a,b)=>({invalid:!!a2((b||d).errors,a),isDirty:!!a2((b||d).dirtyFields,a),error:a2((b||d).errors,a),isValidating:!!a2(d.validatingFields,a),isTouched:!!a2((b||d).touchedFields,a)}),H=(a,b,c)=>{let f=(a2(e,a,{_f:{}})._f||{}).ref,{ref:g,message:h,type:i,...j}=a2(d.errors,a)||{};a4(d.errors,a,{...j,...b,ref:f}),m.state.next({name:a,errors:d.errors,isValid:!1}),c&&c.shouldFocus&&f&&f.focus&&f.focus()},I=a=>m.state.subscribe({next:b=>{let c,e,f;c=a.name,e=b.name,f=a.exact,(!c||!e||c===e||bh(c).some(a=>a&&(f?a===e:a.startsWith(e)||e.startsWith(a))))&&((a,b,c,d)=>{c(a);let{name:e,...f}=a;return bl(f)||Object.keys(f).length>=Object.keys(b).length||Object.keys(f).find(a=>b[a]===(!d||"all"))})(b,a.formState||k,Q,a.reRenderRoot)&&a.callback({values:{...g},...d,...b})}}).unsubscribe,J=(a,b={})=>{for(let h of a?bh(a):i.mount)i.mount.delete(h),i.array.delete(h),b.keepValue||(bo(e,h),bo(g,h)),b.keepError||bo(d.errors,h),b.keepDirty||bo(d.dirtyFields,h),b.keepTouched||bo(d.touchedFields,h),b.keepIsValidating||bo(d.validatingFields,h),c.shouldUnregister||b.keepDefaultValue||bo(f,h);m.state.next({values:a_(g)}),m.state.next({...d,...!b.keepDirty?{}:{isDirty:x()}}),b.keepIsValid||q()},K=({disabled:a,name:b})=>{("boolean"==typeof a&&h.mount||a||i.disabled.has(b))&&(a?i.disabled.add(b):i.disabled.delete(b))},L=(a,b={})=>{let d=a2(e,a),g="boolean"==typeof b.disabled||"boolean"==typeof c.disabled;return(a4(e,a,{...d||{},_f:{...d&&d._f?d._f:{ref:{name:a}},name:a,mount:!0,...b}}),i.mount.add(a),d)?K({disabled:"boolean"==typeof b.disabled?b.disabled:c.disabled,name:a}):s(a,!0,b.value),{...g?{disabled:b.disabled||c.disabled}:{},...c.progressive?{required:!!b.required,min:bz(b.min),max:bz(b.max),minLength:bz(b.minLength),maxLength:bz(b.maxLength),pattern:bz(b.pattern)}:{},name:a,onChange:C,onBlur:C,ref:g=>{if(g){let c;L(a,b),d=a2(e,a);let h=a1(g.value)&&g.querySelectorAll&&g.querySelectorAll("input,select,textarea")[0]||g,i="radio"===(c=h).type||"checkbox"===c.type,j=d._f.refs||[];(i?j.find(a=>a===h):h===d._f.ref)||(a4(e,a,{_f:{...d._f,...i?{refs:[...j.filter(bn),h,...Array.isArray(a2(f,a))?[{}]:[]],ref:{type:h.type,name:a}}:{ref:h}}}),s(a,!1,void 0,h))}else(d=a2(e,a,{}))._f&&(d._f.mount=!1),(c.shouldUnregister||b.shouldUnregister)&&!(a$(i.array,a)&&h.action)&&i.unMount.add(a)}}},M=()=>c.shouldFocusError&&bE(e,D,i.mount),N=(a,b)=>async f=>{let h;f&&(f.preventDefault&&f.preventDefault(),f.persist&&f.persist());let j=a_(g);if(m.state.next({isSubmitting:!0}),c.resolver){let{errors:a,values:b}=await u();d.errors=a,j=b}else await w(e);if(i.disabled.size)for(let a of i.disabled)a4(j,a,void 0);if(bo(d.errors,"root"),bl(d.errors)){m.state.next({errors:{}});try{await a(j,f)}catch(a){h=a}}else b&&await b({...d.errors},f),M(),setTimeout(M);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:bl(d.errors)&&!h,submitCount:d.submitCount+1,errors:d.errors}),h)throw h},O=(a,b={})=>{let e=a?a_(a):f,j=a_(e),l=bl(a),n=l?f:j;if(b.keepDefaultValues||(f=e),!b.keepValues){if(b.keepDirtyValues)for(let a of Array.from(new Set([...i.mount,...Object.keys(br(f,g))])))a2(d.dirtyFields,a)?a4(n,a,a2(g,a)):B(a,a2(n,a));else for(let a of i.mount)B(a,a2(n,a));g=a_(n),m.array.next({values:{...n}}),m.state.next({values:{...n}})}i={mount:b.keepDirtyValues?i.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},h.mount=!k.isValid||!!b.keepIsValid||!!b.keepDirtyValues,h.watch=!!c.shouldUnregister,m.state.next({submitCount:b.keepSubmitCount?d.submitCount:0,isDirty:!l&&(b.keepDirty?d.isDirty:!!(b.keepDefaultValues&&!bk(a,f))),isSubmitted:!!b.keepIsSubmitted&&d.isSubmitted,dirtyFields:l?{}:b.keepDirtyValues?b.keepDefaultValues&&g?br(f,g):d.dirtyFields:b.keepDefaultValues&&a?br(f,a):b.keepDirty?d.dirtyFields:{},touchedFields:b.keepTouched?d.touchedFields:{},errors:b.keepErrors?d.errors:{},isSubmitSuccessful:!!b.keepIsSubmitSuccessful&&d.isSubmitSuccessful,isSubmitting:!1})},P=(a,b)=>O(bm(a)?a(g):a,b),Q=a=>{d={...d,...a}},R={control:{register:L,unregister:J,getFieldState:G,handleSubmit:N,setError:H,_subscribe:I,_runSchema:u,_getWatch:y,_getDirty:x,_setValid:q,_setFieldArray:(a,b=[],i,j,n=!0,o=!0)=>{if(j&&i&&!c.disabled){if(h.action=!0,o&&Array.isArray(a2(e,a))){let b=i(a2(e,a),j.argA,j.argB);n&&a4(e,a,b)}if(o&&Array.isArray(a2(d.errors,a))){let b,c=i(a2(d.errors,a),j.argA,j.argB);n&&a4(d.errors,a,c),a0(a2(b=d.errors,a)).length||bo(b,a)}if((k.touchedFields||l.touchedFields)&&o&&Array.isArray(a2(d.touchedFields,a))){let b=i(a2(d.touchedFields,a),j.argA,j.argB);n&&a4(d.touchedFields,a,b)}(k.dirtyFields||l.dirtyFields)&&(d.dirtyFields=br(f,g)),m.state.next({name:a,isDirty:x(a,b),dirtyFields:d.dirtyFields,errors:d.errors,isValid:d.isValid})}else a4(g,a,b)},_setDisabledField:K,_setErrors:a=>{d.errors=a,m.state.next({errors:d.errors,isValid:!1})},_getFieldArray:a=>a0(a2(h.mount?g:f,a,c.shouldUnregister?a2(f,a,[]):[])),_reset:O,_resetDefaultValues:()=>bm(c.defaultValues)&&c.defaultValues().then(a=>{P(a,c.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:()=>{for(let a of i.unMount){let b=a2(e,a);b&&(b._f.refs?b._f.refs.every(a=>!bn(a)):!bn(b._f.ref))&&J(a)}i.unMount=new Set},_disableForm:a=>{"boolean"==typeof a&&(m.state.next({disabled:a}),bE(e,(b,c)=>{let d=a2(e,c);d&&(b.disabled=d._f.disabled||a,Array.isArray(d._f.refs)&&d._f.refs.forEach(b=>{b.disabled=d._f.disabled||a}))},0,!1))},_subjects:m,_proxyFormState:k,get _fields(){return e},get _formValues(){return g},get _state(){return h},set _state(value){h=value},get _defaultValues(){return f},get _names(){return i},set _names(value){i=value},get _formState(){return d},get _options(){return c},set _options(value){c={...c,...value}}},subscribe:a=>(h.mount=!0,l={...l,...a.formState},I({...a,formState:l})),trigger:E,register:L,handleSubmit:N,watch:(a,b)=>bm(a)?m.state.subscribe({next:c=>a(y(void 0,b),c)}):y(a,b,!0),setValue:B,getValues:F,reset:P,resetField:(a,b={})=>{a2(e,a)&&(a1(b.defaultValue)?B(a,a_(a2(f,a))):(B(a,b.defaultValue),a4(f,a,a_(b.defaultValue))),b.keepTouched||bo(d.touchedFields,a),b.keepDirty||(bo(d.dirtyFields,a),d.isDirty=b.defaultValue?x(a,a_(a2(f,a))):x()),!b.keepError&&(bo(d.errors,a),k.isValid&&q()),m.state.next({...d}))},clearErrors:a=>{a&&bh(a).forEach(a=>bo(d.errors,a)),m.state.next({errors:a?d.errors:{}})},unregister:J,setError:H,setFocus:(a,b={})=>{let c=a2(e,a),d=c&&c._f;if(d){let a=d.refs?d.refs[0]:d.ref;a.focus&&(a.focus(),b.shouldSelect&&bm(a.select)&&a.select())}},getFieldState:G};return{...R,formControl:R}}(a),formState:e},a.formControl&&a.defaultValues&&!bm(a.defaultValues)&&a.formControl.reset(a.defaultValues,a.resetOptions));let g=b.current.control;return g._options=a,d.default.useLayoutEffect(()=>g._subscribe({formState:g._proxyFormState,callback:()=>f({...g._formState}),reRenderRoot:!0}),[g]),d.default.useEffect(()=>g._disableForm(a.disabled),[g,a.disabled]),d.default.useEffect(()=>{if(g._proxyFormState.isDirty){let a=g._getDirty();a!==e.isDirty&&g._subjects.state.next({isDirty:a})}},[g,e.isDirty]),d.default.useEffect(()=>{a.values&&!bk(a.values,c.current)?(g._reset(a.values,g._options.resetOptions),c.current=a.values,f(a=>({...a}))):g._resetDefaultValues()},[a.values,g]),d.default.useEffect(()=>{a.errors&&!bl(a.errors)&&g._setErrors(a.errors)},[a.errors,g]),d.default.useEffect(()=>{g._state.mount||(g._setValid(),g._state.mount=!0),g._state.watch&&(g._state.watch=!1,g._subjects.state.next({...g._formState})),g._removeUnmounted()}),d.default.useEffect(()=>{a.shouldUnregister&&g._subjects.state.next({values:g._getWatch()})},[a.shouldUnregister,g]),b.current.formState=bd(e,g),b.current}({defaultValues:{reviewer_name:a.reviewer_name||"",video_option:a.loom_video_url?"include":"exclude",loom_video_url:a.loom_video_url||"",key_strengths:a.key_strengths?.join("\n")||"",priority_actions:a.priority_actions?.join("\n")||"",strategic_insights:a.strategic_insights?.join("\n")||"",ai_feedback:a.ai_feedback||""},mode:"onChange"}),j=i.watch("video_option");return(0,d.useEffect)(()=>{i.reset({reviewer_name:a.reviewer_name||"",video_option:a.loom_video_url?"include":"exclude",loom_video_url:a.loom_video_url||"",key_strengths:a.key_strengths?.join("\n")||"",priority_actions:a.priority_actions?.join("\n")||"",strategic_insights:a.strategic_insights?.join("\n")||"",ai_feedback:a.ai_feedback||""})},[a.id,i]),(0,c.jsxs)("div",{className:"mt-4 p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,c.jsx)("h4",{className:"font-semibold text-sm text-yellow-800",children:"completed"===a.review_status?"Edit Review":"Complete Review"}),"completed"===a.review_status&&(0,c.jsx)(e.Button,{size:"sm",variant:"outline",onClick:()=>{i.reset(),g()},type:"button",children:"Cancel"})]}),(0,c.jsx)(bM,{...i,children:(0,c.jsxs)("form",{onSubmit:i.handleSubmit(b=>{console.log("Form submission data:",b),h(b)&&f(a.id,b)}),className:"space-y-4",children:[(0,c.jsx)(bV,{form:i}),(0,c.jsx)(cl,{form:i}),"include"===j&&(0,c.jsx)(cm,{form:i}),"exclude"===j&&(0,c.jsx)(cn,{form:i,audit:a}),(0,c.jsx)(e.Button,{type:"submit",className:"w-full",disabled:b===a.id,children:b===a.id?"Submitting...":"completed"===a.review_status?"Update Review":"Submit Review"})]})})]})},cp=({audit:a,isSelected:b,editingAudit:d,submittingReview:f,onSelectAudit:g,onEditAudit:h,onCopyAuditCode:i,onViewAudit:j,onCopyShareUrl:k,onDeleteAudit:l,onSubmitReview:m,onCancelEdit:n})=>(0,c.jsxs)("div",{className:"border rounded-lg bg-gray-50",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,c.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,c.jsx)(O,{checked:b,onCheckedChange:b=>g(a.id,!!b)}),(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)("h3",{className:"font-semibold text-lg",children:a.client_name}),(0,c.jsxs)("p",{className:"text-sm text-gray-600",children:["Created: ",new Date(a.created_at).toLocaleDateString()]}),(0,c.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Slug: ",a.share_url_slug]}),a.audit_code&&(0,c.jsxs)("p",{className:"text-xs text-blue-600 mt-1 font-mono",children:["Code: ",a.audit_code]})]})]}),(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsx)(aA.Badge,{variant:"completed"===a.review_status?"default":"secondary",className:"completed"===a.review_status?"bg-green-100 text-green-800 hover:bg-green-200":"",children:"completed"===a.review_status?"Completed":"Pending"}),"completed"===a.review_status&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(aF.CheckCircle2,{className:"w-4 h-4 text-green-500"}),(0,c.jsx)(e.Button,{size:"sm",variant:"outline",onClick:()=>h(a.id),children:(0,c.jsx)(aP.Edit,{className:"w-4 h-4"})})]}),a.audit_code&&(0,c.jsx)(e.Button,{size:"sm",variant:"outline",onClick:()=>i(a.audit_code,a.client_name),title:"Copy Audit Code",children:(0,c.jsx)(aQ,{className:"w-4 h-4"})}),(0,c.jsx)(e.Button,{size:"sm",variant:"outline",onClick:()=>j(a.share_url_slug),children:(0,c.jsx)(aN.Eye,{className:"w-4 h-4"})}),(0,c.jsx)(e.Button,{size:"sm",variant:"outline",onClick:()=>k(a.share_url_slug),children:(0,c.jsx)(aM,{className:"w-4 h-4"})}),(0,c.jsx)(e.Button,{size:"sm",variant:"destructive",onClick:()=>l(a.id,a.client_name),children:(0,c.jsx)(aO.Trash2,{className:"w-4 h-4"})})]})]}),("pending"===a.review_status||d===a.id)&&(0,c.jsx)(co,{audit:a,submittingReview:f,onSubmit:m,onCancel:n})]}),cq=({editingAudit:a,submittingReview:b,filteredAudits:d,selectedAudits:e,onSelectAudit:f,onEditAudit:g,onCopyAuditCode:h,onViewAudit:i,onCopyShareUrl:j,onDeleteAudit:k,onSubmitReview:l,onCancelEdit:m})=>a?(0,c.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,c.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto relative",children:[(0,c.jsx)("button",{onClick:m,className:"absolute top-4 right-4 z-10 p-2 hover:bg-gray-100 rounded-full transition-colors",type:"button",children:(0,c.jsx)(aE.X,{className:"w-5 h-5 text-gray-500"})}),d.filter(b=>b.id===a).map(d=>(0,c.jsx)(cp,{audit:d,isSelected:e.has(d.id),editingAudit:a,submittingReview:b,onSelectAudit:f,onEditAudit:g,onCopyAuditCode:h,onViewAudit:i,onCopyShareUrl:j,onDeleteAudit:k,onSubmitReview:l,onCancelEdit:m},d.id))]})}):null,cr=async a=>{try{console.log("Starting HTML snapshot capture for audit:",a);let b=document.querySelector("[data-audit-container]");if(!b)throw Error("Audit container not found for HTML snapshot");let c=b.cloneNode(!0);await cs(c);let d=ct(c);return console.log("HTML snapshot captured successfully, size:",d.length),d}catch(a){throw console.error("Error capturing HTML snapshot:",a),a}},cs=async a=>{for(let b of[a,...a.querySelectorAll("*")])try{let a=window.getComputedStyle(b),c=[];for(let b of["display","position","top","left","right","bottom","width","height","margin","padding","border","background","color","font-family","font-size","font-weight","text-align","line-height","opacity","visibility","z-index","transform","box-shadow","border-radius","flex","grid","align-items","justify-content"]){let d=a.getPropertyValue(b);d&&"initial"!==d&&"normal"!==d&&c.push(`${b}: ${d}`)}c.length>0&&(b.style.cssText=c.join("; "))}catch(a){console.warn("Could not inline styles for element:",b,a)}},ct=a=>`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Locked Audit Report</title>
  <style>
    /* Reset and base styles */
    * { box-sizing: border-box; }
    body { 
      margin: 0; 
      padding: 0; 
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", sans-serif;
      background: #f8fafc;
    }
    .locked-audit-notice {
      background: #f3f4f6;
      border: 1px solid #d1d5db;
      padding: 12px;
      margin: 16px;
      border-radius: 8px;
      text-align: center;
      color: #374151;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="locked-audit-notice">
    ðŸ”’ This is a locked audit report, captured and preserved as it appeared at the time of locking.
  </div>
  ${a.outerHTML}
</body>
</html>`,cu=async a=>{try{console.log("Starting complete lock process with HTML snapshot for audit:",a);let b=await cr(a),{data:c,error:d}=await j.supabase.from("audit_reports").select("*").eq("id",a).single();if(d)throw d;let e=new Date,f={id:c.id,client_name:c.client_name,share_url_slug:c.share_url_slug,audit_code:c.audit_code,created_at:c.created_at,status:c.status,reviewer_name:c.reviewer_name,loom_video_url:c.loom_video_url,key_strengths:c.key_strengths,priority_actions:c.priority_actions,strategic_insights:c.strategic_insights,review_status:c.review_status,audit_data:c.audit_data,ai_feedback:c.ai_feedback,snapshot_created_at:e.toISOString(),snapshot_version:"2.0.0",header_template:{title:"ðŸ” Free LLM Visibility Miniâ€‘Audit ðŸ”¥ âœ¨",display_date:e.toLocaleDateString(),display_time:e.toLocaleTimeString(),locked_at:e.toISOString()},ui_template:{show_live_insights_badge:!1,show_time_badge:!0}},{error:g}=await j.supabase.from("audit_reports").update({is_locked:!0,html_snapshot:b,snapshot_data:f,snapshot_generated_at:e.toISOString(),snapshot_version:"2.0.0"}).eq("id",a);if(g)throw g;console.log("Successfully locked audit with complete HTML snapshot")}catch(a){throw console.error("Error locking audit with snapshot:",a),a}},cv=async a=>{try{let b=new Date,c=b.toLocaleDateString(),d=b.toLocaleTimeString(),e={id:a.id,client_name:a.client_name,share_url_slug:a.share_url_slug,audit_code:a.audit_code,created_at:a.created_at,status:a.status,reviewer_name:a.reviewer_name,loom_video_url:a.loom_video_url,key_strengths:a.key_strengths,priority_actions:a.priority_actions,strategic_insights:a.strategic_insights,review_status:a.review_status,audit_data:a.audit_data,ai_feedback:a.ai_feedback,snapshot_created_at:new Date().toISOString(),snapshot_version:"v4",header_template:{title:"ðŸ” Free LLM Visibility Miniâ€‘Audit ðŸ”¥ âœ¨",display_date:c,display_time:d,locked_at:b.toISOString()},ui_template:{show_live_insights_badge:!1,show_time_badge:!0}};return console.log("Generated comprehensive snapshot with version v4:",{client_name:e.client_name,snapshot_version:e.snapshot_version,display_time:d,locked_at:e.header_template.locked_at}),e}catch(a){throw console.error("Error generating audit snapshot:",a),a}},cw=async a=>{try{console.log("Starting enhanced lock process with version v4 for audit:",a);try{await cu(a),console.log("Successfully locked audit with complete HTML snapshot");return}catch(a){console.log("HTML snapshot failed, falling back to versioned JSON snapshot...")}let{data:b,error:c}=await j.supabase.from("audit_reports").select("*").eq("id",a).single();if(c)throw c;let d=await cv(b),{error:e}=await j.supabase.from("audit_reports").update({is_locked:!0,snapshot_data:d,snapshot_generated_at:new Date().toISOString(),snapshot_version:"v4"}).eq("id",a);if(e)throw e;console.log("Successfully locked audit with v4 JSON snapshot")}catch(a){throw console.error("Error locking audit:",a),a}},cx=async a=>{try{console.log("Unlocking audit:",a);let{error:b}=await j.supabase.from("audit_reports").update({is_locked:!1,snapshot_data:null,snapshot_generated_at:null,snapshot_version:null,html_snapshot:null}).eq("id",a);if(b)throw b;console.log("Successfully unlocked audit - will now use live templates")}catch(a){throw console.error("Error unlocking audit:",a),a}},cy=async a=>{try{for(let b of(console.log("Bulk locking audits with version v4:",a.length),a))await cw(b);console.log("Successfully bulk locked all audits with v4 snapshots")}catch(a){throw console.error("Error bulk locking audits:",a),a}},cz=async a=>{try{console.log("Bulk unlocking audits:",a.length);let{error:b}=await j.supabase.from("audit_reports").update({is_locked:!1,snapshot_data:null,snapshot_generated_at:null,snapshot_version:null,html_snapshot:null}).in("id",a);if(b)throw b;console.log("Successfully bulk unlocked audits - they will use live templates")}catch(a){throw console.error("Error bulk unlocking audits:",a),a}};a.s(["AuditDashboard",0,({refreshTrigger:a})=>{let{audits:b,loading:e,selectedAudits:f,showArchived:g,setShowArchived:h,copyShareUrl:l,viewAudit:m,deleteAudit:n,archiveAudits:o,restoreAudits:q,handleSelectAudit:r,handleSelectAll:s,copyAuditCode:t,fetchAudits:u,editingAudit:v,setEditingAudit:w,toggleAuditLock:x,bulkLockSelected:y,bulkUnlockSelected:z}=(a=>{let[b,c]=(0,d.useState)([]),[e,f]=(0,d.useState)(!0),[g,h]=(0,d.useState)(null),[i,l]=(0,d.useState)(new Set),[m,n]=(0,d.useState)(!1),{toast:o}=(0,k.useToast)(),p=async()=>{try{let{data:a,error:b}=await j.supabase.from("audit_reports").select("id, client_name, share_url_slug, audit_code, created_at, status, reviewer_name, loom_video_url, key_strengths, priority_actions, strategic_insights, review_status, audit_data, ai_feedback, is_locked, snapshot_data, snapshot_generated_at, snapshot_version").order("created_at",{ascending:!1});if(b)throw b;let{data:d,error:e}=await j.supabase.from("user_audit_codes").select("audit_report_id, user_id, created_at");if(e)throw e;let f=[...new Set((d||[]).map(a=>a.user_id))],{data:g,error:h}=await j.supabase.from("profiles").select("id, email, full_name").in("id",f);if(h)throw h;let i=(a||[]).map(a=>{let b=(d||[]).filter(b=>b.audit_report_id===a.id).map(a=>({...a,profiles:(g||[]).find(b=>b.id===a.user_id)||null}));return{...a,user_audit_codes:b}});c(i)}catch(a){console.error("Error fetching audits:",a),o({title:"Error",description:"Failed to fetch audit reports",variant:"destructive"})}finally{f(!1)}};(0,d.useEffect)(()=>{p()},[a]);let q=async(a,b)=>{try{if(b){if(!confirm("Unlocking this audit will cause it to re-render using the latest templates. Any previous snapshot will be lost. Are you sure you want to unlock it?"))return;await cx(a),o({title:"Success",description:"Audit unlocked successfully"})}else await cw(a),o({title:"Success",description:"Audit locked and snapshot generated"});p()}catch(a){o({title:"Error",description:`Failed to ${b?"unlock":"lock"} audit`,variant:"destructive"})}},r=async()=>{let a=Array.from(i);try{await cy(a),o({title:"Success",description:`${a.length} audit(s) locked successfully`}),l(new Set),p()}catch(a){o({title:"Error",description:"Failed to lock selected audits",variant:"destructive"})}},s=async()=>{if(!confirm("Unlocking these audits will cause them to re-render using the latest templates. Any previous snapshots will be lost. Are you sure?"))return;let a=Array.from(i);try{await cz(a),o({title:"Success",description:`${a.length} audit(s) unlocked successfully`}),l(new Set),p()}catch(a){o({title:"Error",description:"Failed to unlock selected audits",variant:"destructive"})}};return{audits:b,loading:e,editingAudit:g,setEditingAudit:h,selectedAudits:i,showArchived:m,setShowArchived:n,copyShareUrl:a=>{let b=`${window.location.origin}/audit/${a}`;navigator.clipboard.writeText(b),o({title:"Success",description:"Share URL copied to clipboard!"})},viewAudit:a=>{window.open(`/audit/${a}`,"_blank")},deleteAudit:async(a,b)=>{if(confirm(`Are you sure you want to delete the audit for ${b}?`))try{let{error:c}=await j.supabase.from("audit_reports").delete().eq("id",a);if(c)throw c;o({title:"Success",description:`Audit for ${b} deleted successfully`}),p()}catch(a){o({title:"Error",description:"Failed to delete audit report",variant:"destructive"})}},archiveAudits:async a=>{try{let{error:b}=await j.supabase.from("audit_reports").update({status:"archived"}).in("id",a);if(b)throw b;o({title:"Success",description:`${a.length} audit(s) archived successfully`}),l(new Set),p()}catch(a){o({title:"Error",description:"Failed to archive audits",variant:"destructive"})}},restoreAudits:async a=>{try{let{error:b}=await j.supabase.from("audit_reports").update({status:"active"}).in("id",a);if(b)throw b;o({title:"Success",description:`${a.length} audit(s) restored successfully`}),l(new Set),p()}catch(a){o({title:"Error",description:"Failed to restore audits",variant:"destructive"})}},handleSelectAudit:(a,b)=>{let c=new Set(i);b?c.add(a):c.delete(a),l(c)},handleSelectAll:a=>{let c=b.filter(a=>m?"archived"===a.status:"archived"!==a.status);a?l(new Set(c.map(a=>a.id))):l(new Set)},copyAuditCode:(a,b)=>{navigator.clipboard.writeText(a),o({title:"Success",description:`Audit code for ${b} copied to clipboard!`})},fetchAudits:p,toggleAuditLock:q,bulkLockSelected:r,bulkUnlockSelected:s}})(a),{submittingReview:A,submitReview:B}=(a=>{let[b,c]=(0,d.useState)(null),{toast:e}=(0,k.useToast)();return{submittingReview:b,submitReview:async(b,d)=>{c(b);try{let c={reviewer_name:d.reviewer_name,review_status:"completed"};if("include"===d.video_option){let a=(a=>{if(a.includes("/embed/"))return a;let b=a.match(/loom\.com\/share\/([a-zA-Z0-9]+)/);if(b)return`https://www.loom.com/embed/${b[1]}`;let c=a.match(/src="([^"]*loom\.com\/embed\/[^"]*)"/);return c?c[1]:a})(d.loom_video_url);c={...c,loom_video_url:a,key_strengths:d.key_strengths.split("\n").filter(a=>a.trim()),priority_actions:d.priority_actions.split("\n").filter(a=>a.trim()),strategic_insights:d.strategic_insights.split("\n").filter(a=>a.trim()),ai_feedback:null}}else c={...c,loom_video_url:null,key_strengths:null,priority_actions:null,strategic_insights:null,ai_feedback:d.ai_feedback};let{error:f}=await j.supabase.from("audit_reports").update(c).eq("id",b);if(f)throw f;e({title:"Success",description:"Review submitted successfully!"}),a()}catch(a){e({title:"Error",description:"Failed to submit review",variant:"destructive"})}finally{c(null)}}}})(u),C=a=>{w(a)};if(e)return(0,c.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,c.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,c.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading audit reports..."})]});let D=b.filter(a=>g?"archived"===a.status:"archived"!==a.status),E=b.filter(a=>"archived"!==a.status).length,F=b.filter(a=>"archived"===a.status).length,G=b.filter(a=>"completed"===a.review_status).length,H=b.filter(a=>"pending"===a.review_status).length;return(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsx)(p,{totalAudits:b.length,completedCount:G,pendingCount:H,activeCount:E}),(0,c.jsxs)(i.Card,{className:"shadow-lg border-0 bg-gradient-to-r from-white to-gray-50",children:[(0,c.jsx)(T,{showArchived:g,activeCount:E,archivedCount:F,selectedAudits:f,totalCount:D.length,onToggleArchived:h,onSelectAll:s,onBulkArchive:()=>o(Array.from(f)),onBulkRestore:()=>q(Array.from(f)),onBulkLock:y,onBulkUnlock:z}),(0,c.jsx)("div",{className:"p-0",children:(0,c.jsx)(aU,{audits:D,selectedAudits:f,onSelectAudit:r,onSelectAll:s,onCopyAuditCode:t,onViewAudit:m,onCopyShareUrl:l,onDeleteAudit:n,onEditAudit:C,onToggleLock:x})})]}),(0,c.jsx)(cq,{editingAudit:v,submittingReview:A,filteredAudits:D,selectedAudits:f,onSelectAudit:r,onEditAudit:C,onCopyAuditCode:t,onViewAudit:m,onCopyShareUrl:l,onDeleteAudit:n,onSubmitReview:B,onCancelEdit:()=>{w(null)}})]})}],83531)}];

//# sourceMappingURL=components_admin_AdminAuditForm_tsx_d6443bf2._.js.map