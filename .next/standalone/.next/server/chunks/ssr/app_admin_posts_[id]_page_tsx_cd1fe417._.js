module.exports=[11255,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(41130),f=a.i(59476),g=a.i(82043),h=a.i(14727),i=a.i(40695),j=a.i(70106);let k=(0,j.default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var l=a.i(77156),m=a.i(52495);let n=({isEditing:a,saving:c,onPreview:d,onSaveDraft:e,onPublish:f,onCancel:g})=>(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:a?"Edit Post":"New Post"}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsxs)(i.Button,{variant:"outline",onClick:d,className:"flex items-center gap-2",children:[(0,b.jsx)(m.ExternalLink,{className:"w-4 h-4"}),"Preview"]}),(0,b.jsxs)(i.Button,{variant:"outline",onClick:e,disabled:c,children:[(0,b.jsx)(k,{className:"w-4 h-4 mr-2"}),"Save Draft"]}),(0,b.jsxs)(i.Button,{onClick:f,disabled:c,children:[(0,b.jsx)(l.Eye,{className:"w-4 h-4 mr-2"}),"Publish"]}),(0,b.jsx)(i.Button,{variant:"outline",onClick:g,children:"Cancel"})]})]});var o=a.i(21958),p=a.i(3130),q=a.i(5522),r=a.i(17171),s=a.i(46893);let t=process.env.NEXT_PUBLIC_SITE_URL||"https://totalauthority.com",u=t.endsWith("/")?t.slice(0,-1):t,v=({formData:a,onInputChange:c})=>(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"title",children:"Title"}),(0,b.jsx)(q.Input,{id:"title",value:a.title,onChange:a=>c("title",a.target.value),placeholder:"Enter post title",className:"text-lg font-semibold"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"slug",children:"URL Slug"}),(0,b.jsx)(q.Input,{id:"slug",value:a.slug,onChange:a=>c("slug",a.target.value),placeholder:"url-slug"}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[u,"/blog/",a.slug]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"excerpt",children:"Excerpt"}),(0,b.jsx)(s.Textarea,{id:"excerpt",value:a.excerpt,onChange:a=>c("excerpt",a.target.value),placeholder:"Brief description of the post for listings and SEO",rows:3})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"author_name",children:"Author Name"}),(0,b.jsx)(q.Input,{id:"author_name",value:a.author_name||"",onChange:a=>c("author_name",a.target.value),placeholder:"Author name (e.g., TotalAuthority Team)"})]})]}),w=({formData:a,onInputChange:c})=>(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"meta_title",children:"Meta Title"}),(0,b.jsx)(q.Input,{id:"meta_title",value:a.meta_title,onChange:a=>c("meta_title",a.target.value),placeholder:"SEO title (defaults to post title)"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"meta_description",children:"Meta Description"}),(0,b.jsx)(s.Textarea,{id:"meta_description",value:a.meta_description,onChange:a=>c("meta_description",a.target.value),placeholder:"SEO description (defaults to excerpt)",rows:3})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"canonical_url",children:"Canonical URL"}),(0,b.jsx)(q.Input,{id:"canonical_url",value:a.canonical_url,onChange:a=>c("canonical_url",a.target.value),placeholder:`${u}/blog/post-slug`})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"og_image_url",children:"Social Media Image URL"}),(0,b.jsx)(q.Input,{id:"og_image_url",value:a.og_image_url,onChange:a=>c("og_image_url",a.target.value),placeholder:"https://example.com/image.jpg"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"og_image_alt",children:"Social Media Image Alt Text"}),(0,b.jsx)(q.Input,{id:"og_image_alt",value:a.og_image_alt,onChange:a=>c("og_image_alt",a.target.value),placeholder:"Describe the social media image"})]})]});var x=a.i(80281),y=a.i(87682);let z=({formData:a,onInputChange:c})=>(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{children:"Search Engine Indexing"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Allow search engines to index this page"})]}),(0,b.jsx)(x.Switch,{checked:a.is_indexed,onCheckedChange:a=>c("is_indexed",a)})]}),a.reading_time&&(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{children:"Reading Time"}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:[a.reading_time," minutes (auto-calculated)"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{children:"Status"}),(0,b.jsxs)(y.Select,{value:a.status,onValueChange:a=>c("status",a),children:[(0,b.jsx)(y.SelectTrigger,{children:(0,b.jsx)(y.SelectValue,{})}),(0,b.jsxs)(y.SelectContent,{children:[(0,b.jsx)(y.SelectItem,{value:"draft",children:"Draft"}),(0,b.jsx)(y.SelectItem,{value:"published",children:"Published"})]})]})]})]});var A=a.i(54161),B=a.i(15618),C=a.i(33508);let D=({tags:a,onTagsChange:d})=>{let[f,g]=(0,c.useState)(""),[h,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(!1);(0,c.useEffect)(()=>{m()},[]);let m=async()=>{try{let{data:a,error:b}=await e.supabase.from("blog_posts").select("tags").not("tags","is",null);if(b)return void console.error("Error fetching tags:",b);let c=new Set;a?.forEach(a=>{a.tags&&Array.isArray(a.tags)&&a.tags.forEach(a=>c.add(a))}),j(Array.from(c).sort())}catch(a){console.error("Error fetching existing tags:",a)}},n=b=>{let c=b||f.trim();c&&!a.includes(c)&&(d([...a,c]),g(""),l(!1),m())},o=h.filter(b=>!a.includes(b)&&b.toLowerCase().includes(f.toLowerCase())).slice(0,8);return(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{children:"Tags"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:a.map((c,e)=>(0,b.jsxs)(A.Badge,{variant:"secondary",className:"flex items-center gap-1",children:[c,(0,b.jsx)("button",{onClick:()=>{d(a.filter(a=>a!==c))},className:"ml-1 hover:text-red-500",children:(0,b.jsx)(C.X,{className:"w-3 h-3"})})]},e))}),(0,b.jsx)("div",{className:"relative",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(q.Input,{value:f,onChange:a=>g(a.target.value),placeholder:"Add a tag or select from existing",onKeyPress:a=>"Enter"===a.key&&n(),onFocus:()=>{l(!0)},onBlur:()=>{setTimeout(()=>l(!1),200)}}),k&&(o.length>0||h.length>0)&&(0,b.jsx)("div",{className:"absolute top-full left-0 right-0 z-50 mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-48 overflow-y-auto",children:(0,b.jsxs)("div",{className:"p-2",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Existing tags:"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:(f?o:h.filter(b=>!a.includes(b)).slice(0,10)).map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>n(a),className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:a},a))})]})})]}),(0,b.jsx)(i.Button,{type:"button",onClick:()=>n(),size:"sm",children:(0,b.jsx)(B.Plus,{className:"w-4 h-4"})})]})})]})},E=()=>(0,b.jsx)("style",{dangerouslySetInnerHTML:{__html:`
        [contenteditable] ul {
          list-style-type: disc !important;
          margin-left: 1.5rem !important;
          padding-left: 1rem !important;
          margin-top: 0.5rem !important;
          margin-bottom: 0.5rem !important;
        }
        
        [contenteditable] ol {
          list-style-type: decimal !important;
          margin-left: 1.5rem !important;
          padding-left: 1rem !important;
          margin-top: 0.5rem !important;
          margin-bottom: 0.5rem !important;
        }
        
        [contenteditable] li {
          margin-bottom: 0.25rem !important;
          display: list-item !important;
          list-style-position: outside !important;
        }
        
        [contenteditable] ul ul,
        [contenteditable] ol ol {
          margin-left: 1rem !important;
        }
        
        [contenteditable] a {
          color: hsl(22 90% 52%) !important;
          font-weight: 600 !important;
          text-decoration: underline !important;
        }
        
        [contenteditable] a:hover {
          color: hsl(22 90% 45%) !important;
        }
        
        [contenteditable] h1 {
          font-size: 2.25rem !important;
          font-weight: bold !important;
          margin-bottom: 1rem !important;
          line-height: 1.2 !important;
        }
        
        [contenteditable] h2 {
          font-size: 1.875rem !important;
          font-weight: bold !important;
          margin-bottom: 0.75rem !important;
          line-height: 1.3 !important;
        }
        
        [contenteditable] h3 {
          font-size: 1.5rem !important;
          font-weight: bold !important;
          margin-bottom: 0.5rem !important;
          line-height: 1.4 !important;
        }
      `}}),F=({content:a,onChange:b})=>(c.default.useEffect(()=>{let c=c=>{let d=c.target;if(d.classList.contains("cta-remove-btn")){let e,f;c.preventDefault(),c.stopPropagation();let g=d.getAttribute("data-block-id");g&&((e=document.createElement("div")).innerHTML=a,(f=e.querySelector(`[data-block-id="${g}"]`))&&(f.remove(),b(e.innerHTML)))}};return document.addEventListener("click",c),()=>{document.removeEventListener("click",c)}},[a]),null),G=()=>(0,b.jsx)("style",{dangerouslySetInnerHTML:{__html:`
        .youtube-embed {
          margin: 16px 0;
          position: relative;
        }
        
        .youtube-caption {
          margin-top: 8px;
          text-align: center;
          font-size: 14px;
          color: #6b7280;
          font-style: italic;
        }
        
        .image-container {
          margin: 16px 0;
          display: block;
          position: relative;
        }
        
        .image-container img {
          max-width: 100%;
          height: auto;
          border-radius: 8px;
        }
      `}});var H=a.i(77687),I=a.i(65733);let J=({isOpen:a,onClose:d,onInsert:e,initialData:f})=>{let[g,h]=(0,c.useState)({url:"",alt:"",title:"",width:"",height:"",alignment:"center",linkUrl:"",linkNewTab:!1,linkNofollow:!1,linkSponsored:!1});(0,c.useEffect)(()=>{f&&h({url:f.url||"",alt:f.alt||"",title:f.title||"",width:f.width||"",height:f.height||"",alignment:f.alignment||"center",linkUrl:f.linkUrl||"",linkNewTab:f.linkNewTab||!1,linkNofollow:f.linkNofollow||!1,linkSponsored:f.linkSponsored||!1})},[f]);let j=()=>{d(),h({url:"",alt:"",title:"",width:"",height:"",alignment:"center",linkUrl:"",linkNewTab:!1,linkNofollow:!1,linkSponsored:!1})},k=f?.url&&f.url.includes("supabase");return(0,b.jsx)(I.Dialog,{open:a,onOpenChange:j,children:(0,b.jsxs)(I.DialogContent,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,b.jsx)(I.DialogHeader,{children:(0,b.jsx)(I.DialogTitle,{children:k?"Edit Image":"Insert/Edit Image"})}),(0,b.jsxs)("div",{className:"space-y-6",children:[!k&&(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"imageUrl",children:"Image URL *"}),(0,b.jsx)(q.Input,{id:"imageUrl",value:g.url,onChange:a=>h({...g,url:a.target.value}),placeholder:"https://example.com/image.jpg"})]}),k&&g.url&&(0,b.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,b.jsx)(r.Label,{className:"text-sm font-medium mb-2 block",children:"Uploaded Image"}),(0,b.jsx)("img",{src:g.url,alt:g.alt||"Uploaded image",className:"max-w-full max-h-32 object-contain border rounded"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"altText",children:"Alt Text (SEO & Accessibility) *"}),(0,b.jsx)(s.Textarea,{id:"altText",value:g.alt,onChange:a=>h({...g,alt:a.target.value}),placeholder:"Describe the image for accessibility and SEO",rows:2})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"titleText",children:"Title (Tooltip on hover)"}),(0,b.jsx)(q.Input,{id:"titleText",value:g.title,onChange:a=>h({...g,title:a.target.value}),placeholder:"Optional tooltip text"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"width",children:"Width"}),(0,b.jsx)(q.Input,{id:"width",value:g.width,onChange:a=>h({...g,width:a.target.value}),placeholder:"e.g., 300px, 50%, auto"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"height",children:"Height"}),(0,b.jsx)(q.Input,{id:"height",value:g.height,onChange:a=>h({...g,height:a.target.value}),placeholder:"e.g., 200px, auto"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"alignment",children:"Alignment"}),(0,b.jsxs)(y.Select,{value:g.alignment,onValueChange:a=>h({...g,alignment:a}),children:[(0,b.jsx)(y.SelectTrigger,{children:(0,b.jsx)(y.SelectValue,{})}),(0,b.jsxs)(y.SelectContent,{children:[(0,b.jsx)(y.SelectItem,{value:"left",children:"Left"}),(0,b.jsx)(y.SelectItem,{value:"center",children:"Center"}),(0,b.jsx)(y.SelectItem,{value:"right",children:"Right"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"linkUrl",children:"Link URL (Make image clickable)"}),(0,b.jsx)(q.Input,{id:"linkUrl",value:g.linkUrl,onChange:a=>h({...g,linkUrl:a.target.value}),placeholder:"https://example.com (optional)"})]}),g.linkUrl&&(0,b.jsxs)("div",{className:"space-y-3 p-4 bg-gray-50 rounded-lg",children:[(0,b.jsx)("h4",{className:"font-medium text-sm",children:"Link Options"}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(r.Label,{htmlFor:"linkNewTab",className:"text-sm font-medium",children:"Open in new tab"}),(0,b.jsx)(x.Switch,{id:"linkNewTab",checked:g.linkNewTab,onCheckedChange:a=>h({...g,linkNewTab:a})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(r.Label,{htmlFor:"linkNofollow",className:"text-sm font-medium",children:"Add nofollow"}),(0,b.jsx)(x.Switch,{id:"linkNofollow",checked:g.linkNofollow,onCheckedChange:a=>h({...g,linkNofollow:a})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(r.Label,{htmlFor:"linkSponsored",className:"text-sm font-medium",children:"Mark as sponsored"}),(0,b.jsx)(x.Switch,{id:"linkSponsored",checked:g.linkSponsored,onCheckedChange:a=>h({...g,linkSponsored:a})})]})]})]}),g.url&&(0,b.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,b.jsx)(r.Label,{className:"text-sm font-medium mb-2 block",children:"Preview"}),(0,b.jsx)("div",{className:`flex ${"left"===g.alignment?"justify-start":"right"===g.alignment?"justify-end":"justify-center"}`,children:(0,b.jsx)("img",{src:g.url,alt:g.alt,title:g.title,style:{width:g.width||"auto",height:g.height||"auto",maxWidth:"300px",maxHeight:"200px"},className:"border rounded"})})]}),(0,b.jsx)(i.Button,{onClick:()=>{g.url&&g.alt&&(e(g),j())},className:"w-full",disabled:!g.url||!g.alt,children:k?"Update Image":"Insert Image"})]})]})})},K=(0,j.default)("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]),L=(0,j.default)("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]),M=(0,j.default)("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]),N=({onFormatText:a,onInsertQuote:c})=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>a("bold"),className:"flex items-center gap-2 bg-white hover:bg-gray-100",type:"button",children:[(0,b.jsx)(K,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Bold"})]}),(0,b.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>a("italic"),className:"flex items-center gap-2 bg-white hover:bg-gray-100",type:"button",children:[(0,b.jsx)(L,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Italic"})]}),(0,b.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:c,className:"flex items-center gap-2 bg-white hover:bg-gray-100",type:"button",children:[(0,b.jsx)(M,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Quote"})]})]}),O=(0,j.default)("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]),P=(0,j.default)("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]),Q=(0,j.default)("Heading3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]),R=({onInsertHeading:a})=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>a(1),className:"flex items-center gap-2 bg-white hover:bg-gray-100",type:"button",children:[(0,b.jsx)(O,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"H1"})]}),(0,b.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>a(2),className:"flex items-center gap-2 bg-white hover:bg-gray-100",type:"button",children:[(0,b.jsx)(P,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"H2"})]}),(0,b.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>a(3),className:"flex items-center gap-2 bg-white hover:bg-gray-100",type:"button",children:[(0,b.jsx)(Q,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"H3"})]})]}),S=(0,j.default)("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),T=(0,j.default)("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]),U=({onInsertList:a})=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>a(!1),className:"flex items-center gap-2 bg-white hover:bg-gray-100",type:"button",children:[(0,b.jsx)(S,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Bullets"})]}),(0,b.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>a(!0),className:"flex items-center gap-2 bg-white hover:bg-gray-100",type:"button",children:[(0,b.jsx)(T,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Numbers"})]})]}),V=(0,j.default)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),W=({onLinkClick:a,showLinkDialog:c,setShowLinkDialog:d,linkUrl:e,setLinkUrl:f,linkText:g,setLinkText:h,linkNofollow:j,setLinkNofollow:k,linkSponsored:l,setLinkSponsored:m,linkNewTab:n,setLinkNewTab:o,onInsertLink:p})=>(0,b.jsxs)(I.Dialog,{open:c,onOpenChange:d,children:[(0,b.jsx)(I.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(i.Button,{variant:"outline",size:"sm",className:"flex items-center gap-2 bg-white hover:bg-gray-100",type:"button",onClick:a,children:[(0,b.jsx)(V,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Link"})]})}),(0,b.jsxs)(I.DialogContent,{className:"max-w-md",children:[(0,b.jsx)(I.DialogHeader,{children:(0,b.jsx)(I.DialogTitle,{children:"Insert Link"})}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"linkText",children:"Link Text"}),(0,b.jsx)(q.Input,{id:"linkText",value:g,onChange:a=>h(a.target.value),placeholder:"Click here"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"linkUrl",children:"URL"}),(0,b.jsx)(q.Input,{id:"linkUrl",value:e,onChange:a=>f(a.target.value),placeholder:"https://example.com"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(r.Label,{htmlFor:"linkNewTab",className:"text-sm font-medium",children:"Open in new tab"}),(0,b.jsx)(x.Switch,{id:"linkNewTab",checked:n,onCheckedChange:o})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(r.Label,{htmlFor:"linkNofollow",className:"text-sm font-medium",children:"Add nofollow"}),(0,b.jsx)(x.Switch,{id:"linkNofollow",checked:j,onCheckedChange:k})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(r.Label,{htmlFor:"linkSponsored",className:"text-sm font-medium",children:"Mark as sponsored"}),(0,b.jsx)(x.Switch,{id:"linkSponsored",checked:l,onCheckedChange:m})]})]}),(0,b.jsx)(i.Button,{onClick:p,className:"w-full",type:"button",children:"Insert Link"})]})]})]});var X=a.i(73320);let Y=({onImageUpload:a,uploading:c})=>(0,b.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:a,disabled:c,className:"flex items-center gap-2 bg-white hover:bg-gray-100",type:"button",children:[(0,b.jsx)(X.Upload,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:c?"Uploading...":"Insert Image"})]});var Z=a.i(69472);let $=({onFormatText:a,onInsertHeading:c,onInsertList:d,onInsertQuote:e,onLinkClick:f,onImageUpload:g,onYouTubeClick:h,uploading:j,showLinkDialog:k,setShowLinkDialog:l,linkUrl:m,setLinkUrl:n,linkText:o,setLinkText:p,linkNofollow:q,setLinkNofollow:r,linkSponsored:s,setLinkSponsored:t,linkNewTab:u,setLinkNewTab:v,onInsertLink:w,showImageDialog:x,setShowImageDialog:y,showImageEditor:z,setShowImageEditor:A,imageUrl:B,setImageUrl:C,imageAlt:D,setImageAlt:E,onInsertImageUrl:F,onInsertImage:G,imageToEdit:H})=>(0,b.jsxs)("div",{className:"border rounded-lg p-3 bg-gray-50",children:[(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)(R,{onInsertHeading:c}),(0,b.jsx)(N,{onFormatText:a,onInsertQuote:e}),(0,b.jsx)(U,{onInsertList:d}),(0,b.jsx)(W,{onLinkClick:f,showLinkDialog:k,setShowLinkDialog:l,linkUrl:m,setLinkUrl:n,linkText:o,setLinkText:p,linkNofollow:q,setLinkNofollow:r,linkSponsored:s,setLinkSponsored:t,linkNewTab:u,setLinkNewTab:v,onInsertLink:w}),(0,b.jsx)(Y,{onImageUpload:g,uploading:j}),(0,b.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:h,className:"flex items-center gap-2 bg-white hover:bg-gray-100",type:"button",children:[(0,b.jsx)(Z.Youtube,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"YouTube"})]})]}),(0,b.jsx)(J,{isOpen:z,onClose:()=>A(!1),onInsert:G,initialData:H||(B?{url:B,alt:D}:void 0)})]}),_=({editorRef:a,onInput:c,onPaste:d})=>(0,b.jsx)("div",{className:"relative",children:(0,b.jsx)("div",{ref:a,contentEditable:!0,onInput:c,onPaste:d,className:"min-h-[400px] p-4 border rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-orange-500",style:{lineHeight:"1.6",fontSize:"16px",color:"#374151"}})}),aa=({content:a})=>(0,b.jsxs)("div",{className:"min-h-[400px] p-4 border rounded-lg bg-white",children:[(0,b.jsx)("style",{dangerouslySetInnerHTML:{__html:`
        `}}),(0,b.jsx)("div",{className:"prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:a}})]}),ab=({activeTab:a,setActiveTab:c,content:d,editorLogic:e,youtubeManager:f,handleImageUploadClick:g,handleImageInsert:h,handleEditorInput:i,handlePaste:j,htmlContent:k,handleHtmlChange:l})=>(0,b.jsxs)(o.Tabs,{value:a,onValueChange:a=>c(a),children:[(0,b.jsxs)(o.TabsList,{className:"grid w-full grid-cols-3",children:[(0,b.jsx)(o.TabsTrigger,{value:"edit",children:"Edit"}),(0,b.jsx)(o.TabsTrigger,{value:"preview",children:"Preview"}),(0,b.jsx)(o.TabsTrigger,{value:"html",children:"HTML"})]}),(0,b.jsxs)(o.TabsContent,{value:"edit",className:"space-y-4",children:[(0,b.jsx)($,{onFormatText:e.formatText,onInsertHeading:e.insertHeading,onInsertList:e.insertList,onInsertQuote:e.insertQuote,onLinkClick:e.handleLinkClick,onImageUpload:g,onYouTubeClick:f.handleYouTubeClick,uploading:e.uploading,showLinkDialog:e.showLinkDialog,setShowLinkDialog:e.setShowLinkDialog,linkUrl:e.linkUrl,setLinkUrl:e.setLinkUrl,linkText:e.linkText,setLinkText:e.setLinkText,linkNofollow:e.linkNofollow,setLinkNofollow:e.setLinkNofollow,linkSponsored:e.linkSponsored,setLinkSponsored:e.setLinkSponsored,linkNewTab:e.linkNewTab,setLinkNewTab:e.setLinkNewTab,onInsertLink:e.insertLink,showImageDialog:e.showImageDialog,setShowImageDialog:e.setShowImageDialog,showImageEditor:e.showImageEditor,setShowImageEditor:e.setShowImageEditor,imageUrl:e.imageUrl,setImageUrl:e.setImageUrl,imageAlt:e.imageAlt,setImageAlt:e.setImageAlt,onInsertImageUrl:e.insertImageUrl,onInsertImage:h,imageToEdit:e.imageToEdit}),(0,b.jsx)(_,{editorRef:e.editorRef,onInput:i,onPaste:j}),(0,b.jsx)("div",{className:"text-sm text-gray-500 mt-2",children:"Use the toolbar buttons above to format your content and insert elements like images and YouTube videos."})]}),(0,b.jsx)(o.TabsContent,{value:"preview",className:"space-y-4",children:(0,b.jsx)(aa,{content:d})}),(0,b.jsx)(o.TabsContent,{value:"html",className:"space-y-4",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Raw HTML"}),(0,b.jsx)("textarea",{value:k||d,onChange:a=>l?.(a.target.value),className:"w-full min-h-[400px] p-4 border rounded-lg bg-white font-mono text-sm focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Enter raw HTML content..."}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"Edit the raw HTML directly. Changes will sync with the visual editor."})]})})]}),ac=({isOpen:a,onClose:d,onInsert:e,initialData:f})=>{let[g,h]=(0,c.useState)(f?.url||""),[j,k]=(0,c.useState)(f?.caption||""),[l,m]=(0,c.useState)(f?.videoId||"");(0,c.useEffect)(()=>{if(g){let a;m(((a=g.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/))?a[1]:null)||"")}else m("")},[g]);let n=()=>{h(f?.url||""),k(f?.caption||""),m(f?.videoId||""),d()};return(0,b.jsx)(I.Dialog,{open:a,onOpenChange:n,children:(0,b.jsxs)(I.DialogContent,{className:"max-w-2xl",children:[(0,b.jsx)(I.DialogHeader,{children:(0,b.jsxs)(I.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(Z.Youtube,{className:"w-5 h-5"}),f?"Edit YouTube Video":"Embed YouTube Video"]})}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"youtube-url",children:"YouTube URL"}),(0,b.jsx)(q.Input,{id:"youtube-url",type:"url",placeholder:"https://www.youtube.com/watch?v=...",value:g,onChange:a=>h(a.target.value)}),g&&!l&&(0,b.jsx)("p",{className:"text-sm text-red-600 mt-1",children:"Invalid YouTube URL"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"youtube-caption",children:"Caption (Optional)"}),(0,b.jsx)(s.Textarea,{id:"youtube-caption",placeholder:"Add a caption to describe this video...",value:j,onChange:a=>k(a.target.value),rows:2})]}),l&&(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{children:"Preview"}),(0,b.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,b.jsx)("div",{className:"relative w-full h-0 pb-[56.25%]",children:(0,b.jsx)("iframe",{className:"absolute top-0 left-0 w-full h-full",src:`https://www.youtube.com/embed/${l}`,title:"YouTube video preview",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),j&&(0,b.jsx)("div",{className:"p-3 bg-gray-50",children:(0,b.jsx)("p",{className:"text-sm text-gray-600 italic",children:j})})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(i.Button,{variant:"outline",onClick:n,children:"Cancel"}),(0,b.jsxs)(i.Button,{onClick:()=>{g.trim()&&l&&(e({id:f?.id||`youtube-${Date.now()}`,url:g.trim(),videoId:l,caption:j.trim()}),d())},disabled:!l,children:[f?"Update":"Insert"," Video"]})]})]})]})})},ad=({youtubeManager:a})=>(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(ac,{isOpen:a.showYouTubeEditor,onClose:()=>{a.setShowYouTubeEditor(!1),a.setYoutubeToEdit(null)},onInsert:a.insertYouTubeEmbed,initialData:a.youtubeToEdit||void 0})}),ae=({content:a,onChange:d})=>{let{activeTab:f,setActiveTab:g,editorLogic:h,youtubeManager:i,handleImageUploadClick:j,handleImageInsert:k,handleEditorInput:l,handlePaste:m,htmlContent:n,handleHtmlChange:o}=(({content:a,onChange:b})=>{let[d,f]=(0,c.useState)("edit"),[g,h]=(0,c.useState)(a),i=(a=>{let b=(0,c.useRef)(null),[d,f]=(0,c.useState)(null),g=(()=>{let[a,b]=(0,c.useState)(""),[d,e]=(0,c.useState)(""),[f,g]=(0,c.useState)(!1),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(null);return{linkUrl:a,setLinkUrl:b,linkText:d,setLinkText:e,linkNofollow:f,setLinkNofollow:g,linkSponsored:h,setLinkSponsored:i,linkNewTab:j,setLinkNewTab:k,showLinkDialog:l,setShowLinkDialog:m,handleLinkClick:()=>{let a=window.getSelection();if(a&&a.rangeCount>0){o(a.getRangeAt(0).cloneRange());let b=a.toString().trim();b?e(b):e("")}else o(null),e("");b(""),g(!1),i(!1),k(!1),m(!0)},insertLink:(c,l)=>{if(a){if(n&&c.current){c.current.focus();let b=window.getSelection();if(b){b.removeAllRanges(),b.addRange(n);let c=b.toString().trim(),e=[];f&&e.push("nofollow"),h&&e.push("sponsored");let g=e.length>0?` rel="${e.join(" ")}"`:"",i=`<a href="${a}"${g}${j?' target="_blank"':""} style="color: hsl(22 90% 52%); font-weight: 600; text-decoration: underline;">${c||d||a}</a>`;if(c){n.deleteContents();let a=document.createElement("div");a.innerHTML=i;let b=a.firstChild;b&&n.insertNode(b)}else{let a=document.createElement("div");a.innerHTML=i+"&nbsp;";let b=a.firstChild;b&&n.insertNode(b)}b.removeAllRanges(),l()}}b(""),e(""),g(!1),i(!1),k(!1),o(null),m(!1)}}}})(),h=(()=>{let[a,b]=(0,c.useState)(!1),[d,f]=(0,c.useState)(!1),[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(null),q=(0,c.useRef)(null),r=(0,c.useRef)(null),{toast:s}=(0,H.useToast)(),t=async a=>{let c=a.target.files?.[0];if(c){b(!0);try{let{data:{user:a},error:b}=await e.supabase.auth.getUser();if(b||!a)throw Error("You must be logged in to upload images");let d=c.name.split(".").pop(),f=`${Date.now()}-${Math.random().toString(36).substring(2)}.${d}`,g=`blog-images/${f}`,{error:i}=await e.supabase.storage.from("blog-media").upload(g,c);if(i)throw i;let{data:k}=e.supabase.storage.from("blog-media").getPublicUrl(g);j(k.publicUrl),l(c.name.split(".")[0].replace(/[-_]/g," ")),n(null),p(null),h(!0),s({title:"Success",description:"Image uploaded successfully. Configure your image settings."})}catch(a){console.error("Error uploading image:",a),s({title:"Error",description:"Failed to upload image",variant:"destructive"})}finally{b(!1),q.current&&(q.current.value="")}}};return{uploading:a,showImageDialog:d,setShowImageDialog:f,showImageEditor:g,setShowImageEditor:h,imageUrl:i,setImageUrl:j,imageAlt:k,setImageAlt:l,imageToEdit:m,fileInputRef:q,handleImageUpload:t,insertImageUrl:()=>{i&&(n(null),p(null),h(!0))},insertImage:(a,b,c,d)=>{if(console.log("insertImage called with:",{imageData:a,editorRef:!!b.current,isEditing:!!o}),!a.url||!b.current)return void console.error("Missing required data for image insertion:",{url:a.url,editor:!!b.current});b.current.focus();let e=["border-radius: 8px","max-width: 100%","height: auto","display: block"];a.width&&e.push(`width: ${a.width}`),a.height&&e.push(`height: ${a.height}`),e.push({left:"margin-right: auto; margin-left: 0",center:"margin-left: auto; margin-right: auto",right:"margin-left: auto; margin-right: 0"}[a.alignment]);let f=`img-${Date.now()}-${Math.random().toString(36).substring(2)}`,g=document.createElement("img");g.src=a.url,g.alt=a.alt,a.title&&(g.title=a.title),g.style.cssText=e.join("; "),g.setAttribute("data-image-id",f),g.setAttribute("data-image-data",JSON.stringify(a));let i=g;if(a.linkUrl){let b=document.createElement("a");b.href=a.linkUrl;let c=[];a.linkNofollow&&c.push("nofollow"),a.linkSponsored&&c.push("sponsored"),c.length>0&&(b.rel=c.join(" ")),a.linkNewTab&&(b.target="_blank"),b.appendChild(g),i=b}let k=document.createElement("div");k.className="image-container",k.style.cssText="margin: 16px 0; display: block; position: relative;",k.appendChild(i);try{if(o)console.log("Replacing existing image"),o.replaceWith(k),p(null);else{let a=window.getSelection(),c=!1;if((()=>{if(r.current){let a=window.getSelection();if(a)return a.removeAllRanges(),a.addRange(r.current),console.log("Cursor position restored"),!0}return!1})()){let b=a?.getRangeAt(0);b&&(console.log("Inserting at restored cursor position"),b.deleteContents(),b.insertNode(k),b.setStartAfter(k),b.collapse(!0),a?.removeAllRanges(),a?.addRange(b),c=!0)}if(!c)if(a&&a.rangeCount>0){console.log("Inserting at current cursor position");let b=a.getRangeAt(0);b.deleteContents(),b.insertNode(k),b.setStartAfter(k),b.collapse(!0),a.removeAllRanges(),a.addRange(b)}else console.log("No cursor position, appending to end"),b.current.appendChild(k)}console.log("Image inserted using DOM selection")}catch(a){console.error("Error inserting image:",a),b.current.appendChild(k)}r.current=null,c(),setTimeout(()=>d(),200),j(""),l(""),n(null),h(!1),console.log("Image insertion completed")},saveSelection:()=>{let a=window.getSelection();a&&a.rangeCount>0&&(r.current=a.getRangeAt(0).cloneRange(),console.log("Cursor position saved"))},startImageEdit:(a,b)=>{console.log("Starting image edit with data:",a),n(a),p(b),j(a.url),l(a.alt),h(!0)}}})(),i=()=>{b.current&&a(b.current.innerHTML)},j=()=>{((a,b)=>{if(console.log("addRemoveButtonsToImages called, editor exists:",!!a.current),!a.current)return;let c=a.current.querySelectorAll(".image-container"),d=a.current.querySelectorAll("img[data-image-id]:not([data-has-remove-btn])"),e=a.current.querySelectorAll("img");console.log("Found image containers:",c.length),console.log("Found standalone images:",d.length),console.log("Found all images:",e.length),console.log("Editor innerHTML length:",a.current.innerHTML.length),console.log("Editor innerHTML preview:",a.current.innerHTML.substring(a.current.innerHTML.length-500)),c.forEach(c=>{let d=c.querySelector("img[data-image-id]");if(!d||d.getAttribute("data-has-remove-btn")||(d.setAttribute("data-has-remove-btn","true"),c.querySelector(".editor-edit-btn")))return;let e=document.createElement("button");e.innerHTML="×",e.className="editor-remove-btn",e.style.cssText="position: absolute; top: 8px; right: 8px; width: 24px; height: 24px; background: #ef4444; border: none; border-radius: 50%; cursor: pointer; font-size: 16px; line-height: 1; display: flex; align-items: center; justify-content: center; font-weight: bold; z-index: 1000; opacity: 0; transition: opacity 0.2s; color: white;",e.title="Remove image",e.type="button",e.addEventListener("click",a=>{a.preventDefault(),a.stopPropagation(),c.remove(),b()});let f=document.createElement("button");f.innerHTML="✏️",f.className="editor-edit-btn",f.style.cssText="position: absolute; top: 8px; right: 36px; width: 24px; height: 24px; background: #3b82f6; border: none; border-radius: 50%; cursor: pointer; font-size: 12px; line-height: 1; display: flex; align-items: center; justify-content: center; font-weight: bold; z-index: 1000; opacity: 0; transition: opacity 0.2s; color: white;",f.title="Edit image",f.type="button",f.addEventListener("click",b=>{b.preventDefault(),b.stopPropagation();let e=d.getAttribute("data-image-data");if(e&&a.current)try{let b=JSON.parse(e);console.log("Triggering edit event with data:",b);let d=new CustomEvent("editImage",{detail:{...b,sourceContainer:c},bubbles:!0});a.current.dispatchEvent(d)}catch(a){console.error("Error parsing image data:",a)}}),c.appendChild(e),c.appendChild(f),c.addEventListener("mouseenter",()=>{e.style.opacity="1",f.style.opacity="1"}),c.addEventListener("mouseleave",()=>{e.style.opacity="0",f.style.opacity="0"}),console.log("Added buttons to image container")}),d.forEach(c=>{if(c.closest(".image-container"))return void console.log("Skipping standalone image processing - already in container");if(c.setAttribute("data-has-remove-btn","true"),!c.parentElement?.classList.contains("editor-image-container")){let d=document.createElement("div");d.className="editor-image-container",d.style.cssText="position: relative; display: inline-block; margin: 16px 0;",c.parentNode?.insertBefore(d,c),d.appendChild(c);let e=document.createElement("button");e.innerHTML="×",e.className="editor-remove-btn",e.style.cssText="position: absolute; top: 8px; right: 8px; width: 24px; height: 24px; background: #ef4444; border: none; border-radius: 50%; cursor: pointer; font-size: 16px; line-height: 1; display: flex; align-items: center; justify-content: center; font-weight: bold; z-index: 1000; color: white;",e.title="Remove image",e.type="button",e.addEventListener("click",a=>{a.preventDefault(),a.stopPropagation(),d.remove(),b()});let f=document.createElement("button");f.innerHTML="✏️",f.className="editor-edit-btn",f.style.cssText="position: absolute; top: 8px; right: 36px; width: 24px; height: 24px; background: #3b82f6; border: none; border-radius: 50%; cursor: pointer; font-size: 12px; line-height: 1; display: flex; align-items: center; justify-content: center; font-weight: bold; z-index: 1000; color: white;",f.title="Edit image",f.type="button",f.addEventListener("click",b=>{b.preventDefault(),b.stopPropagation();let e=c.getAttribute("data-image-data");if(e&&a.current)try{let b=JSON.parse(e);console.log("Triggering edit event with data:",b);let c=new CustomEvent("editImage",{detail:{...b,sourceContainer:d},bubbles:!0});a.current.dispatchEvent(c)}catch(a){console.error("Error parsing image data:",a)}}),d.appendChild(e),d.appendChild(f),console.log("Added buttons to standalone image container")}})})(b,i)};return{editorRef:b,handleContentChange:i,saveSelection:()=>{let a=window.getSelection();a&&a.rangeCount>0&&f(a.getRangeAt(0).cloneRange())},restoreSelection:()=>{if(d){let a=window.getSelection();a&&(a.removeAllRanges(),a.addRange(d))}},formatText:a=>{var b,c;return b=a,c=i,void(document.execCommand(b,!1),c())},insertHeading:a=>{var c,d,e;return c=a,d=b,e=i,void(d.current&&(d.current.focus(),document.execCommand("formatBlock",!1,`h${c}`),e()))},insertList:a=>{var c,d,e;return c=a,d=b,e=i,void(d.current&&(d.current.focus(),document.execCommand(c?"insertOrderedList":"insertUnorderedList",!1),e()))},insertQuote:()=>{var a,c;return a=b,c=i,void(a.current&&(a.current.focus(),document.execCommand("insertHTML",!1,'<blockquote style="border-left: 4px solid hsl(22 90% 52%); padding-left: 1rem; margin: 1rem 0; font-style: italic; color: #6b7280;">Your quote here</blockquote>'),c()))},...g,insertLink:()=>g.insertLink(b,i),...h,insertImage:a=>h.insertImage(a,b,i,j),addRemoveButtonsToImages:j}})(b),j=(({editorRef:a,onChange:b,handleContentChange:d,saveSelection:e})=>{let[f,g]=(0,c.useState)(!1),[h,i]=(0,c.useState)(null),[j,k]=(0,c.useState)(null),l=()=>{a.current&&a.current.querySelectorAll(".youtube-embed:not([data-has-buttons])").forEach(c=>{c.setAttribute("data-has-buttons","true"),c.style.position="relative";let d=document.createElement("button");d.innerHTML="×",d.style.cssText="position: absolute; top: 8px; right: 8px; width: 24px; height: 24px; background: #ef4444; border: none; border-radius: 50%; cursor: pointer; font-size: 16px; color: white; z-index: 1000; opacity: 0; transition: opacity 0.2s;",d.addEventListener("click",d=>{d.preventDefault(),d.stopPropagation(),c.remove(),b(a.current?.innerHTML||"")});let e=document.createElement("button");e.innerHTML="✏️",e.style.cssText="position: absolute; top: 8px; right: 36px; width: 24px; height: 24px; background: #3b82f6; border: none; border-radius: 50%; cursor: pointer; font-size: 12px; color: white; z-index: 1000; opacity: 0; transition: opacity 0.2s;",e.addEventListener("click",a=>{a.preventDefault(),a.stopPropagation();let b=c.getAttribute("data-youtube-data");b&&(i(JSON.parse(b)),g(!0))}),c.appendChild(d),c.appendChild(e),c.addEventListener("mouseenter",()=>{d.style.opacity="1",e.style.opacity="1"}),c.addEventListener("mouseleave",()=>{d.style.opacity="0",e.style.opacity="0"})})};return{showYouTubeEditor:f,setShowYouTubeEditor:g,youtubeToEdit:h,setYoutubeToEdit:i,insertYouTubeEmbed:b=>{if(!a.current)return;let c=`
      <div class="youtube-embed" data-youtube-id="${b.id}" data-youtube-data='${JSON.stringify(b)}'>
        <div class="relative w-full h-0 pb-[56.25%] mb-4">
          <iframe 
            class="absolute top-0 left-0 w-full h-full rounded-lg"
            src="https://www.youtube.com/embed/${b.videoId}" 
            title="YouTube video" 
            frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
            allowfullscreen>
          </iframe>
        </div>
        ${b.caption?`<div class="youtube-caption text-center text-sm text-gray-600 italic mb-4">${b.caption}</div>`:""}
      </div>
    `;if(h){let b=a.current.querySelector(`[data-youtube-id="${h.id}"]`);if(b){let a=document.createElement("div");a.innerHTML=c;let e=a.firstElementChild;b.parentNode?.replaceChild(e,b),d(),setTimeout(()=>l(),100),i(null);return}}let e=j;if(!e){let a=window.getSelection();a&&a.rangeCount>0&&(e=a.getRangeAt(0))}e||((e=document.createRange()).selectNodeContents(a.current),e.collapse(!1)),a.current.contains(e.commonAncestorContainer)||((e=document.createRange()).selectNodeContents(a.current),e.collapse(!1));let f=document.createElement("div");f.innerHTML=c;let g=f.firstElementChild;try{e.deleteContents(),e.insertNode(g),e.setStartAfter(g),e.collapse(!0);let a=window.getSelection();a&&(a.removeAllRanges(),a.addRange(e))}catch(b){console.error("Error inserting YouTube embed:",b),a.current.appendChild(g)}k(null),d(),setTimeout(()=>l(),100)},addRemoveButtonsToEmbeds:l,handleYouTubeClick:()=>{let a=window.getSelection();a&&a.rangeCount>0&&k(a.getRangeAt(0).cloneRange()),e?.(),g(!0)}}})({editorRef:i.editorRef,onChange:b,handleContentChange:i.handleContentChange,saveSelection:i.saveSelection});return(0,c.useEffect)(()=>{h(a),i.editorRef.current&&a!==i.editorRef.current.innerHTML&&(i.editorRef.current.innerHTML=a,setTimeout(()=>{i.addRemoveButtonsToImages(),j.addRemoveButtonsToEmbeds()},100))},[a,i.addRemoveButtonsToImages,j.addRemoveButtonsToEmbeds]),(0,c.useEffect)(()=>{let a=a=>{let b=a.detail,c=b.sourceContainer||a.target?.closest?.(".image-container")||a.target;if(b&&c){let{sourceContainer:a,...d}=b;i.startImageEdit(d,c)}};if(i.editorRef.current)return i.editorRef.current.addEventListener("editImage",a),()=>{i.editorRef.current&&i.editorRef.current.removeEventListener("editImage",a)}},[i.startImageEdit]),{activeTab:d,setActiveTab:a=>{if("edit"===d&&i.editorRef.current){let a=i.editorRef.current.innerHTML;h(a),b(a)}f(a),"edit"===a&&setTimeout(()=>{i.editorRef.current&&(i.editorRef.current.innerHTML=g,i.addRemoveButtonsToImages(),j.addRemoveButtonsToEmbeds())},50)},editorLogic:i,youtubeManager:j,handleImageUploadClick:()=>{i.saveSelection?.(),i.fileInputRef.current?.click()},handleImageInsert:a=>{i.insertImage(a)},handleEditorInput:a=>{let c=i.editorRef.current?.innerHTML||"";h(c),b(c),setTimeout(()=>{i.editorRef.current&&(i.addRemoveButtonsToImages(),j.addRemoveButtonsToEmbeds())},100)},handlePaste:a=>{setTimeout(()=>{let a=i.editorRef.current?.innerHTML||"";h(a),b(a),i.addRemoveButtonsToImages(),j.addRemoveButtonsToEmbeds()},100)},htmlContent:g,handleHtmlChange:a=>{h(a),b(a)}}})({content:a,onChange:d});return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(r.Label,{children:"Content"}),(0,b.jsx)(ab,{activeTab:f,setActiveTab:g,content:a,editorLogic:h,youtubeManager:i,handleImageUploadClick:j,handleImageInsert:k,handleEditorInput:l,handlePaste:m,htmlContent:n,handleHtmlChange:o}),(0,b.jsx)(E,{}),(0,b.jsx)(F,{content:a,onChange:d}),(0,b.jsx)(ad,{youtubeManager:i}),(0,b.jsx)("input",{ref:h.fileInputRef,type:"file",accept:"image/*",onChange:h.handleImageUpload,className:"hidden"}),(0,b.jsx)(G,{})]})},af=({formData:a,onInputChange:c,onTagsChange:d})=>(0,b.jsxs)(o.Tabs,{defaultValue:"content",className:"space-y-6",children:[(0,b.jsxs)(o.TabsList,{children:[(0,b.jsx)(o.TabsTrigger,{value:"content",children:"Content"}),(0,b.jsx)(o.TabsTrigger,{value:"seo",children:"SEO & Meta"}),(0,b.jsx)(o.TabsTrigger,{value:"settings",children:"Settings"})]}),(0,b.jsx)(o.TabsContent,{value:"content",children:(0,b.jsxs)(p.Card,{children:[(0,b.jsx)(p.CardHeader,{children:(0,b.jsx)(p.CardTitle,{children:"Post Content"})}),(0,b.jsxs)(p.CardContent,{className:"space-y-6",children:[(0,b.jsx)(v,{formData:a,onInputChange:c}),(0,b.jsx)("div",{children:(0,b.jsx)(ae,{content:a.content,onChange:a=>c("content",a)})}),(0,b.jsx)(D,{tags:a.tags,onTagsChange:d})]})]})}),(0,b.jsx)(o.TabsContent,{value:"seo",children:(0,b.jsxs)(p.Card,{children:[(0,b.jsx)(p.CardHeader,{children:(0,b.jsx)(p.CardTitle,{children:"SEO & Meta Tags"})}),(0,b.jsx)(p.CardContent,{children:(0,b.jsx)(w,{formData:a,onInputChange:c})})]})}),(0,b.jsx)(o.TabsContent,{value:"settings",children:(0,b.jsxs)(p.Card,{children:[(0,b.jsx)(p.CardHeader,{children:(0,b.jsx)(p.CardTitle,{children:"Post Settings"})}),(0,b.jsx)(p.CardContent,{children:(0,b.jsx)(z,{formData:a,onInputChange:c})})]})})]}),ag=(0,j.default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),ah=({imageUrl:a,imageAlt:d,onImageChange:f,onImageRemove:g})=>{let[h,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(d||""),m=(0,c.useRef)(null),{toast:n}=(0,H.useToast)(),o=async a=>{let b=a.target.files?.[0];if(b){console.log("Starting featured image upload...",b.name,b.size),j(!0);try{let{data:{session:a},error:c}=await e.supabase.auth.getSession();if(c)throw console.error("Session error:",c),Error("Authentication session error");if(!a||!a.user)throw console.error("No active session or user"),Error("You must be logged in to upload images. Please refresh the page and try again.");console.log("User authenticated:",a.user.id);let d=b.name.split(".").pop(),g=`featured-${Date.now()}-${Math.random().toString(36).substring(2)}.${d}`,h=`featured-images/${g}`;console.log("Uploading to path:",h);let{data:i,error:j}=await e.supabase.storage.from("blog-media").upload(h,b,{cacheControl:"3600",upsert:!1});if(j)throw console.error("Upload error:",j),j;console.log("Upload successful:",i);let{data:l}=e.supabase.storage.from("blog-media").getPublicUrl(h);console.log("Public URL:",l.publicUrl);let m=k||b.name.split(".")[0];f(l.publicUrl,m),n({title:"Success",description:"Featured image uploaded successfully"})}catch(a){console.error("Error uploading featured image:",a),n({title:"Upload Error",description:a.message||"Failed to upload featured image. Please try again.",variant:"destructive"})}finally{j(!1),m.current&&(m.current.value="")}}};return(0,b.jsx)(p.Card,{className:"border border-gray-200 shadow-sm",children:(0,b.jsx)(p.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(r.Label,{className:"text-sm font-medium text-gray-900",children:"Featured Image"}),a?(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("img",{src:a,alt:k,className:"w-full h-48 object-cover rounded-lg border"}),(0,b.jsx)(i.Button,{variant:"destructive",size:"sm",onClick:g,className:"absolute top-2 right-2 h-8 w-8 p-0",children:(0,b.jsx)(C.X,{className:"w-4 h-4"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"altText",className:"text-sm font-medium text-gray-700",children:"Alt Text"}),(0,b.jsx)(q.Input,{id:"altText",value:k,onChange:b=>{var c;l(c=b.target.value),a&&f(a,c)},placeholder:"Describe the image for accessibility",className:"mt-1"})]})]}):(0,b.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center bg-gray-50 hover:bg-gray-100 transition-colors",children:[(0,b.jsx)(ag,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)(i.Button,{onClick:()=>m.current?.click(),disabled:h,className:"w-full bg-orange-500 hover:bg-orange-600",children:[(0,b.jsx)(X.Upload,{className:"w-4 h-4 mr-2"}),h?"Uploading...":"Upload Featured Image"]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 leading-tight",children:"Recommended size: 1200x630px for optimal social sharing"})]})]}),(0,b.jsx)("input",{ref:m,type:"file",accept:"image/*",onChange:o,className:"hidden"})]})})})},ai=({onInsertBlock:a,onOpenForm:c})=>{let{toast:d}=(0,H.useToast)(),e=[{name:"Free LLM Visibility Audit CTA",description:"Sleek CTA with animated particles",preview:(0,b.jsxs)("div",{className:"scale-75 origin-top-left transform w-full h-24 overflow-hidden bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl relative",children:[(0,b.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute top-1/4 left-1/4 w-0.5 h-0.5 bg-orange-400 rounded-full animate-bounce opacity-60"}),(0,b.jsx)("div",{className:"absolute top-1/3 right-1/3 w-0.5 h-0.5 bg-blue-400 rounded-full animate-bounce opacity-60"}),(0,b.jsx)("div",{className:"absolute bottom-1/3 left-1/3 w-0.5 h-0.5 bg-purple-400 rounded-full animate-bounce opacity-60"}),(0,b.jsx)("div",{className:"absolute bottom-1/4 right-1/4 w-0.5 h-0.5 bg-orange-300 rounded-full animate-bounce opacity-60"})]}),(0,b.jsxs)("div",{className:"relative z-10 p-3 text-center",children:[(0,b.jsx)("div",{className:"mb-1",children:(0,b.jsx)("span",{className:"text-orange-200 font-semibold text-xs",children:"Get Your Free LLM Visibility Audit"})}),(0,b.jsx)("button",{onClick:c,className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white px-3 py-1 text-xs font-bold rounded-lg shadow-lg",children:"Start Free Audit →"}),(0,b.jsx)("div",{className:"mt-1 text-slate-400 text-xs",children:"24-hour delivery"})]})]}),getContent:a=>`<div class="relative bg-gradient-to-br from-slate-800/95 to-slate-900/95 backdrop-blur-xl rounded-2xl p-8 border border-orange-400/30 shadow-xl overflow-hidden my-6 max-w-2xl mx-auto cta-block" data-block-type="floating-particles" data-block-id="${a}">
        <!-- Remove button -->
        <button class="cta-remove-btn absolute top-3 right-3 z-20 w-6 h-6 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center shadow-lg transition-all duration-200 text-sm font-bold leading-none" data-block-id="${a}" title="Remove this block" type="button">
          \xd7
        </button>
        
        <!-- Floating particles -->
        <div class="absolute inset-0 overflow-hidden">
          <div class="absolute top-1/4 left-1/4 w-1 h-1 bg-orange-400 rounded-full animate-bounce opacity-60"></div>
          <div class="absolute top-1/3 right-1/3 w-1 h-1 bg-blue-400 rounded-full animate-bounce opacity-60"></div>
          <div class="absolute bottom-1/3 left-1/3 w-1 h-1 bg-purple-400 rounded-full animate-bounce opacity-60"></div>
          <div class="absolute bottom-1/4 right-1/4 w-1 h-1 bg-orange-300 rounded-full animate-bounce opacity-60"></div>
        </div>
        
         <div class="relative z-10 text-center">
           <div class="mb-4">
             <h3 class="text-white font-black text-sm sm:text-xl mb-2 drop-shadow-lg leading-tight" style="color: white !important;">Get Your Free LLM Visibility Audit</h3>
             <p class="text-white/90 text-xs sm:text-sm font-semibold drop-shadow leading-tight" style="color: rgba(255, 255, 255, 0.9) !important;">Discover how visible your brand is across AI platforms</p>
           </div>
          
          <button onclick="window.parent.postMessage({type: 'OPEN_FORM'}, '*')" class="relative inline-block bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white px-8 py-3 text-lg font-bold rounded-xl shadow-xl transition-all duration-300 transform hover:scale-105 border border-orange-400/50 cursor-pointer border-none mb-4">
            Start Free Audit →
          </button>
          
          <div class="flex items-center justify-center gap-4 text-white/80 text-sm font-medium" style="color: rgba(255, 255, 255, 0.8) !important;">
            <div class="flex items-center gap-1">
              <div class="w-2 h-2 bg-orange-400 rounded-full animate-pulse"></div>
              <span>24-hour delivery</span>
            </div>
            <div class="flex items-center gap-1">
              <div class="w-2 h-2 bg-blue-400 rounded-full animate-pulse"></div>
              <span>No sales call</span>
            </div>
          </div>
        </div>
      </div>`}];return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Homepage CTAs"}),(0,b.jsx)("div",{className:"space-y-4",children:e.map((c,e)=>(0,b.jsxs)(p.Card,{className:"border border-gray-200 hover:shadow-md transition-shadow",children:[(0,b.jsx)(p.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(p.CardTitle,{className:"text-sm font-semibold text-gray-900",children:c.name}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:c.description})]}),(0,b.jsx)(i.Button,{size:"sm",onClick:()=>{var b;let e;return b=c.getContent,void((e=document.activeElement)&&e.disabled||(e&&(e.disabled=!0,setTimeout(()=>{e.disabled=!1},1e3)),a(b(`cta-block-${Date.now()}-${Math.random().toString(36).substr(2,9)}`)),d({title:"Success",description:"CTA block inserted into content"})))},className:"ml-3 bg-orange-500 hover:bg-orange-600",type:"button",children:"Insert"})]})}),(0,b.jsxs)(p.CardContent,{className:"pt-0",children:[(0,b.jsx)("div",{className:"text-xs text-gray-600 mb-2",children:"Preview:"}),(0,b.jsx)("div",{className:"border rounded-lg overflow-hidden bg-gray-50",children:c.preview})]})]},e))})]})},aj=({featuredImageUrl:a,featuredImageAlt:c,onFeaturedImageChange:d,onFeaturedImageRemove:e,onInsertBlock:f})=>(0,b.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,b.jsx)(ah,{imageUrl:a,imageAlt:c,onImageChange:d,onImageRemove:e}),(0,b.jsxs)(p.Card,{children:[(0,b.jsx)(p.CardHeader,{children:(0,b.jsx)(p.CardTitle,{className:"text-lg",children:"Content Blocks"})}),(0,b.jsx)(p.CardContent,{children:(0,b.jsx)(ai,{onInsertBlock:f,onOpenForm:()=>alert("Form popup would open on the live site")})})]})]});var ak=a.i(97226);let al=({post:a,onSave:d,onCancel:f})=>{let{formData:g,saving:h,handleInputChange:i,handleTagsChange:j,handleFeaturedImageChange:k,handleFeaturedImageRemove:l,handlePreview:m,handleSave:o}=(({post:a,onSave:b})=>{let[d,f]=(0,c.useState)({title:"",slug:"",content:"",excerpt:"",status:"draft",meta_title:"",meta_description:"",og_image_url:"",og_image_alt:"",featured_image_url:"",featured_image_alt:"",canonical_url:"",is_indexed:!0,tags:[],author_name:"TotalAuthority Team",...a}),[g,h]=(0,c.useState)(!1),{user:i,loading:j}=(0,ak.useAuth)(),{toast:k}=(0,H.useToast)();(0,c.useEffect)(()=>{if(d.title&&!a){let a=d.title.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");f(b=>({...b,slug:a}))}},[d.title,a]),(0,c.useEffect)(()=>{if(d.content){let a=Math.ceil(d.content.replace(/<[^>]*>/g,"").split(/\s+/).length/200);f(b=>({...b,reading_time:a}))}},[d.content]);let l=async c=>{h(!0);try{if(console.log("Starting save process..."),console.log("Current user:",i?.id),console.log("Auth loading state:",j),j){console.log("Auth still loading, waiting..."),k({title:"Loading",description:"Please wait while we verify your authentication..."}),h(!1);return}if(!i){console.error("No authenticated user found"),k({title:"Authentication Required",description:"You must be logged in to save posts. Please sign in and try again.",variant:"destructive"}),h(!1);return}let f={...d,status:c,author_id:i.id,published_at:"published"===c?new Date().toISOString():d.published_at};if(console.log("About to save post data:",f),a?.id){console.log("Updating existing post with ID:",a.id);let{error:b}=await e.supabase.from("blog_posts").update(f).eq("id",a.id);if(b)throw console.error("Update error:",b),b}else{console.log("Creating new post...");let{data:a,error:b}=await e.supabase.from("blog_posts").insert([f]).select().single();if(console.log("Insert result:",{data:a,error:b}),b)throw console.error("Insert error:",b),b;f.id=a.id}k({title:"Success",description:`Post ${"published"===c?"published":"saved as draft"} successfully`}),b(f)}catch(a){console.error("Error saving post:",a),k({title:"Save Error",description:`Failed to save post: ${a.message}`,variant:"destructive"})}finally{h(!1)}};return{formData:d,saving:g,handleInputChange:(a,b)=>{f(c=>({...c,[a]:b}))},handleTagsChange:a=>{f(b=>({...b,tags:a}))},handleFeaturedImageChange:(a,b)=>{f(c=>({...c,featured_image_url:a,featured_image_alt:b}))},handleFeaturedImageRemove:()=>{f(a=>({...a,featured_image_url:"",featured_image_alt:""}))},handlePreview:()=>{if(d.slug){let a=`/preview/${d.slug}`;window.open(a,"_blank")}else k({title:"Preview Not Available",description:"Please enter a title/slug first to preview the post.",variant:"destructive"})},handleSave:l}})({post:a,onSave:d});return(0,b.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,b.jsx)(n,{isEditing:!!a,saving:h,onPreview:m,onSaveDraft:()=>o("draft"),onPublish:()=>o("published"),onCancel:f}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,b.jsx)("div",{className:"lg:col-span-3",children:(0,b.jsx)(af,{formData:g,onInputChange:i,onTagsChange:j})}),(0,b.jsx)(aj,{featuredImageUrl:g.featured_image_url,featuredImageAlt:g.featured_image_alt,onFeaturedImageChange:k,onFeaturedImageRemove:l,onInsertBlock:a=>{i("content",g.content+"\n\n"+a)}})]})]})};a.s(["default",0,()=>{let a=(0,d.useParams)(),i=a?.id,j=(0,d.useRouter)(),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(!0),{toast:o}=(0,H.useToast)(),{user:p,loading:q}=(0,ak.useAuth)();(0,c.useEffect)(()=>{q||p||j.push("/auth")},[p,q,j]),(0,c.useEffect)(()=>{i&&"new"!==i?r():n(!1)},[i]);let r=async()=>{try{let{data:a,error:b}=await e.supabase.from("blog_posts").select("*").eq("id",i).single();if(b)throw b;l(a)}catch(a){console.error("Error fetching post:",a),o({title:"Error",description:"Failed to load blog post",variant:"destructive"}),j.push("/admin/posts")}finally{n(!1)}};return q||m?(0,b.jsxs)(h.SidebarProvider,{children:[(0,b.jsx)(f.AdminSidebar,{}),(0,b.jsxs)(h.SidebarInset,{children:[(0,b.jsx)(g.AdminHeader,{}),(0,b.jsx)("div",{className:"flex-1 p-8 pt-6",children:(0,b.jsx)("div",{className:"text-center py-8",children:"Loading..."})})]})]}):p?(0,b.jsxs)(h.SidebarProvider,{children:[(0,b.jsx)(f.AdminSidebar,{}),(0,b.jsxs)(h.SidebarInset,{children:[(0,b.jsx)(g.AdminHeader,{}),(0,b.jsx)("div",{className:"flex-1 p-8 pt-6",children:(0,b.jsx)(al,{post:k,onSave:()=>{o({title:"Success",description:"Blog post saved successfully"}),j.push("/admin/posts")},onCancel:()=>{j.push("/admin/posts")}})})]})]}):null}],11255)}];

//# sourceMappingURL=app_admin_posts_%5Bid%5D_page_tsx_cd1fe417._.js.map