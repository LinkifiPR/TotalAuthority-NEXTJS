module.exports=[88367,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(59476),f=a.i(82043),g=a.i(14727),h=a.i(77687),i=a.i(54235),j=a.i(83531),k=a.i(3130),l=a.i(40695),m=a.i(16201),n=a.i(41710),o=a.i(60246),p=a.i(4720);let q=(0,a.i(70106).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),r=({stats:a,loading:c,onRefresh:d})=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:"p-3 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl",children:(0,b.jsx)(m.CheckCircle,{className:"h-8 w-8 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-4xl font-bold tracking-tight bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Dashboard"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"Welcome back! Here's what's happening."})]})]}),(0,b.jsxs)(l.Button,{onClick:d,variant:"outline",disabled:c,className:"border-blue-200 hover:bg-blue-50 hover:border-blue-300",children:[(0,b.jsx)(q,{className:`h-4 w-4 mr-2 ${c?"animate-spin":""}`}),c?"Refreshing...":"Refresh Stats"]})]}),(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-6",children:[(0,b.jsx)(k.Card,{className:"relative overflow-hidden border-0 shadow-lg bg-gradient-to-br from-green-500 to-emerald-600 text-white",children:(0,b.jsxs)(k.CardContent,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-green-100 text-sm font-medium",children:"Completed Audits"}),(0,b.jsx)("p",{className:"text-3xl font-bold",children:c?"...":a.completedAudits})]}),(0,b.jsx)(m.CheckCircle,{className:"h-8 w-8 text-green-200"})]}),(0,b.jsx)("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"})]})}),(0,b.jsx)(k.Card,{className:"relative overflow-hidden border-0 shadow-lg bg-gradient-to-br from-amber-500 to-orange-600 text-white",children:(0,b.jsxs)(k.CardContent,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-amber-100 text-sm font-medium",children:"Pending Audits"}),(0,b.jsx)("p",{className:"text-3xl font-bold",children:c?"...":a.pendingAudits})]}),(0,b.jsx)(n.Clock,{className:"h-8 w-8 text-amber-200"})]}),(0,b.jsx)("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"})]})}),(0,b.jsx)(k.Card,{className:"relative overflow-hidden border-0 shadow-lg bg-gradient-to-br from-teal-500 to-cyan-600 text-white",children:(0,b.jsxs)(k.CardContent,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-teal-100 text-sm font-medium",children:"Paid Audits"}),(0,b.jsx)("p",{className:"text-3xl font-bold",children:c?"...":a.paidAudits})]}),(0,b.jsx)(p.FileText,{className:"h-8 w-8 text-teal-200"})]}),(0,b.jsx)("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"})]})}),(0,b.jsx)(k.Card,{className:"relative overflow-hidden border-0 shadow-lg bg-gradient-to-br from-blue-500 to-indigo-600 text-white",children:(0,b.jsxs)(k.CardContent,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-blue-100 text-sm font-medium",children:"Total Users"}),(0,b.jsx)("p",{className:"text-3xl font-bold",children:c?"...":a.totalUsers})]}),(0,b.jsx)(o.Users,{className:"h-8 w-8 text-blue-200"})]}),(0,b.jsx)("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"})]})}),(0,b.jsx)(k.Card,{className:"relative overflow-hidden border-0 shadow-lg bg-gradient-to-br from-purple-500 to-violet-600 text-white",children:(0,b.jsxs)(k.CardContent,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-purple-100 text-sm font-medium",children:"Published Posts"}),(0,b.jsx)("p",{className:"text-3xl font-bold",children:c?"...":a.publishedPosts})]}),(0,b.jsx)(p.FileText,{className:"h-8 w-8 text-purple-200"})]}),(0,b.jsx)("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"})]})}),(0,b.jsx)(k.Card,{className:"relative overflow-hidden border-0 shadow-lg bg-gradient-to-br from-pink-500 to-rose-600 text-white",children:(0,b.jsxs)(k.CardContent,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-pink-100 text-sm font-medium",children:"Draft Posts"}),(0,b.jsx)("p",{className:"text-3xl font-bold",children:c?"...":a.draftPosts})]}),(0,b.jsx)(p.FileText,{className:"h-8 w-8 text-pink-200"})]}),(0,b.jsx)("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"})]})})]})]});var s=a.i(24669),t=a.i(39761),u=a.i(90669);let v=()=>{let a=(0,d.useRouter)();return(0,b.jsxs)(k.Card,{className:"border-0 shadow-lg bg-gradient-to-br from-white to-blue-50",children:[(0,b.jsxs)(k.CardHeader,{children:[(0,b.jsxs)(k.CardTitle,{className:"flex items-center space-x-2 text-gray-800",children:[(0,b.jsx)(s.TrendingUp,{className:"h-6 w-6 text-blue-600"}),(0,b.jsx)("span",{children:"Quick Actions"})]}),(0,b.jsx)(k.CardDescription,{children:"Common administrative tasks"})]}),(0,b.jsxs)(k.CardContent,{className:"space-y-4",children:[(0,b.jsxs)(l.Button,{onClick:()=>a.push("/admin/audits"),className:"w-full justify-start bg-blue-600 hover:bg-blue-700",children:[(0,b.jsx)(t.BarChart3,{className:"h-4 w-4 mr-2"}),"Create New Audit Report"]}),(0,b.jsxs)(l.Button,{variant:"outline",onClick:()=>a.push("/admin/users"),className:"w-full justify-start border-blue-200 hover:bg-blue-50",children:[(0,b.jsx)(o.Users,{className:"h-4 w-4 mr-2"}),"Manage Users"]}),(0,b.jsxs)(l.Button,{variant:"outline",onClick:()=>a.push("/admin/settings"),className:"w-full justify-start border-blue-200 hover:bg-blue-50",children:[(0,b.jsx)(u.Activity,{className:"h-4 w-4 mr-2"}),"System Settings"]})]})]})},w=()=>(0,b.jsxs)(k.Card,{className:"border-0 shadow-lg bg-gradient-to-br from-white to-indigo-50",children:[(0,b.jsxs)(k.CardHeader,{children:[(0,b.jsx)(k.CardTitle,{className:"text-gray-800",children:"System Overview"}),(0,b.jsx)(k.CardDescription,{children:"Navigate to different sections of the admin panel"})]}),(0,b.jsx)(k.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-white/60 border border-gray-100",children:[(0,b.jsx)(t.BarChart3,{className:"h-5 w-5 text-blue-600"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-800",children:"Audit Reports"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Create and manage client audit reports"})]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-white/60 border border-gray-100",children:[(0,b.jsx)(o.Users,{className:"h-5 w-5 text-indigo-600"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-800",children:"User Management"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"View and manage registered users"})]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-white/60 border border-gray-100",children:[(0,b.jsx)(p.FileText,{className:"h-5 w-5 text-purple-600"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-800",children:"Content Management"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Create and manage blog content"})]})]})]})})]});var x=a.i(97226),y=a.i(41130);a.s(["default",0,()=>{let[a,k]=(0,c.useState)(0),[l,m]=(0,c.useState)({completedAudits:0,pendingAudits:0,paidAudits:0,totalUsers:0,publishedPosts:0,draftPosts:0}),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null),s=(0,d.usePathname)(),u=(0,d.useRouter)(),{toast:z}=(0,h.useToast)(),{user:A,loading:B}=(0,x.useAuth)();(0,c.useEffect)(()=>{let a=async()=>{if(A)try{let{data:a,error:b}=await y.supabase.from("profiles").select("role").eq("id",A.id).single();if(b)return void console.error("Error fetching user role:",b);q(a?.role||null)}catch(a){console.error("Error checking user role:",a)}else q(null)};B||a()},[A,B]),(0,c.useEffect)(()=>{B||A||u.push("/auth?admin=true")},[A,B,u]);let C=async()=>{o(!0);try{console.log("Fetching admin dashboard stats...");let a=await fetch("/api/admin/stats");if(!a.ok)throw Error(`Failed to fetch stats: ${a.statusText}`);let b=await a.json();b&&!b.error&&m({completedAudits:b.completedAudits||0,pendingAudits:b.pendingAudits||0,paidAudits:b.paidAudits||0,totalUsers:b.totalUsers||0,publishedPosts:b.publishedPosts||0,draftPosts:b.draftPosts||0})}catch(a){console.error("Error fetching dashboard stats:",a),z({title:"Error",description:"Failed to fetch dashboard statistics",variant:"destructive"})}finally{o(!1)}};return((0,c.useEffect)(()=>{A&&"admin"===p&&"/admin"===s&&C()},[A,p,s,a]),B)?(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):A?"admin"!==p?(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 flex items-center justify-center px-4",children:(0,b.jsxs)("div",{className:"w-full max-w-md text-center",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("div",{className:"p-3 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(t.BarChart3,{className:"h-8 w-8 text-white"})}),(0,b.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Admin Access Required"}),(0,b.jsx)("p",{className:"text-slate-600 mb-6",children:"Your account does not have admin privileges. Please contact an administrator for access."})]}),(0,b.jsx)("a",{href:"/dashboard",className:"inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 transition-colors",children:"Go to Dashboard"})]})}):"/admin/audits"===s?(0,b.jsxs)(g.SidebarProvider,{children:[(0,b.jsx)(e.AdminSidebar,{}),(0,b.jsxs)(g.SidebarInset,{children:[(0,b.jsx)(f.AdminHeader,{}),(0,b.jsxs)("div",{className:"flex-1 space-y-4 p-8 pt-6 bg-gradient-to-br from-gray-50 to-white min-h-screen",children:[(0,b.jsx)("div",{className:"flex items-center justify-between space-y-2",children:(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:"p-2 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-lg",children:(0,b.jsx)(t.BarChart3,{className:"h-6 w-6 text-white"})}),(0,b.jsx)("h2",{className:"text-3xl font-bold tracking-tight bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Audit Reports"})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,b.jsx)("div",{children:(0,b.jsx)(i.AdminAuditForm,{onAuditCreated:()=>{k(a=>a+1)}})}),(0,b.jsx)("div",{children:(0,b.jsx)(j.AuditDashboard,{refreshTrigger:a})})]})]})]})]}):(0,b.jsxs)(g.SidebarProvider,{children:[(0,b.jsx)(e.AdminSidebar,{}),(0,b.jsxs)(g.SidebarInset,{children:[(0,b.jsx)(f.AdminHeader,{}),(0,b.jsxs)("div",{className:"flex-1 space-y-6 p-8 pt-6 bg-gradient-to-br from-gray-50 to-white min-h-screen",children:[(0,b.jsx)(r,{stats:l,loading:n,onRefresh:C}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsx)(v,{}),(0,b.jsx)(w,{})]})]})]})]}):null}],88367)}];

//# sourceMappingURL=app_admin_page_tsx_bc658df7._.js.map