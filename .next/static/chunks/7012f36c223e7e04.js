(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,93595,42082,e=>{"use strict";var t,r=e.i(43476),a=e.i(71645),i=e.i(67881),s=e.i(23750),n=e.i(10708),l=e.i(84762),o=e.i(70065),d=e.i(91386),c=e.i(20682);e.s(["AdminAuditForm",0,({onAuditCreated:e})=>{let[t,u]=(0,a.useState)(""),[m,h]=(0,a.useState)(""),[f,g]=(0,a.useState)(!1),[p,x]=(0,a.useState)(!1),{toast:y}=(0,c.useToast)(),v=async r=>{r.preventDefault(),x(!0);try{let r=t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")+"-"+Date.now(),a=(()=>{let e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t="";for(let r=0;r<8;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t})(),{data:i,error:s}=await d.supabase.from("audit_reports").insert({client_name:t,share_url_slug:r,audit_code:a,audit_data:m}).select().single();if(s)throw s;y({title:"Success",description:`Audit created successfully! Code: ${a}`}),u(""),h(""),e()}catch(e){y({title:"Error",description:e.message||"Failed to create audit report",variant:"destructive"})}finally{x(!1)}};return(0,r.jsxs)(o.Card,{children:[(0,r.jsxs)(o.CardHeader,{children:[(0,r.jsx)(o.CardTitle,{children:"Create New Audit Report"}),(0,r.jsx)(o.CardDescription,{children:"Paste the audit data and generate a beautiful client dashboard"})]}),(0,r.jsx)(o.CardContent,{children:(0,r.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(n.Label,{htmlFor:"clientName",children:"Client Name"}),(0,r.jsx)(s.Input,{id:"clientName",value:t,onChange:e=>u(e.target.value),placeholder:"Enter client name",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(n.Label,{htmlFor:"auditData",children:"Audit Data"}),(0,r.jsx)("div",{className:"flex space-x-2 mb-2",children:(0,r.jsx)(i.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{u("Bramlett Partners"),h(JSON.stringify({discovery_coverage:"3 of 4 queries",knowledge_accuracy:"Partial (size, sales, rebrand noted; no founding year)",knowledge_panel:"Not Present",overall_score:"7",discovery_phrases:[{query:"best realtor in Austin",results:"Mark Martin â€¢ Roman Lopez â€¢ Eric Bramlett â€¢ Lindsay Neuren â€¢ Kent Redding â€¢ Ashley Stucki â€¢ Wade Giles â€¢ Bridget Ramey â€¢ Kumara Wilcoxon â€¢ Laurie Flood",mentioned:!0,mention_type:"Eric"},{query:"top real estate agents in Austin",results:"Eric Bramlett â€¢ Mark Martin â€¢ Roman Lopez â€¢ Ryan Smith â€¢ Kumara Wilcoxon â€¢ Wade Giles â€¢ Bridget Ramey â€¢ Kent Redding â€¢ Sara Coltharp â€¢ Chrissy Caputo",mentioned:!0,mention_type:"Eric"},{query:"best real estate agency in Austin",results:"Realty Austin â€¢ Keller Williams â€¢ Compass â€¢ Kuper Sotheby's â€¢ Modere Group â€¢ Bramlett Partners â€¢ Spyglass â€¢ Realty Texas â€¢ The Agency Texas â€¢ JBGoodwin",mentioned:!0,mention_type:"Partners"},{query:"best real estate brokerage in Austin",results:"Keller Williams â€¢ Compass â€¢ Realty Austin â€¢ Kuper Sotheby's â€¢ Realty Texas â€¢ JBGoodwin â€¢ The Agency Texas â€¢ Modere Group â€¢ Twelve Rivers â€¢ Moreland Properties",mentioned:!1,mention_type:""}],chatgpt_knowledge:"Bramlett Partners (formerly Bramlett Residential) is a top boutique brokerage in Austin with 115+ agents and over $800 million in 2024 sales. Founded by Eric Bramlett, a multiâ€‘year Austin Business Journal award winner, the firm is known for dataâ€‘driven marketing and 2,100+ fiveâ€‘star reviews on Google, Yelp, and Zillow.",knowledge_gaps:["No founding year (2003)","No mention of recent PT50 awards or RealTrends ranking","No citation links shown"],platforms:[{name:"LinkedIn company page",reviews:"~2,900 followers",rating:null},{name:"Google Business Profile",reviews:"1,200+",rating:"4.9"},{name:"Yelp profile",reviews:"400+",rating:"5.0"},{name:"Zillow profile",reviews:"1,100+",rating:"5.0"}],citation_domains:["yelp.com","listwithclever.com","expertise.com","bizjournals.com"],knowledge_panel_status:'None for "Bramlett Partners" or "Eric Bramlett (Realtor)"',schema_status:"No Organization markup detected on site",kg_implication:"Without a resolved entity, Gemini/Bing Chat have weaker trust signals; name change may delay panel creation.",chatgpt_insights:[{signal:"Highâ€‘authority listicles",evidence:"Clever Top Agents 2025 & Expertise Best Realtors Austin drive agent lists",implication:'Secure or refresh inclusionsâ€”critical for "brokerage" query too'},{signal:"Review volume & rating",evidence:"Agents/firms listed all carry â‰¥1,000 reviews & â‰¥4.8â˜… average",implication:"Maintain review velocity; expand to Trustpilot, HAR.com"},{signal:"Fresh dates (2025)",evidence:"Lists updated in 2025 outrank older posts",implication:"Issue PR & blog content dated 2025 featuring rebrand"},{signal:"Name consistency",evidence:'Model sometimes still sees "Bramlett Residential"',implication:'Standardise "Bramlett Partners (formerly ...)" across all bios and citations'},{signal:"Entity presence",evidence:"Realty Austin & Keller Williams have Knowledge Panels",implication:'Claiming a KP will improve inclusion for generic "brokerage" phrases'}],quick_wins:[{title:"Publish an Entity Home page detailing rebrand + add Organization schema (sameAs: LinkedIn, Yelp, Zillow, GBP)",description:"Create structured data markup to help search engines understand your business entity",effort:"Low",impact:"Foundation for Knowledge Panel"},{title:"Update all existing citations to unified name; request Google/Yelp merge old & new names",description:"Consolidate brand mentions across platforms",effort:"Low",impact:"Removes duplication & boosts model confidence"},{title:"Pitch Expertise.com & Clever with 2025 sales & awards data to lock list spots",description:"Proactively reach out to list publishers with updated information",effort:"Med",impact:'Likely adds Bramlett to "brokerage" query list'},{title:"Syndicate a BusinessWire press release on rebrand & $800M milestone (indexed 2025)",description:"Generate authoritative news coverage of company achievements",effort:"Med",impact:"Generates fresh highâ€‘authority citations"}],next_steps:["Execute Quick Wins; reâ€‘check ChatGPT in 4â€“6 weeks","Begin Knowledge Panel path: claim GBP â†’ add schema â†’ secure press coverage",'Consider Deepâ€‘Dive Audit to assess Claude, Gemini & Perplexity visibility and run buyerâ€‘journey queries (e.g., "best neighborhood agent for relocating families in Austin")']},null,2))},children:"Load Sample Data (Bramlett Partners)"})}),(0,r.jsx)(l.Textarea,{id:"auditData",value:m,onChange:e=>h(e.target.value),placeholder:"Paste the audit data here (JSON or plain text)",className:"min-h-[300px] font-mono text-sm",required:!0})]}),(0,r.jsx)(i.Button,{type:"submit",disabled:f||p,className:"w-full",children:f?"Creating...":"Generate Audit Report"})]})})]})}],93595);var u=e.i(17923),m=e.i(25652),h=e.i(61911),f=e.i(3116);let g=({totalAudits:e,completedCount:t,pendingCount:a,activeCount:i})=>(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsx)(o.Card,{className:"bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200",children:(0,r.jsx)(o.CardContent,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-blue-600 mb-1",children:"Total Audits"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-blue-900",children:e})]}),(0,r.jsx)(u.BarChart3,{className:"w-8 h-8 text-blue-600"})]})})}),(0,r.jsx)(o.Card,{className:"bg-gradient-to-r from-green-50 to-green-100 border-green-200",children:(0,r.jsx)(o.CardContent,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-green-600 mb-1",children:"Completed"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-900",children:t})]}),(0,r.jsx)(m.TrendingUp,{className:"w-8 h-8 text-green-600"})]})})}),(0,r.jsx)(o.Card,{className:"bg-gradient-to-r from-orange-50 to-orange-100 border-orange-200",children:(0,r.jsx)(o.CardContent,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-orange-600 mb-1",children:"Pending"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-orange-900",children:a})]}),(0,r.jsx)(f.Clock,{className:"w-8 h-8 text-orange-600"})]})})}),(0,r.jsx)(o.Card,{className:"bg-gradient-to-r from-purple-50 to-purple-100 border-purple-200",children:(0,r.jsx)(o.CardContent,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-purple-600 mb-1",children:"Active"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-purple-900",children:i})]}),(0,r.jsx)(h.Users,{className:"w-8 h-8 text-purple-600"})]})})})]});var p=e.i(75254);let x=(0,p.default)("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),y=({showArchived:e,activeCount:t,archivedCount:a,onToggleArchived:s})=>(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)(i.Button,{variant:e?"outline":"default",size:"sm",onClick:()=>s(!1),children:["Active (",t,")"]}),(0,r.jsxs)(i.Button,{variant:e?"default":"outline",size:"sm",onClick:()=>s(!0),children:[(0,r.jsx)(x,{className:"w-4 h-4 mr-2"}),"Archived (",a,")"]})]});var v=e.i(20783),b=e.i(30030),w=e.i(81140),_=e.i(69340),j=e.i(99682),k=e.i(35804),N=e.i(96626),S=e.i(48425),C="Checkbox",[A,F]=(0,b.createContextScope)(C),[D,M]=A(C),E=a.forwardRef((e,t)=>{let{__scopeCheckbox:i,name:s,checked:n,defaultChecked:l,required:o,disabled:d,value:c="on",onCheckedChange:u,form:m,...h}=e,[f,g]=a.useState(null),p=(0,v.useComposedRefs)(t,e=>g(e)),x=a.useRef(!1),y=!f||m||!!f.closest("form"),[b=!1,j]=(0,_.useControllableState)({prop:n,defaultProp:l,onChange:u}),k=a.useRef(b);return a.useEffect(()=>{let e=f?.form;if(e){let t=()=>j(k.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[f,j]),(0,r.jsxs)(D,{scope:i,state:b,disabled:d,children:[(0,r.jsx)(S.Primitive.button,{type:"button",role:"checkbox","aria-checked":R(b)?"mixed":b,"aria-required":o,"data-state":L(b),"data-disabled":d?"":void 0,disabled:d,value:c,...h,ref:p,onKeyDown:(0,w.composeEventHandlers)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,w.composeEventHandlers)(e.onClick,e=>{j(e=>!!R(e)||!e),y&&(x.current=e.isPropagationStopped(),x.current||e.stopPropagation())})}),y&&(0,r.jsx)(P,{control:f,bubbles:!x.current,name:s,value:c,checked:b,required:o,disabled:d,form:m,style:{transform:"translateX(-100%)"},defaultChecked:!R(l)&&l})]})});E.displayName=C;var V="CheckboxIndicator",T=a.forwardRef((e,t)=>{let{__scopeCheckbox:a,forceMount:i,...s}=e,n=M(V,a);return(0,r.jsx)(N.Presence,{present:i||R(n.state)||!0===n.state,children:(0,r.jsx)(S.Primitive.span,{"data-state":L(n.state),"data-disabled":n.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});T.displayName=V;var P=e=>{let{control:t,checked:i,bubbles:s=!0,defaultChecked:n,...l}=e,o=a.useRef(null),d=(0,j.usePrevious)(i),c=(0,k.useSize)(t);a.useEffect(()=>{let e=o.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(d!==i&&t){let r=new Event("click",{bubbles:s});e.indeterminate=R(i),t.call(e,!R(i)&&i),e.dispatchEvent(r)}},[d,i,s]);let u=a.useRef(!R(i)&&i);return(0,r.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n??u.current,...l,tabIndex:-1,ref:o,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function R(e){return"indeterminate"===e}function L(e){return R(e)?"indeterminate":e?"checked":"unchecked"}var B=e.i(43531),O=e.i(47163);let z=a.forwardRef(({className:e,...t},a)=>(0,r.jsx)(E,{ref:a,className:(0,O.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:(0,r.jsx)(T,{className:(0,O.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(B.Check,{className:"h-4 w-4"})})}));z.displayName=E.displayName;let q=(0,p.default)("ArchiveRestore",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h2",key:"tvwodi"}],["path",{d:"M20 8v11a2 2 0 0 1-2 2h-2",key:"1gkqxj"}],["path",{d:"m9 15 3-3 3 3",key:"1pd0qc"}],["path",{d:"M12 12v9",key:"192myk"}]]);var I=e.i(70756);let W=(0,p.default)("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),U=({selectedCount:e,totalCount:t,showArchived:a,onSelectAll:s,onBulkArchive:n,onBulkRestore:l,onBulkLock:o,onBulkUnlock:d})=>0===t?null:(0,r.jsxs)("div",{className:"flex items-center justify-between pb-2 border-b",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(z,{checked:e===t&&t>0,onCheckedChange:s}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Select All"})]}),e>0&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[e," selected"]}),o&&(0,r.jsxs)(i.Button,{size:"sm",variant:"outline",onClick:o,children:[(0,r.jsx)(I.Lock,{className:"w-4 h-4 mr-1"}),"Lock"]}),d&&(0,r.jsxs)(i.Button,{size:"sm",variant:"outline",onClick:d,children:[(0,r.jsx)(W,{className:"w-4 h-4 mr-1"}),"Unlock"]}),a?(0,r.jsxs)(i.Button,{size:"sm",variant:"outline",onClick:l,children:[(0,r.jsx)(q,{className:"w-4 h-4 mr-1"}),"Restore"]}):(0,r.jsxs)(i.Button,{size:"sm",variant:"outline",onClick:n,children:[(0,r.jsx)(x,{className:"w-4 h-4 mr-1"}),"Archive"]})]})]}),H=({showArchived:e,activeCount:t,archivedCount:a,selectedAudits:i,totalCount:s,onToggleArchived:n,onSelectAll:l,onBulkArchive:d,onBulkRestore:c,onBulkLock:m,onBulkUnlock:h})=>(0,r.jsx)(o.CardHeader,{className:"bg-gradient-to-r from-gray-50 to-white border-b",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)(o.CardTitle,{className:"flex items-center gap-2 text-xl",children:[(0,r.jsx)(u.BarChart3,{className:"w-6 h-6 text-blue-600"}),"Audit Reports Dashboard"]}),(0,r.jsx)(o.CardDescription,{className:"mt-1",children:"Manage and track all audit reports with advanced filtering and sorting"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(y,{showArchived:e,activeCount:t,archivedCount:a,onToggleArchived:n}),i.size>0&&(0,r.jsx)(U,{selectedCount:i.size,totalCount:s,showArchived:e,onSelectAll:l,onBulkArchive:d,onBulkRestore:c,onBulkLock:m,onBulkUnlock:h})]})]})}),G={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Y(e){return (t={})=>{let r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}let $={date:Y({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Y({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Y({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},K={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function X(e){return(t,r)=>{let a;if("formatting"===(r?.context?String(r.context):"standalone")&&e.formattingValues){let t=e.defaultFormattingWidth||e.defaultWidth,i=r?.width?String(r.width):t;a=e.formattingValues[i]||e.formattingValues[t]}else{let t=e.defaultWidth,i=r?.width?String(r.width):e.defaultWidth;a=e.values[i]||e.values[t]}return a[e.argumentCallback?e.argumentCallback(t):t]}}function Q(e){return(t,r={})=>{let a,i=r.width,s=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],n=t.match(s);if(!n)return null;let l=n[0],o=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],d=Array.isArray(o)?function(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}(o,e=>e.test(l)):function(e,t){for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}(o,e=>e.test(l));return a=e.valueCallback?e.valueCallback(d):d,{value:a=r.valueCallback?r.valueCallback(a):a,rest:t.slice(l.length)}}}let J={code:"en-US",formatDistance:(e,t,r)=>{let a,i=G[e];if(a="string"==typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),r?.addSuffix)if(r.comparison&&r.comparison>0)return"in "+a;else return a+" ago";return a},formatLong:$,formatRelative:(e,t,r,a)=>K[e],localize:{ordinalNumber:(e,t)=>{let r=Number(e),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:X({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:X({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:X({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:X({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:X({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(t={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,r={})=>{let a=e.match(t.matchPattern);if(!a)return null;let i=a[0],s=e.match(t.parsePattern);if(!s)return null;let n=t.valueCallback?t.valueCallback(s[0]):s[0];return{value:n=r.valueCallback?r.valueCallback(n):n,rest:e.slice(i.length)}}),era:Q({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Q({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:Q({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Q({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Q({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},Z={};function ee(e){let t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):new Date("number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?e:NaN)}function et(e){let t=ee(e);return t.setHours(0,0,0,0),t}function er(e){let t=ee(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),e-r}function ea(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function ei(e,t){let r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??Z.weekStartsOn??Z.locale?.options?.weekStartsOn??0,a=ee(e),i=a.getDay();return a.setDate(a.getDate()-(7*(i<r)+i-r)),a.setHours(0,0,0,0),a}function es(e){return ei(e,{weekStartsOn:1})}function en(e){let t=ee(e),r=t.getFullYear(),a=ea(e,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);let i=es(a),s=ea(e,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);let n=es(s);return t.getTime()>=i.getTime()?r+1:t.getTime()>=n.getTime()?r:r-1}function el(e,t){let r=ee(e),a=r.getFullYear(),i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??Z.firstWeekContainsDate??Z.locale?.options?.firstWeekContainsDate??1,s=ea(e,0);s.setFullYear(a+1,0,i),s.setHours(0,0,0,0);let n=ei(s,t),l=ea(e,0);l.setFullYear(a,0,i),l.setHours(0,0,0,0);let o=ei(l,t);return r.getTime()>=n.getTime()?a+1:r.getTime()>=o.getTime()?a:a-1}function eo(e,t){let r=Math.abs(e).toString().padStart(t,"0");return(e<0?"-":"")+r}let ed={y(e,t){let r=e.getFullYear(),a=r>0?r:1-r;return eo("yy"===t?a%100:a,t.length)},M(e,t){let r=e.getMonth();return"M"===t?String(r+1):eo(r+1,2)},d:(e,t)=>eo(e.getDate(),t.length),a(e,t){let r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return"am"===r?"a.m.":"p.m."}},h:(e,t)=>eo(e.getHours()%12||12,t.length),H:(e,t)=>eo(e.getHours(),t.length),m:(e,t)=>eo(e.getMinutes(),t.length),s:(e,t)=>eo(e.getSeconds(),t.length),S(e,t){let r=t.length;return eo(Math.trunc(e.getMilliseconds()*Math.pow(10,r-3)),t.length)}},ec={G:function(e,t,r){let a=+(e.getFullYear()>0);switch(t){case"G":case"GG":case"GGG":return r.era(a,{width:"abbreviated"});case"GGGGG":return r.era(a,{width:"narrow"});default:return r.era(a,{width:"wide"})}},y:function(e,t,r){if("yo"===t){let t=e.getFullYear();return r.ordinalNumber(t>0?t:1-t,{unit:"year"})}return ed.y(e,t)},Y:function(e,t,r,a){let i=el(e,a),s=i>0?i:1-i;return"YY"===t?eo(s%100,2):"Yo"===t?r.ordinalNumber(s,{unit:"year"}):eo(s,t.length)},R:function(e,t){return eo(en(e),t.length)},u:function(e,t){return eo(e.getFullYear(),t.length)},Q:function(e,t,r){let a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return eo(a,2);case"Qo":return r.ordinalNumber(a,{unit:"quarter"});case"QQQ":return r.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(a,{width:"narrow",context:"formatting"});default:return r.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,r){let a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return eo(a,2);case"qo":return r.ordinalNumber(a,{unit:"quarter"});case"qqq":return r.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(a,{width:"narrow",context:"standalone"});default:return r.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,r){let a=e.getMonth();switch(t){case"M":case"MM":return ed.M(e,t);case"Mo":return r.ordinalNumber(a+1,{unit:"month"});case"MMM":return r.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(a,{width:"narrow",context:"formatting"});default:return r.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,r){let a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return eo(a+1,2);case"Lo":return r.ordinalNumber(a+1,{unit:"month"});case"LLL":return r.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(a,{width:"narrow",context:"standalone"});default:return r.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,r,a){let i,s,n,l,o=Math.round((ei(i=ee(e),a)-(s=a?.firstWeekContainsDate??a?.locale?.options?.firstWeekContainsDate??Z.firstWeekContainsDate??Z.locale?.options?.firstWeekContainsDate??1,n=el(i,a),(l=ea(i,0)).setFullYear(n,0,s),l.setHours(0,0,0,0),ei(l,a)))/6048e5)+1;return"wo"===t?r.ordinalNumber(o,{unit:"week"}):eo(o,t.length)},I:function(e,t,r){let a,i,s,n=Math.round((es(a=ee(e))-(i=en(a),(s=ea(a,0)).setFullYear(i,0,4),s.setHours(0,0,0,0),es(s)))/6048e5)+1;return"Io"===t?r.ordinalNumber(n,{unit:"week"}):eo(n,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getDate(),{unit:"date"}):ed.d(e,t)},D:function(e,t,r){var a;let i,s,n,l,o,d=(i=ee(e),s=ee(i),(n=ea(i,0)).setFullYear(s.getFullYear(),0,1),n.setHours(0,0,0,0),a=n,l=et(i),o=et(a),Math.round((l-er(l)-(o-er(o)))/864e5)+1);return"Do"===t?r.ordinalNumber(d,{unit:"dayOfYear"}):eo(d,t.length)},E:function(e,t,r){let a=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(a,{width:"short",context:"formatting"});default:return r.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,r,a){let i=e.getDay(),s=(i-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return eo(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,r,a){let i=e.getDay(),s=(i-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return eo(s,t.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,r){let a=e.getDay(),i=0===a?7:a;switch(t){case"i":return String(i);case"ii":return eo(i,t.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(a,{width:"short",context:"formatting"});default:return r.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,r){let a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){let a,i=e.getHours();switch(a=12===i?"noon":0===i?"midnight":i/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){let a,i=e.getHours();switch(a=i>=17?"evening":i>=12?"afternoon":i>=4?"morning":"night",t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),r.ordinalNumber(t,{unit:"hour"})}return ed.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getHours(),{unit:"hour"}):ed.H(e,t)},K:function(e,t,r){let a=e.getHours()%12;return"Ko"===t?r.ordinalNumber(a,{unit:"hour"}):eo(a,t.length)},k:function(e,t,r){let a=e.getHours();return(0===a&&(a=24),"ko"===t)?r.ordinalNumber(a,{unit:"hour"}):eo(a,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):ed.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getSeconds(),{unit:"second"}):ed.s(e,t)},S:function(e,t){return ed.S(e,t)},X:function(e,t,r){let a=e.getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return em(a);case"XXXX":case"XX":return eh(a);default:return eh(a,":")}},x:function(e,t,r){let a=e.getTimezoneOffset();switch(t){case"x":return em(a);case"xxxx":case"xx":return eh(a);default:return eh(a,":")}},O:function(e,t,r){let a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+eu(a,":");default:return"GMT"+eh(a,":")}},z:function(e,t,r){let a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+eu(a,":");default:return"GMT"+eh(a,":")}},t:function(e,t,r){return eo(Math.trunc(e.getTime()/1e3),t.length)},T:function(e,t,r){return eo(e.getTime(),t.length)}};function eu(e,t=""){let r=e>0?"-":"+",a=Math.abs(e),i=Math.trunc(a/60),s=a%60;return 0===s?r+String(i):r+String(i)+t+eo(s,2)}function em(e,t){return e%60==0?(e>0?"-":"+")+eo(Math.abs(e)/60,2):eh(e,t)}function eh(e,t=""){let r=Math.abs(e);return(e>0?"-":"+")+eo(Math.trunc(r/60),2)+t+eo(r%60,2)}let ef=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},eg=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},ep={p:eg,P:(e,t)=>{let r,a=e.match(/(P+)(p+)?/)||[],i=a[1],s=a[2];if(!s)return ef(e,t);switch(i){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",ef(i,t)).replace("{{time}}",eg(s,t))}},ex=/^D+$/,ey=/^Y+$/,ev=["D","DD","YY","YYYY"],eb=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ew=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,e_=/^'([^]*?)'?$/,ej=/''/g,ek=/[a-zA-Z]/;function eN(e,t,r){let a=r?.locale??Z.locale??J,i=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??Z.firstWeekContainsDate??Z.locale?.options?.firstWeekContainsDate??1,s=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??Z.weekStartsOn??Z.locale?.options?.weekStartsOn??0,n=ee(e);if(!((n instanceof Date||"object"==typeof n&&"[object Date]"===Object.prototype.toString.call(n)||"number"==typeof n)&&!isNaN(Number(ee(n)))))throw RangeError("Invalid time value");let l=t.match(ew).map(e=>{let t=e[0];return"p"===t||"P"===t?(0,ep[t])(e,a.formatLong):e}).join("").match(eb).map(e=>{if("''"===e)return{isToken:!1,value:"'"};let t=e[0];if("'"===t){var r;let t;return{isToken:!1,value:(t=(r=e).match(e_))?t[1].replace(ej,"'"):r}}if(ec[t])return{isToken:!0,value:e};if(t.match(ek))throw RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});a.localize.preprocessor&&(l=a.localize.preprocessor(n,l));let o={firstWeekContainsDate:i,weekStartsOn:s,locale:a};return l.map(i=>{if(!i.isToken)return i.value;let s=i.value;return(!r?.useAdditionalWeekYearTokens&&ey.test(s)||!r?.useAdditionalDayOfYearTokens&&ex.test(s))&&function(e,t,r){var a,i,s;let n,l=(a=e,i=t,s=r,n="Y"===a[0]?"years":"days of the month",`Use \`${a.toLowerCase()}\` instead of \`${a}\` (in \`${i}\`) for formatting ${n} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`);if(console.warn(l),ev.includes(e))throw RangeError(l)}(s,t,String(e)),(0,ec[s[0]])(n,s,a.localize,o)}).join("")}var eS=e.i(94179),eC=e.i(55436),eA=e.i(62870),eF=e.i(97548),eD=e.i(37727),eM=e.i(95468),eE=e.i(87316);let eV=({searchTerm:e,statusFilter:t,reviewStatusFilter:a,groupBy:n,filteredCount:l,onSearchChange:d,onStatusFilterChange:c,onReviewStatusFilterChange:u,onGroupByChange:m,onClearAllFilters:g})=>{let p=e||"all"!==t||"all"!==a||"none"!==n;return(0,r.jsxs)(o.Card,{className:"border-2 border-dashed border-blue-200 hover:border-blue-400 transition-all duration-300 shadow-lg bg-gradient-to-r from-blue-50 to-indigo-50",children:[(0,r.jsx)(o.CardHeader,{className:"pb-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-3 bg-blue-100 rounded-xl shadow-sm",children:(0,r.jsx)(eF.Filter,{className:"w-6 h-6 text-blue-700"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(o.CardTitle,{className:"text-xl text-blue-900 font-bold",children:"Advanced Search & Filters"}),(0,r.jsx)(o.CardDescription,{className:"text-sm text-blue-700 mt-1",children:"Powerful tools to find and organize your audit reports efficiently"})]})]}),p&&(0,r.jsxs)(i.Button,{variant:"ghost",size:"sm",onClick:g,className:"text-blue-600 hover:text-blue-800 hover:bg-blue-100 transition-colors duration-200",children:[(0,r.jsx)(eD.X,{className:"w-4 h-4 mr-1"}),"Clear all filters"]})]})}),(0,r.jsx)(o.CardContent,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(eC.Search,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-blue-500"}),(0,r.jsx)(s.Input,{placeholder:"Search by client name, audit code, or reviewer...",value:e,onChange:e=>d(e.target.value),className:"pl-12 h-14 text-base border-2 border-blue-200 focus:border-blue-500 focus:ring-blue-500 bg-white shadow-sm rounded-xl"}),e&&(0,r.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>d(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0 hover:bg-blue-100",children:(0,r.jsx)(eD.X,{className:"w-4 h-4"})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("label",{className:"text-sm font-semibold text-blue-800 flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full shadow-sm"}),"Status Filter"]}),(0,r.jsxs)(eA.Select,{value:t,onValueChange:c,children:[(0,r.jsx)(eA.SelectTrigger,{className:"h-12 border-2 border-blue-200 focus:border-blue-500 bg-white shadow-sm",children:(0,r.jsx)(eA.SelectValue,{placeholder:"All Statuses"})}),(0,r.jsxs)(eA.SelectContent,{children:[(0,r.jsx)(eA.SelectItem,{value:"all",children:"All Statuses"}),(0,r.jsx)(eA.SelectItem,{value:"active",children:"ðŸŸ¢ Active"}),(0,r.jsx)(eA.SelectItem,{value:"archived",children:"ðŸ“¦ Archived"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("label",{className:"text-sm font-semibold text-blue-800 flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full shadow-sm"}),"Review Status"]}),(0,r.jsxs)(eA.Select,{value:a,onValueChange:u,children:[(0,r.jsx)(eA.SelectTrigger,{className:"h-12 border-2 border-blue-200 focus:border-blue-500 bg-white shadow-sm",children:(0,r.jsx)(eA.SelectValue,{placeholder:"All Reviews"})}),(0,r.jsxs)(eA.SelectContent,{children:[(0,r.jsx)(eA.SelectItem,{value:"all",children:"All Reviews"}),(0,r.jsx)(eA.SelectItem,{value:"completed",children:"âœ… Completed"}),(0,r.jsx)(eA.SelectItem,{value:"pending",children:"â³ Pending"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("label",{className:"text-sm font-semibold text-blue-800 flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full shadow-sm"}),"Group By"]}),(0,r.jsxs)(eA.Select,{value:n,onValueChange:e=>m(e),children:[(0,r.jsx)(eA.SelectTrigger,{className:"h-12 border-2 border-blue-200 focus:border-blue-500 bg-white shadow-sm",children:(0,r.jsx)(eA.SelectValue,{placeholder:"No Grouping"})}),(0,r.jsxs)(eA.SelectContent,{children:[(0,r.jsx)(eA.SelectItem,{value:"none",children:"ðŸ“‹ No Grouping"}),(0,r.jsx)(eA.SelectItem,{value:"month",children:"ðŸ“… By Month"}),(0,r.jsx)(eA.SelectItem,{value:"status",children:"ðŸ·ï¸ By Status"}),(0,r.jsx)(eA.SelectItem,{value:"review_status",children:"âœ… By Review Status"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("label",{className:"text-sm font-semibold text-blue-800 flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-orange-500 rounded-full shadow-sm"}),"Results"]}),(0,r.jsxs)("div",{className:"flex items-center h-12 px-4 bg-white border-2 border-blue-200 rounded-lg shadow-sm",children:[(0,r.jsx)(h.Users,{className:"w-5 h-5 text-blue-500 mr-3"}),(0,r.jsxs)("span",{className:"text-base font-semibold text-blue-800",children:[l," audit",1!==l?"s":""]})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-3 pt-4 border-t border-blue-200",children:[(0,r.jsx)("span",{className:"text-sm font-semibold text-blue-700 mr-3 flex items-center",children:"âš¡ Quick filters:"}),(0,r.jsxs)(i.Button,{variant:"pending"===a?"default":"outline",size:"sm",onClick:()=>u("pending"===a?"all":"pending"),className:"h-8 text-sm bg-orange-100 text-orange-800 border-orange-300 hover:bg-orange-200 transition-all duration-200",children:[(0,r.jsx)(f.Clock,{className:"w-4 h-4 mr-2"}),"Pending Reviews"]}),(0,r.jsxs)(i.Button,{variant:"completed"===a?"default":"outline",size:"sm",onClick:()=>u("completed"===a?"all":"completed"),className:"h-8 text-sm bg-green-100 text-green-800 border-green-300 hover:bg-green-200 transition-all duration-200",children:[(0,r.jsx)(eM.CheckCircle2,{className:"w-4 h-4 mr-2"}),"Completed"]}),(0,r.jsxs)(i.Button,{variant:"month"===n?"default":"outline",size:"sm",onClick:()=>m("month"===n?"none":"month"),className:"h-8 text-sm bg-purple-100 text-purple-800 border-purple-300 hover:bg-purple-200 transition-all duration-200",children:[(0,r.jsx)(eE.Calendar,{className:"w-4 h-4 mr-2"}),"Group by Month"]})]})]})})]})};var eT=e.i(55900),eP=e.i(64659);let eR=({audits:e,selectedAudits:t,sortField:a,sortDirection:s,onSort:n,onSelectAll:l})=>{let o=e.length>0&&t.size===e.length,d=t.size>0&&t.size<e.length,c=({field:e,children:t})=>(0,r.jsxs)(i.Button,{variant:"ghost",size:"sm",onClick:()=>n(e),className:"h-auto p-1 font-medium justify-start",children:[t,a===e&&("asc"===s?(0,r.jsx)(eT.ChevronUp,{className:"w-4 h-4 ml-1"}):(0,r.jsx)(eP.ChevronDown,{className:"w-4 h-4 ml-1"}))]});return(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"p-4 text-left",children:(0,r.jsx)(z,{checked:o,onCheckedChange:l,className:d?"data-[state=checked]:bg-blue-600":""})}),(0,r.jsx)("th",{className:"p-4 text-left",children:(0,r.jsx)(c,{field:"client_name",children:"Client"})}),(0,r.jsx)("th",{className:"p-4 text-left",children:(0,r.jsx)(c,{field:"created_at",children:"Created"})}),(0,r.jsx)("th",{className:"p-4 text-left",children:(0,r.jsx)(c,{field:"status",children:"Status"})}),(0,r.jsx)("th",{className:"p-4 text-left",children:(0,r.jsx)(c,{field:"review_status",children:"Review"})}),(0,r.jsx)("th",{className:"p-4 text-left",children:(0,r.jsx)(c,{field:"reviewer_name",children:"Reviewer"})}),(0,r.jsx)("th",{className:"p-4 text-left",children:"Lock Status"}),(0,r.jsx)("th",{className:"p-4 text-left",children:"Code"}),(0,r.jsx)("th",{className:"p-4 text-left",children:"Actions"})]})})};var eL=e.i(28231);let eB=(0,p.default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var eO=e.i(86536),ez=e.i(27612),eq=e.i(88511);let eI=(0,p.default)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);var eW=e.i(84614);let eU=({audit:e,isSelected:t,onSelectAudit:a,onCopyAuditCode:s,onViewAudit:n,onCopyShareUrl:l,onDeleteAudit:o,onEditAudit:d,onToggleLock:c})=>{let u=e.user_audit_codes&&e.user_audit_codes.length>0,m=u?e.user_audit_codes[0]:null;return(0,r.jsxs)("tr",{className:`border-b ${u?"bg-green-100 hover:bg-green-200":"hover:bg-gray-50"}`,children:[(0,r.jsx)("td",{className:"p-4",children:(0,r.jsx)(z,{checked:t,onCheckedChange:t=>a(e.id,!!t)})}),(0,r.jsx)("td",{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.client_name}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.share_url_slug})]}),u&&(0,r.jsx)(eL.TooltipProvider,{children:(0,r.jsxs)(eL.Tooltip,{children:[(0,r.jsx)(eL.TooltipTrigger,{children:(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)(eW.User,{className:"w-4 h-4 text-green-600"})})}),(0,r.jsxs)(eL.TooltipContent,{children:[(0,r.jsxs)("p",{children:["Claimed by: ",m?.profiles?.email||"Unknown user"]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:m?.created_at?eN(new Date(m.created_at),"MMM d, yyyy h:mm a"):""})]})]})})]})}),(0,r.jsxs)("td",{className:"p-4 text-sm text-gray-600",children:[(0,r.jsx)("div",{children:eN(new Date(e.created_at),"MMM d, yyyy")}),(0,r.jsx)("div",{className:"text-xs",children:eN(new Date(e.created_at),"h:mm a")})]}),(0,r.jsx)("td",{className:"p-4",children:(0,r.jsx)(eS.Badge,{variant:"active"===e.status?"default":"secondary",children:e.status})}),(0,r.jsx)("td",{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(eS.Badge,{variant:"completed"===e.review_status?"default":"secondary",className:"completed"===e.review_status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",children:"completed"===e.review_status?"Completed":"Pending"}),"completed"===e.review_status&&(0,r.jsx)(eM.CheckCircle2,{className:"w-4 h-4 text-green-500"})]})}),(0,r.jsx)("td",{className:"p-4 text-sm",children:e.reviewer_name||"Not assigned"}),(0,r.jsx)("td",{className:"px-4 py-4 text-sm text-gray-600",children:(0,r.jsx)("div",{className:"flex items-center space-x-2",children:e.is_locked?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I.Lock,{className:"w-4 h-4 text-orange-500"}),(0,r.jsxs)("span",{className:"text-orange-600 font-medium",children:["Locked ",e.snapshot_version?`(${e.snapshot_version.toUpperCase()})`:"(Legacy)"]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(W,{className:"w-4 h-4 text-green-500"}),(0,r.jsx)("span",{className:"text-green-600",children:"Live"})]})})}),(0,r.jsx)("td",{className:"p-4 text-sm font-mono",children:e.audit_code||"N/A"}),(0,r.jsx)("td",{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[c&&(0,r.jsx)(i.Button,{size:"sm",variant:"outline",onClick:()=>{c&&c(e.id,!!e.is_locked)},title:e.is_locked?"Unlock Audit":"Lock Audit",className:e.is_locked?"text-red-600":"text-green-600",children:e.is_locked?(0,r.jsx)(W,{className:"w-4 h-4"}):(0,r.jsx)(I.Lock,{className:"w-4 h-4"})}),(0,r.jsx)(i.Button,{size:"sm",variant:"outline",onClick:()=>{d(e.id)},title:"completed"===e.review_status?"Edit Review":"Complete Review",className:"pending"===e.review_status?"bg-yellow-50 border-yellow-200 text-yellow-700 hover:bg-yellow-100":"",children:(0,r.jsx)(eq.Edit,{className:"w-4 h-4"})}),e.audit_code&&(0,r.jsx)(i.Button,{size:"sm",variant:"outline",onClick:()=>s(e.audit_code,e.client_name),title:"Copy Audit Code",children:(0,r.jsx)(eI,{className:"w-4 h-4"})}),(0,r.jsx)(i.Button,{size:"sm",variant:"outline",onClick:()=>n(e.share_url_slug),title:"View Audit",children:(0,r.jsx)(eO.Eye,{className:"w-4 h-4"})}),(0,r.jsx)(i.Button,{size:"sm",variant:"outline",onClick:()=>l(e.share_url_slug),title:"Copy Share URL",children:(0,r.jsx)(eB,{className:"w-4 h-4"})}),(0,r.jsx)(i.Button,{size:"sm",variant:"destructive",onClick:()=>o(e.id,e.client_name),title:"Delete Audit",children:(0,r.jsx)(ez.Trash2,{className:"w-4 h-4"})})]})})]})},eH=({groupName:e,audits:t,selectedAudits:a,sortField:i,sortDirection:s,groupBy:n,onSelectAudit:l,onSelectAll:o,onSort:d,onCopyAuditCode:c,onViewAudit:u,onCopyShareUrl:m,onDeleteAudit:h,onEditAudit:f,onToggleLock:g})=>{let p=t.filter(e=>t.map(e=>e.id).includes(e.id)),x=p.filter(e=>a.has(e.id)).length,y=x===p.length&&p.length>0,v=x>0&&x<p.length;return 0===t.length?null:(0,r.jsxs)("div",{className:"mb-6",children:["none"!==n&&(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4 p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(z,{checked:y,onCheckedChange:e=>{p.forEach(t=>{l(t.id,e)})},className:v?"data-[state=checked]:bg-blue-600":""}),(0,r.jsx)("h3",{className:"font-semibold text-gray-900",children:e}),(0,r.jsxs)(eS.Badge,{variant:"outline",children:[p.length," audits"]})]}),x>0&&(0,r.jsxs)(eS.Badge,{variant:"secondary",children:[x," selected"]})]}),(0,r.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)(eR,{audits:t,selectedAudits:a,sortField:i,sortDirection:s,onSort:d,onSelectAll:o}),(0,r.jsx)("tbody",{children:t.map(e=>(0,r.jsx)(eU,{audit:e,isSelected:a.has(e.id),onSelectAudit:l,onCopyAuditCode:c,onViewAudit:u,onCopyShareUrl:m,onDeleteAudit:h,onEditAudit:f,onToggleLock:g},e.id))})]})})]})},eG=({audits:e,selectedAudits:t,onSelectAudit:i,onSelectAll:s,onCopyAuditCode:n,onViewAudit:l,onCopyShareUrl:d,onDeleteAudit:c,onEditAudit:u,onToggleLock:m})=>{let[h,f]=(0,a.useState)(""),[g,p]=(0,a.useState)("created_at"),[x,y]=(0,a.useState)("desc"),[v,b]=(0,a.useState)("none"),[w,_]=(0,a.useState)("all"),[j,k]=(0,a.useState)("all"),N=(0,a.useMemo)(()=>{let t=e.filter(e=>{let t=e.client_name.toLowerCase().includes(h.toLowerCase())||e.audit_code?.toLowerCase().includes(h.toLowerCase())||e.reviewer_name?.toLowerCase().includes(h.toLowerCase()),r="all"===w||e.status===w,a="all"===j||e.review_status===j;return t&&r&&a});return t.sort((e,t)=>{let r=e[g],a=t[g];return("created_at"===g?(r=new Date(r).getTime(),a=new Date(a).getTime()):(r=r?.toString().toLowerCase()||"",a=a?.toString().toLowerCase()||""),"asc"===x)?r>a?1:-1:r<a?1:-1}),t},[e,h,g,x,w,j]),S=(0,a.useMemo)(()=>{if("none"===v)return{"All Audits":N};let e={};return N.forEach(t=>{let r="";switch(v){case"month":r=eN(new Date(t.created_at),"MMMM yyyy");break;case"status":r=t.status||"Unknown Status";break;case"review_status":r="completed"===t.review_status?"Completed":"Pending"}e[r]||(e[r]=[]),e[r].push(t)}),e},[N,v]),C=e=>{g===e?y("asc"===x?"desc":"asc"):(p(e),y("asc"))};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(eV,{searchTerm:h,statusFilter:w,reviewStatusFilter:j,groupBy:v,filteredCount:N.length,onSearchChange:f,onStatusFilterChange:_,onReviewStatusFilterChange:k,onGroupByChange:b,onClearAllFilters:()=>{f(""),_("all"),k("all"),b("none")}}),(0,r.jsxs)(o.Card,{children:[(0,r.jsx)("div",{className:"p-6 pb-4",children:(0,r.jsxs)(o.CardTitle,{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{children:"Audit Reports"}),t.size>0&&(0,r.jsxs)(eS.Badge,{variant:"outline",className:"ml-2",children:[t.size," selected"]})]})}),(0,r.jsxs)(o.CardContent,{children:[Object.entries(S).map(([e,a])=>(0,r.jsx)(eH,{groupName:e,audits:a,selectedAudits:t,sortField:g,sortDirection:x,groupBy:v,onSelectAudit:i,onSelectAll:s,onSort:C,onCopyAuditCode:n,onViewAudit:l,onCopyShareUrl:d,onDeleteAudit:c,onEditAudit:u,onToggleLock:m},e)),0===N.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"text-gray-400 mb-4",children:(0,r.jsx)(eC.Search,{className:"w-12 h-12 mx-auto"})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No audits found"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Try adjusting your search or filter criteria."})]})]})]})]})};var eY=e.i(50983),e$=e=>e instanceof Date,eK=e=>null==e,eX=e=>!eK(e)&&!Array.isArray(e)&&"object"==typeof e&&!e$(e),eQ=e=>eX(e)&&e.target?"checkbox"===e.target.type?e.target.checked:e.target.value:e,eJ=(e,t)=>e.has(t.substring(0,t.search(/\.\d+(\.|$)/))||t),eZ="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function e0(e){let t,r=Array.isArray(e),a="undefined"!=typeof FileList&&e instanceof FileList;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{let i;if(!(!(eZ&&(e instanceof Blob||a))&&(r||eX(e))))return e;if(t=r?[]:{},r||eX(i=e.constructor&&e.constructor.prototype)&&i.hasOwnProperty("isPrototypeOf"))for(let r in e)e.hasOwnProperty(r)&&(t[r]=e0(e[r]));else t=e}return t}var e1=e=>Array.isArray(e)?e.filter(Boolean):[],e2=e=>void 0===e,e4=(e,t,r)=>{if(!t||!eX(e))return r;let a=e1(t.split(/[,[\].]+?/)).reduce((e,t)=>eK(e)?e:e[t],e);return e2(a)||a===e?e2(e[t])?r:e[t]:a},e5=e=>e1(e.replace(/["|']|\]/g,"").split(/\.|\[/)),e6=(e,t,r)=>{let a=-1,i=/^\w*$/.test(t)?[t]:e5(t),s=i.length,n=s-1;for(;++a<s;){let t=i[a],s=r;if(a!==n){let r=e[t];s=eX(r)||Array.isArray(r)?r:isNaN(+i[a+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=s,e=e[t]}};let e3="blur",e8="onChange",e9="onSubmit",e7="maxLength",te="minLength",tt="pattern",tr="required",ta=a.default.createContext(null);var ti=(e,t,r,a=!0)=>{let i={defaultValues:t._defaultValues};for(let s in e)Object.defineProperty(i,s,{get:()=>("all"!==t._proxyFormState[s]&&(t._proxyFormState[s]=!a||"all"),r&&(r[s]=!0),e[s])});return i},ts=(e,t,r,a,i)=>"string"==typeof e?(a&&t.watch.add(e),e4(r,e,i)):Array.isArray(e)?e.map(e=>(a&&t.watch.add(e),e4(r,e))):(a&&(t.watchAll=!0),r);let tn=e=>e.render(function(e){let t=a.default.useContext(ta),{name:r,disabled:i,control:s=t.control,shouldUnregister:n}=e,l=eJ(s._names.array,r),o=function(e){let t=a.default.useContext(ta),{control:r=t.control,name:i,defaultValue:s,disabled:n,exact:l}=e||{},o=a.default.useRef(i),d=a.default.useRef(s);o.current=i,a.default.useEffect(()=>r._subscribe({name:o.current,formState:{values:!0},exact:l,callback:e=>!n&&u(ts(o.current,r._names,e.values||r._formValues,!1,d.current))}),[r,n,l]);let[c,u]=a.default.useState(r._getWatch(i,s));return a.default.useEffect(()=>r._removeUnmounted()),c}({control:s,name:r,defaultValue:e4(s._formValues,r,e4(s._defaultValues,r,e.defaultValue)),exact:!0}),d=function(e){let t=a.default.useContext(ta),{control:r=t.control,disabled:i,name:s,exact:n}=e||{},[l,o]=a.default.useState(r._formState),d=a.default.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),c=a.default.useRef(s);return c.current=s,a.default.useEffect(()=>r._subscribe({name:c.current,formState:d.current,exact:n,callback:e=>{i||o({...r._formState,...e})}}),[r,i,n]),a.default.useEffect(()=>{d.current.isValid&&r._setValid(!0)},[r]),a.default.useMemo(()=>ti(l,r,d.current,!1),[l,r])}({control:s,name:r,exact:!0}),c=a.default.useRef(e),u=a.default.useRef(s.register(r,{...e.rules,value:o,..."boolean"==typeof e.disabled?{disabled:e.disabled}:{}})),m=a.default.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!e4(d.errors,r)},isDirty:{enumerable:!0,get:()=>!!e4(d.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!e4(d.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!e4(d.validatingFields,r)},error:{enumerable:!0,get:()=>e4(d.errors,r)}}),[d,r]),h=a.default.useCallback(e=>u.current.onChange({target:{value:eQ(e),name:r},type:"change"}),[r]),f=a.default.useCallback(()=>u.current.onBlur({target:{value:e4(s._formValues,r),name:r},type:e3}),[r,s._formValues]),g=a.default.useCallback(e=>{let t=e4(s._fields,r);t&&e&&(t._f.ref={focus:()=>e.focus(),select:()=>e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})},[s._fields,r]),p=a.default.useMemo(()=>({name:r,value:o,..."boolean"==typeof i||d.disabled?{disabled:d.disabled||i}:{},onChange:h,onBlur:f,ref:g}),[r,i,d.disabled,h,f,g,o]);return a.default.useEffect(()=>{let e=s._options.shouldUnregister||n;s.register(r,{...c.current.rules,..."boolean"==typeof c.current.disabled?{disabled:c.current.disabled}:{}});let t=(e,t)=>{let r=e4(s._fields,e);r&&r._f&&(r._f.mount=t)};if(t(r,!0),e){let e=e0(e4(s._options.defaultValues,r));e6(s._defaultValues,r,e),e2(e4(s._formValues,r))&&e6(s._formValues,r,e)}return l||s.register(r),()=>{(l?e&&!s._state.action:e)?s.unregister(r):t(r,!1)}},[r,s,l,n]),a.default.useEffect(()=>{s._setDisabledField({disabled:i,name:r})},[i,r,s]),a.default.useMemo(()=>({field:p,formState:d,fieldState:m}),[p,d,m])}(e));var tl=(e,t,r,a,i)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[a]:i||!0}}:{},to=e=>Array.isArray(e)?e:[e],td=()=>{let e=[];return{get observers(){return e},next:t=>{for(let r of e)r.next&&r.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}},tc=e=>eK(e)||"object"!=typeof e;function tu(e,t){if(tc(e)||tc(t))return e===t;if(e$(e)&&e$(t))return e.getTime()===t.getTime();let r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(let i of r){let r=e[i];if(!a.includes(i))return!1;if("ref"!==i){let e=t[i];if(e$(r)&&e$(e)||eX(r)&&eX(e)||Array.isArray(r)&&Array.isArray(e)?!tu(r,e):r!==e)return!1}}return!0}var tm=e=>eX(e)&&!Object.keys(e).length,th=e=>"function"==typeof e,tf=e=>{if(!eZ)return!1;let t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},tg=e=>tf(e)&&e.isConnected;function tp(e,t){let r=Array.isArray(t)?t:/^\w*$/.test(t)?[t]:e5(t),a=1===r.length?e:function(e,t){let r=t.slice(0,-1).length,a=0;for(;a<r;)e=e2(e)?a++:e[t[a++]];return e}(e,r),i=r.length-1,s=r[i];return a&&delete a[s],0!==i&&(eX(a)&&tm(a)||Array.isArray(a)&&function(e){for(let t in e)if(e.hasOwnProperty(t)&&!e2(e[t]))return!1;return!0}(a))&&tp(e,r.slice(0,-1)),e}var tx=e=>{for(let t in e)if(th(e[t]))return!0;return!1};function ty(e,t={}){let r=Array.isArray(e);if(eX(e)||r)for(let r in e)Array.isArray(e[r])||eX(e[r])&&!tx(e[r])?(t[r]=Array.isArray(e[r])?[]:{},ty(e[r],t[r])):eK(e[r])||(t[r]=!0);return t}var tv=(e,t)=>(function e(t,r,a){let i=Array.isArray(t);if(eX(t)||i)for(let i in t)Array.isArray(t[i])||eX(t[i])&&!tx(t[i])?e2(r)||tc(a[i])?a[i]=Array.isArray(t[i])?ty(t[i],[]):{...ty(t[i])}:e(t[i],eK(r)?{}:r[i],a[i]):a[i]=!tu(t[i],r[i]);return a})(e,t,ty(t));let tb={value:!1,isValid:!1},tw={value:!0,isValid:!0};var t_=e=>{if(Array.isArray(e)){if(e.length>1){let t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!e2(e[0].attributes.value)?e2(e[0].value)||""===e[0].value?tw:{value:e[0].value,isValid:!0}:tw:tb}return tb},tj=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:a})=>e2(e)?e:t?""===e?NaN:e?+e:e:r&&"string"==typeof e?new Date(e):a?a(e):e;let tk={isValid:!1,value:null};var tN=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,tk):tk;function tS(e){let t=e.ref;return"file"===t.type?t.files:"radio"===t.type?tN(e.refs).value:"select-multiple"===t.type?[...t.selectedOptions].map(({value:e})=>e):"checkbox"===t.type?t_(e.refs).value:tj(e2(t.value)?e.ref.value:t.value,e)}var tC=e=>e2(e)?e:e instanceof RegExp?e.source:eX(e)?e.value instanceof RegExp?e.value.source:e.value:e,tA=e=>({isOnSubmit:!e||e===e9,isOnBlur:"onBlur"===e,isOnChange:e===e8,isOnAll:"all"===e,isOnTouch:"onTouched"===e});let tF="AsyncFunction";var tD=e=>!!e&&!!e.validate&&!!(th(e.validate)&&e.validate.constructor.name===tF||eX(e.validate)&&Object.values(e.validate).find(e=>e.constructor.name===tF)),tM=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));let tE=(e,t,r,a)=>{for(let i of r||Object.keys(e)){let r=e4(e,i);if(r){let{_f:e,...s}=r;if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],i)&&!a)return!0;else if(e.ref&&t(e.ref,e.name)&&!a)return!0;else if(tE(s,t))break}else if(eX(s)&&tE(s,t))break}}};function tV(e,t,r){let a=e4(e,r);if(a||/^\w*$/.test(r))return{error:a,name:r};let i=r.split(".");for(;i.length;){let a=i.join("."),s=e4(t,a),n=e4(e,a);if(s&&!Array.isArray(s)&&r!==a)break;if(n&&n.type)return{name:a,error:n};i.pop()}return{name:r}}var tT=(e,t,r)=>{let a=to(e4(e,r));return e6(a,"root",t[r]),e6(e,r,a),e},tP=e=>"string"==typeof e;function tR(e,t,r="validate"){if(tP(e)||Array.isArray(e)&&e.every(tP)||"boolean"==typeof e&&!e)return{type:r,message:tP(e)?e:"",ref:t}}var tL=e=>!eX(e)||e instanceof RegExp?{value:e,message:""}:e,tB=async(e,t,r,a,i,s)=>{let{ref:n,refs:l,required:o,maxLength:d,minLength:c,min:u,max:m,pattern:h,validate:f,name:g,valueAsNumber:p,mount:x}=e._f,y=e4(r,g);if(!x||t.has(g))return{};let v=l?l[0]:n,b=e=>{i&&v.reportValidity&&(v.setCustomValidity("boolean"==typeof e?"":e||""),v.reportValidity())},w={},_="radio"===n.type,j="checkbox"===n.type,k=(p||"file"===n.type)&&e2(n.value)&&e2(y)||tf(n)&&""===n.value||""===y||Array.isArray(y)&&!y.length,N=tl.bind(null,g,a,w),S=(e,t,r,a=e7,i=te)=>{let s=e?t:r;w[g]={type:e?a:i,message:s,ref:n,...N(e?a:i,s)}};if(s?!Array.isArray(y)||!y.length:o&&(!(_||j)&&(k||eK(y))||"boolean"==typeof y&&!y||j&&!t_(l).isValid||_&&!tN(l).isValid)){let{value:e,message:t}=tP(o)?{value:!!o,message:o}:tL(o);if(e&&(w[g]={type:tr,message:t,ref:v,...N(tr,t)},!a))return b(t),w}if(!k&&(!eK(u)||!eK(m))){let e,t,r=tL(m),i=tL(u);if(eK(y)||isNaN(y)){let a=n.valueAsDate||new Date(y),s=e=>new Date(new Date().toDateString()+" "+e),l="time"==n.type,o="week"==n.type;"string"==typeof r.value&&y&&(e=l?s(y)>s(r.value):o?y>r.value:a>new Date(r.value)),"string"==typeof i.value&&y&&(t=l?s(y)<s(i.value):o?y<i.value:a<new Date(i.value))}else{let a=n.valueAsNumber||(y?+y:y);eK(r.value)||(e=a>r.value),eK(i.value)||(t=a<i.value)}if((e||t)&&(S(!!e,r.message,i.message,"max","min"),!a))return b(w[g].message),w}if((d||c)&&!k&&("string"==typeof y||s&&Array.isArray(y))){let e=tL(d),t=tL(c),r=!eK(e.value)&&y.length>+e.value,i=!eK(t.value)&&y.length<+t.value;if((r||i)&&(S(r,e.message,t.message),!a))return b(w[g].message),w}if(h&&!k&&"string"==typeof y){let{value:e,message:t}=tL(h);if(e instanceof RegExp&&!y.match(e)&&(w[g]={type:tt,message:t,ref:n,...N(tt,t)},!a))return b(t),w}if(f){if(th(f)){let e=tR(await f(y,r),v);if(e&&(w[g]={...e,...N("validate",e.message)},!a))return b(e.message),w}else if(eX(f)){let e={};for(let t in f){if(!tm(e)&&!a)break;let i=tR(await f[t](y,r),v,t);i&&(e={...i,...N(t,i.message)},b(i.message),a&&(w[g]=e))}if(!tm(e)&&(w[g]={ref:v,...e},!a))return w}}return b(!0),w};let tO={mode:e9,reValidateMode:e8,shouldFocusError:!0},tz=e=>{let{children:t,...r}=e;return a.default.createElement(ta.Provider,{value:r},t)},tq=a.createContext({}),tI=({...e})=>(0,r.jsx)(tq.Provider,{value:{name:e.name},children:(0,r.jsx)(tn,{...e})}),tW=()=>{let e=a.useContext(tq),t=a.useContext(tU),{getFieldState:r,formState:i}=a.default.useContext(ta),s=r(e.name,i);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=t;return{id:n,name:e.name,formItemId:`${n}-form-item`,formDescriptionId:`${n}-form-item-description`,formMessageId:`${n}-form-item-message`,...s}},tU=a.createContext({}),tH=a.forwardRef(({className:e,...t},i)=>{let s=a.useId();return(0,r.jsx)(tU.Provider,{value:{id:s},children:(0,r.jsx)("div",{ref:i,className:(0,O.cn)("space-y-2",e),...t})})});tH.displayName="FormItem";let tG=a.forwardRef(({className:e,...t},a)=>{let{error:i,formItemId:s}=tW();return(0,r.jsx)(n.Label,{ref:a,className:(0,O.cn)(i&&"text-destructive",e),htmlFor:s,...t})});tG.displayName="FormLabel";let tY=a.forwardRef(({...e},t)=>{let{error:a,formItemId:i,formDescriptionId:s,formMessageId:n}=tW();return(0,r.jsx)(eY.Slot,{ref:t,id:i,"aria-describedby":a?`${s} ${n}`:`${s}`,"aria-invalid":!!a,...e})});tY.displayName="FormControl",a.forwardRef(({className:e,...t},a)=>{let{formDescriptionId:i}=tW();return(0,r.jsx)("p",{ref:a,id:i,className:(0,O.cn)("text-sm text-muted-foreground",e),...t})}).displayName="FormDescription";let t$=a.forwardRef(({className:e,children:t,...a},i)=>{let{error:s,formMessageId:n}=tW(),l=s?String(s?.message):t;return l?(0,r.jsx)("p",{ref:i,id:n,className:(0,O.cn)("text-sm font-medium text-destructive",e),...a,children:l}):null});t$.displayName="FormMessage";let tK=({form:e})=>(0,r.jsx)(tI,{control:e.control,name:"reviewer_name",render:({field:e})=>(0,r.jsxs)(tH,{children:[(0,r.jsx)(tG,{className:"text-sm",children:"Reviewer Name *"}),(0,r.jsx)(tY,{children:(0,r.jsx)(s.Input,{placeholder:"Enter reviewer name",...e,value:e.value||""})}),(0,r.jsx)(t$,{})]})});var tX=e.i(42727),tQ=e.i(86318),tJ="Radio",[tZ,t0]=(0,b.createContextScope)(tJ),[t1,t2]=tZ(tJ),t4=a.forwardRef((e,t)=>{let{__scopeRadio:i,name:s,checked:n=!1,required:l,disabled:o,value:d="on",onCheck:c,form:u,...m}=e,[h,f]=a.useState(null),g=(0,v.useComposedRefs)(t,e=>f(e)),p=a.useRef(!1),x=!h||u||!!h.closest("form");return(0,r.jsxs)(t1,{scope:i,checked:n,disabled:o,children:[(0,r.jsx)(S.Primitive.button,{type:"button",role:"radio","aria-checked":n,"data-state":t8(n),"data-disabled":o?"":void 0,disabled:o,value:d,...m,ref:g,onClick:(0,w.composeEventHandlers)(e.onClick,e=>{n||c?.(),x&&(p.current=e.isPropagationStopped(),p.current||e.stopPropagation())})}),x&&(0,r.jsx)(t3,{control:h,bubbles:!p.current,name:s,value:d,checked:n,required:l,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});t4.displayName=tJ;var t5="RadioIndicator",t6=a.forwardRef((e,t)=>{let{__scopeRadio:a,forceMount:i,...s}=e,n=t2(t5,a);return(0,r.jsx)(N.Presence,{present:i||n.checked,children:(0,r.jsx)(S.Primitive.span,{"data-state":t8(n.checked),"data-disabled":n.disabled?"":void 0,...s,ref:t})})});t6.displayName=t5;var t3=e=>{let{control:t,checked:i,bubbles:s=!0,...n}=e,l=a.useRef(null),o=(0,j.usePrevious)(i),d=(0,k.useSize)(t);return a.useEffect(()=>{let e=l.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==i&&t){let r=new Event("click",{bubbles:s});t.call(e,i),e.dispatchEvent(r)}},[o,i,s]),(0,r.jsx)("input",{type:"radio","aria-hidden":!0,defaultChecked:i,...n,tabIndex:-1,ref:l,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function t8(e){return e?"checked":"unchecked"}var t9=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],t7="RadioGroup",[re,rt]=(0,b.createContextScope)(t7,[tX.createRovingFocusGroupScope,t0]),rr=(0,tX.createRovingFocusGroupScope)(),ra=t0(),[ri,rs]=re(t7),rn=a.forwardRef((e,t)=>{let{__scopeRadioGroup:a,name:i,defaultValue:s,value:n,required:l=!1,disabled:o=!1,orientation:d,dir:c,loop:u=!0,onValueChange:m,...h}=e,f=rr(a),g=(0,tQ.useDirection)(c),[p,x]=(0,_.useControllableState)({prop:n,defaultProp:s,onChange:m});return(0,r.jsx)(ri,{scope:a,name:i,required:l,disabled:o,value:p,onValueChange:x,children:(0,r.jsx)(tX.Root,{asChild:!0,...f,orientation:d,dir:g,loop:u,children:(0,r.jsx)(S.Primitive.div,{role:"radiogroup","aria-required":l,"aria-orientation":d,"data-disabled":o?"":void 0,dir:g,...h,ref:t})})})});rn.displayName=t7;var rl="RadioGroupItem",ro=a.forwardRef((e,t)=>{let{__scopeRadioGroup:i,disabled:s,...n}=e,l=rs(rl,i),o=l.disabled||s,d=rr(i),c=ra(i),u=a.useRef(null),m=(0,v.useComposedRefs)(t,u),h=l.value===n.value,f=a.useRef(!1);return a.useEffect(()=>{let e=e=>{t9.includes(e.key)&&(f.current=!0)},t=()=>f.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),(0,r.jsx)(tX.Item,{asChild:!0,...d,focusable:!o,active:h,children:(0,r.jsx)(t4,{disabled:o,required:l.required,checked:h,...c,...n,name:l.name,ref:m,onCheck:()=>l.onValueChange(n.value),onKeyDown:(0,w.composeEventHandlers)(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:(0,w.composeEventHandlers)(n.onFocus,()=>{f.current&&u.current?.click()})})})});ro.displayName=rl;var rd=a.forwardRef((e,t)=>{let{__scopeRadioGroup:a,...i}=e,s=ra(a);return(0,r.jsx)(t6,{...s,...i,ref:t})});rd.displayName="RadioGroupIndicator";var rc=e.i(14683);let ru=a.forwardRef(({className:e,...t},a)=>(0,r.jsx)(rn,{className:(0,O.cn)("grid gap-2",e),...t,ref:a}));ru.displayName=rn.displayName;let rm=a.forwardRef(({className:e,...t},a)=>(0,r.jsx)(ro,{ref:a,className:(0,O.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:(0,r.jsx)(rd,{className:"flex items-center justify-center",children:(0,r.jsx)(rc.Circle,{className:"h-2.5 w-2.5 fill-current text-current"})})}));rm.displayName=ro.displayName;let rh=({form:e})=>(0,r.jsx)(tI,{control:e.control,name:"video_option",render:({field:e})=>(0,r.jsxs)(tH,{children:[(0,r.jsx)(tG,{className:"text-sm",children:"Video Option"}),(0,r.jsx)(tY,{children:(0,r.jsxs)(ru,{onValueChange:e.onChange,value:e.value,className:"flex flex-col space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(rm,{value:"include",id:"include"}),(0,r.jsx)(n.Label,{htmlFor:"include",children:"Include video (Loom)"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(rm,{value:"exclude",id:"exclude"}),(0,r.jsx)(n.Label,{htmlFor:"exclude",children:"Do not include video (AI-generated feedback)"})]})]})}),(0,r.jsx)(t$,{})]})}),rf=({form:e})=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tI,{control:e.control,name:"loom_video_url",render:({field:e})=>(0,r.jsxs)(tH,{children:[(0,r.jsx)(tG,{className:"text-sm",children:"Loom Video (URL or Embed Code) *"}),(0,r.jsx)(tY,{children:(0,r.jsx)(s.Input,{placeholder:"Paste Loom share URL or embed code",...e,value:e.value||""})}),(0,r.jsx)(t$,{})]})}),(0,r.jsx)(tI,{control:e.control,name:"key_strengths",render:({field:e})=>(0,r.jsxs)(tH,{children:[(0,r.jsx)(tG,{className:"text-sm",children:"Key Strengths (one per line) *"}),(0,r.jsx)(tY,{children:(0,r.jsx)(l.Textarea,{placeholder:"Enter key strengths, one per line",className:"min-h-[60px]",...e,value:e.value||""})}),(0,r.jsx)(t$,{})]})}),(0,r.jsx)(tI,{control:e.control,name:"priority_actions",render:({field:e})=>(0,r.jsxs)(tH,{children:[(0,r.jsx)(tG,{className:"text-sm",children:"Priority Actions (one per line) *"}),(0,r.jsx)(tY,{children:(0,r.jsx)(l.Textarea,{placeholder:"Enter priority actions, one per line",className:"min-h-[60px]",...e,value:e.value||""})}),(0,r.jsx)(t$,{})]})}),(0,r.jsx)(tI,{control:e.control,name:"strategic_insights",render:({field:e})=>(0,r.jsxs)(tH,{children:[(0,r.jsx)(tG,{className:"text-sm",children:"Strategic Insights (one per line) *"}),(0,r.jsx)(tY,{children:(0,r.jsx)(l.Textarea,{placeholder:"Enter strategic insights, one per line",className:"min-h-[60px]",...e,value:e.value||""})}),(0,r.jsx)(t$,{})]})})]}),rg=({form:e,audit:t})=>{let[s,n]=(0,a.useState)(!1),{toast:o}=(0,c.useToast)(),u=async()=>{n(!0);try{console.log("Generating AI feedback for:",t.client_name),console.log("Audit ID:",t.id);let{data:r,error:a}=await d.supabase.functions.invoke("generate-audit-feedback",{body:{clientName:t.client_name,auditData:t.audit_data,auditId:t.id}});if(console.log("AI feedback response:",r),console.log("AI feedback error:",a),a)throw console.error("Supabase function error:",a),Error(a.message||"Failed to generate AI feedback");if(!r?.feedback)throw Error("No feedback received from AI service");e.setValue("ai_feedback",r.feedback),o({title:"Success",description:"AI feedback generated successfully!"})}catch(e){console.error("AI feedback generation error:",e),o({title:"Error",description:e.message||"Failed to generate AI feedback. Please try again.",variant:"destructive"})}finally{n(!1)}};return(0,r.jsx)(tI,{control:e.control,name:"ai_feedback",render:({field:e})=>(0,r.jsxs)(tH,{children:[(0,r.jsx)(tG,{className:"text-sm",children:"AI-Generated Feedback *"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i.Button,{type:"button",variant:"outline",onClick:u,disabled:s,className:"w-full",children:s?"Generating...":"Generate AI Feedback"}),(0,r.jsx)(tY,{children:(0,r.jsx)(l.Textarea,{placeholder:"AI-generated feedback will appear here. You can edit it after generation...",className:"min-h-[120px]",...e,value:e.value||""})}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Tip: After generating AI feedback, you can edit the content above to customize it as needed."})]}),(0,r.jsx)(t$,{})]})})},rp=({audit:e,submittingReview:t,onSubmit:s,onCancel:n})=>{let{validateForm:l}=(()=>{let{toast:e}=(0,c.useToast)();return{validateForm:t=>{if(console.log("Validating form data:",t),!t.reviewer_name?.trim())return e({title:"Validation Error",description:"Reviewer name is required",variant:"destructive"}),!1;if("include"===t.video_option){if(!t.loom_video_url?.trim())return e({title:"Validation Error",description:"Loom video URL is required when including video",variant:"destructive"}),!1;if(!t.key_strengths?.trim()||!t.priority_actions?.trim()||!t.strategic_insights?.trim())return e({title:"Validation Error",description:"Key strengths, priority actions, and strategic insights are required when including video",variant:"destructive"}),!1}else if("exclude"===t.video_option&&!t.ai_feedback?.trim())return e({title:"Validation Error",description:"AI feedback is required when excluding video. Please generate AI feedback first.",variant:"destructive"}),!1;return!0}}})(),o=function(e={}){let t=a.default.useRef(void 0),r=a.default.useRef(void 0),[i,s]=a.default.useState({isDirty:!1,isValidating:!1,isLoading:th(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:th(e.defaultValues)?void 0:e.defaultValues});!t.current&&(t.current={...e.formControl?e.formControl:function(e={}){let t,r={...tO,...e},a={submitCount:0,isDirty:!1,isLoading:th(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},i={},s=(eX(r.defaultValues)||eX(r.values))&&e0(r.values||r.defaultValues)||{},n=r.shouldUnregister?{}:e0(s),l={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d=0,c={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},u={...c},m={array:td(),state:td()},h=tA(r.mode),f=tA(r.reValidateMode),g="all"===r.criteriaMode,p=async e=>{if(!r.disabled&&(c.isValid||u.isValid||e)){let e=r.resolver?tm((await b()).errors):await _(i,!0);e!==a.isValid&&m.state.next({isValid:e})}},x=(e,t)=>{!r.disabled&&(c.isValidating||c.validatingFields||u.isValidating||u.validatingFields)&&((e||Array.from(o.mount)).forEach(e=>{e&&(t?e6(a.validatingFields,e,t):tp(a.validatingFields,e))}),m.state.next({validatingFields:a.validatingFields,isValidating:!tm(a.validatingFields)}))},y=(e,t,r,a)=>{let o=e4(i,e);if(o){let i=e4(n,e,e2(r)?e4(s,e):r);e2(i)||a&&a.defaultChecked||t?e6(n,e,t?i:tS(o._f)):N(e,i),l.mount&&p()}},v=(e,t,i,n,l)=>{let o=!1,d=!1,h={name:e};if(!r.disabled){if(!i||n){(c.isDirty||u.isDirty)&&(d=a.isDirty,a.isDirty=h.isDirty=j(),o=d!==h.isDirty);let r=tu(e4(s,e),t);d=!!e4(a.dirtyFields,e),r?tp(a.dirtyFields,e):e6(a.dirtyFields,e,!0),h.dirtyFields=a.dirtyFields,o=o||(c.dirtyFields||u.dirtyFields)&&!r!==d}if(i){let t=e4(a.touchedFields,e);t||(e6(a.touchedFields,e,i),h.touchedFields=a.touchedFields,o=o||(c.touchedFields||u.touchedFields)&&t!==i)}o&&l&&m.state.next(h)}return o?h:{}},b=async e=>{x(e,!0);let t=await r.resolver(n,r.context,((e,t,r,a)=>{let i={};for(let r of e){let e=e4(t,r);e&&e6(i,r,e._f)}return{criteriaMode:r,names:[...e],fields:i,shouldUseNativeValidation:a}})(e||o.mount,i,r.criteriaMode,r.shouldUseNativeValidation));return x(e),t},w=async e=>{let{errors:t}=await b(e);if(e)for(let r of e){let e=e4(t,r);e?e6(a.errors,r,e):tp(a.errors,r)}else a.errors=t;return t},_=async(e,t,i={valid:!0})=>{for(let s in e){let l=e[s];if(l){let{_f:e,...d}=l;if(e){let d=o.array.has(e.name),u=l._f&&tD(l._f);u&&c.validatingFields&&x([s],!0);let m=await tB(l,o.disabled,n,g,r.shouldUseNativeValidation&&!t,d);if(u&&c.validatingFields&&x([s]),m[e.name]&&(i.valid=!1,t))break;t||(e4(m,e.name)?d?tT(a.errors,m,e.name):e6(a.errors,e.name,m[e.name]):tp(a.errors,e.name))}tm(d)||await _(d,t,i)}}return i.valid},j=(e,t)=>!r.disabled&&(e&&t&&e6(n,e,t),!tu(M(),s)),k=(e,t,r)=>ts(e,o,{...l.mount?n:e2(t)?s:"string"==typeof e?{[e]:t}:t},r,t),N=(e,t,r={})=>{let a=e4(i,e),s=t;if(a){let r=a._f;r&&(r.disabled||e6(n,e,tj(t,r)),s=tf(r.ref)&&eK(t)?"":t,"select-multiple"===r.ref.type?[...r.ref.options].forEach(e=>e.selected=s.includes(e.value)):r.refs?"checkbox"===r.ref.type?r.refs.length>1?r.refs.forEach(e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(s)?!!s.find(t=>t===e.value):s===e.value)):r.refs[0]&&(r.refs[0].checked=!!s):r.refs.forEach(e=>e.checked=e.value===s):"file"===r.ref.type?r.ref.value="":(r.ref.value=s,r.ref.type||m.state.next({name:e,values:e0(n)})))}(r.shouldDirty||r.shouldTouch)&&v(e,s,r.shouldTouch,r.shouldDirty,!0),r.shouldValidate&&D(e)},S=(e,t,r)=>{for(let a in t){let s=t[a],n=`${e}.${a}`,l=e4(i,n);(o.array.has(e)||eX(s)||l&&!l._f)&&!e$(s)?S(n,s,r):N(n,s,r)}},C=(e,t,r={})=>{let d=e4(i,e),h=o.array.has(e),f=e0(t);e6(n,e,f),h?(m.array.next({name:e,values:e0(n)}),(c.isDirty||c.dirtyFields||u.isDirty||u.dirtyFields)&&r.shouldDirty&&m.state.next({name:e,dirtyFields:tv(s,n),isDirty:j(e,f)})):!d||d._f||eK(f)?N(e,f,r):S(e,f,r),tM(e,o)&&m.state.next({...a}),m.state.next({name:l.mount?e:void 0,values:e0(n)})},A=async e=>{l.mount=!0;let s=e.target,y=s.name,w=!0,j=e4(i,y),k=e=>{w=Number.isNaN(e)||e$(e)&&isNaN(e.getTime())||tu(e,e4(n,y,e))};if(j){var N,S,C,A,F;let l,T,P,R=s.type?tS(j._f):eQ(e),L=e.type===e3||"focusout"===e.type,B=!((P=j._f).mount&&(P.required||P.min||P.max||P.maxLength||P.minLength||P.pattern||P.validate))&&!r.resolver&&!e4(a.errors,y)&&!j._f.deps||(N=L,S=e4(a.touchedFields,y),C=a.isSubmitted,A=f,!(F=h).isOnAll&&(!C&&F.isOnTouch?!(S||N):(C?A.isOnBlur:F.isOnBlur)?!N:(C?!A.isOnChange:!F.isOnChange)||N)),O=tM(y,o,L);e6(n,y,R),L?(j._f.onBlur&&j._f.onBlur(e),t&&t(0)):j._f.onChange&&j._f.onChange(e);let z=v(y,R,L),q=!tm(z)||O;if(L||m.state.next({name:y,type:e.type,values:e0(n)}),B)return(c.isValid||u.isValid)&&("onBlur"===r.mode?L&&p():L||p()),q&&m.state.next({name:y,...O?{}:z});if(!L&&O&&m.state.next({...a}),r.resolver){let{errors:e}=await b([y]);if(k(R),w){let t=tV(a.errors,i,y),r=tV(e,i,t.name||y);l=r.error,y=r.name,T=tm(e)}}else x([y],!0),l=(await tB(j,o.disabled,n,g,r.shouldUseNativeValidation))[y],x([y]),k(R),w&&(l?T=!1:(c.isValid||u.isValid)&&(T=await _(i,!0)));if(w){j._f.deps&&D(j._f.deps);var M=y,E=T,V=l;let e=e4(a.errors,M),i=(c.isValid||u.isValid)&&"boolean"==typeof E&&a.isValid!==E;if(r.delayError&&V){let e;e=()=>{e6(a.errors,M,V),m.state.next({errors:a.errors})},(t=t=>{clearTimeout(d),d=setTimeout(e,t)})(r.delayError)}else clearTimeout(d),t=null,V?e6(a.errors,M,V):tp(a.errors,M);if((V?!tu(e,V):e)||!tm(z)||i){let e={...z,...i&&"boolean"==typeof E?{isValid:E}:{},errors:a.errors,name:M};a={...a,...e},m.state.next(e)}}}},F=(e,t)=>{if(e4(a.errors,t)&&e.focus)return e.focus(),1},D=async(e,t={})=>{let s,n,l=to(e);if(r.resolver){let t=await w(e2(e)?e:l);s=tm(t),n=e?!l.some(e=>e4(t,e)):s}else e?((n=(await Promise.all(l.map(async e=>{let t=e4(i,e);return await _(t&&t._f?{[e]:t}:t)}))).every(Boolean))||a.isValid)&&p():n=s=await _(i);return m.state.next({..."string"!=typeof e||(c.isValid||u.isValid)&&s!==a.isValid?{}:{name:e},...r.resolver||!e?{isValid:s}:{},errors:a.errors}),t.shouldFocus&&!n&&tE(i,F,e?l:o.mount),n},M=e=>{let t={...l.mount?n:s};return e2(e)?t:"string"==typeof e?e4(t,e):e.map(e=>e4(t,e))},E=(e,t)=>({invalid:!!e4((t||a).errors,e),isDirty:!!e4((t||a).dirtyFields,e),error:e4((t||a).errors,e),isValidating:!!e4(a.validatingFields,e),isTouched:!!e4((t||a).touchedFields,e)}),V=(e,t,r)=>{let s=(e4(i,e,{_f:{}})._f||{}).ref,{ref:n,message:l,type:o,...d}=e4(a.errors,e)||{};e6(a.errors,e,{...d,...t,ref:s}),m.state.next({name:e,errors:a.errors,isValid:!1}),r&&r.shouldFocus&&s&&s.focus&&s.focus()},T=e=>m.state.subscribe({next:t=>{let r,i,s;r=e.name,i=t.name,s=e.exact,(!r||!i||r===i||to(r).some(e=>e&&(s?e===i:e.startsWith(i)||i.startsWith(e))))&&((e,t,r,a)=>{r(e);let{name:i,...s}=e;return tm(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(e=>t[e]===(!a||"all"))})(t,e.formState||c,I,e.reRenderRoot)&&e.callback({values:{...n},...a,...t})}}).unsubscribe,P=(e,t={})=>{for(let l of e?to(e):o.mount)o.mount.delete(l),o.array.delete(l),t.keepValue||(tp(i,l),tp(n,l)),t.keepError||tp(a.errors,l),t.keepDirty||tp(a.dirtyFields,l),t.keepTouched||tp(a.touchedFields,l),t.keepIsValidating||tp(a.validatingFields,l),r.shouldUnregister||t.keepDefaultValue||tp(s,l);m.state.next({values:e0(n)}),m.state.next({...a,...!t.keepDirty?{}:{isDirty:j()}}),t.keepIsValid||p()},R=({disabled:e,name:t})=>{("boolean"==typeof e&&l.mount||e||o.disabled.has(t))&&(e?o.disabled.add(t):o.disabled.delete(t))},L=(e,t={})=>{let a=e4(i,e),n="boolean"==typeof t.disabled||"boolean"==typeof r.disabled;return(e6(i,e,{...a||{},_f:{...a&&a._f?a._f:{ref:{name:e}},name:e,mount:!0,...t}}),o.mount.add(e),a)?R({disabled:"boolean"==typeof t.disabled?t.disabled:r.disabled,name:e}):y(e,!0,t.value),{...n?{disabled:t.disabled||r.disabled}:{},...r.progressive?{required:!!t.required,min:tC(t.min),max:tC(t.max),minLength:tC(t.minLength),maxLength:tC(t.maxLength),pattern:tC(t.pattern)}:{},name:e,onChange:A,onBlur:A,ref:n=>{if(n){let r;L(e,t),a=e4(i,e);let l=e2(n.value)&&n.querySelectorAll&&n.querySelectorAll("input,select,textarea")[0]||n,o="radio"===(r=l).type||"checkbox"===r.type,d=a._f.refs||[];(o?d.find(e=>e===l):l===a._f.ref)||(e6(i,e,{_f:{...a._f,...o?{refs:[...d.filter(tg),l,...Array.isArray(e4(s,e))?[{}]:[]],ref:{type:l.type,name:e}}:{ref:l}}}),y(e,!1,void 0,l))}else(a=e4(i,e,{}))._f&&(a._f.mount=!1),(r.shouldUnregister||t.shouldUnregister)&&!(eJ(o.array,e)&&l.action)&&o.unMount.add(e)}}},B=()=>r.shouldFocusError&&tE(i,F,o.mount),O=(e,t)=>async s=>{let l;s&&(s.preventDefault&&s.preventDefault(),s.persist&&s.persist());let d=e0(n);if(m.state.next({isSubmitting:!0}),r.resolver){let{errors:e,values:t}=await b();a.errors=e,d=t}else await _(i);if(o.disabled.size)for(let e of o.disabled)e6(d,e,void 0);if(tp(a.errors,"root"),tm(a.errors)){m.state.next({errors:{}});try{await e(d,s)}catch(e){l=e}}else t&&await t({...a.errors},s),B(),setTimeout(B);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:tm(a.errors)&&!l,submitCount:a.submitCount+1,errors:a.errors}),l)throw l},z=(e,t={})=>{let d=e?e0(e):s,u=e0(d),h=tm(e),f=h?s:u;if(t.keepDefaultValues||(s=d),!t.keepValues){if(t.keepDirtyValues)for(let e of Array.from(new Set([...o.mount,...Object.keys(tv(s,n))])))e4(a.dirtyFields,e)?e6(f,e,e4(n,e)):C(e,e4(f,e));else{if(eZ&&e2(e))for(let e of o.mount){let t=e4(i,e);if(t&&t._f){let e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(tf(e)){let t=e.closest("form");if(t){t.reset();break}}}}for(let e of o.mount)C(e,e4(f,e))}n=e0(f),m.array.next({values:{...f}}),m.state.next({values:{...f}})}o={mount:t.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!c.isValid||!!t.keepIsValid||!!t.keepDirtyValues,l.watch=!!r.shouldUnregister,m.state.next({submitCount:t.keepSubmitCount?a.submitCount:0,isDirty:!h&&(t.keepDirty?a.isDirty:!!(t.keepDefaultValues&&!tu(e,s))),isSubmitted:!!t.keepIsSubmitted&&a.isSubmitted,dirtyFields:h?{}:t.keepDirtyValues?t.keepDefaultValues&&n?tv(s,n):a.dirtyFields:t.keepDefaultValues&&e?tv(s,e):t.keepDirty?a.dirtyFields:{},touchedFields:t.keepTouched?a.touchedFields:{},errors:t.keepErrors?a.errors:{},isSubmitSuccessful:!!t.keepIsSubmitSuccessful&&a.isSubmitSuccessful,isSubmitting:!1})},q=(e,t)=>z(th(e)?e(n):e,t),I=e=>{a={...a,...e}},W={control:{register:L,unregister:P,getFieldState:E,handleSubmit:O,setError:V,_subscribe:T,_runSchema:b,_getWatch:k,_getDirty:j,_setValid:p,_setFieldArray:(e,t=[],o,d,h=!0,f=!0)=>{if(d&&o&&!r.disabled){if(l.action=!0,f&&Array.isArray(e4(i,e))){let t=o(e4(i,e),d.argA,d.argB);h&&e6(i,e,t)}if(f&&Array.isArray(e4(a.errors,e))){let t,r=o(e4(a.errors,e),d.argA,d.argB);h&&e6(a.errors,e,r),e1(e4(t=a.errors,e)).length||tp(t,e)}if((c.touchedFields||u.touchedFields)&&f&&Array.isArray(e4(a.touchedFields,e))){let t=o(e4(a.touchedFields,e),d.argA,d.argB);h&&e6(a.touchedFields,e,t)}(c.dirtyFields||u.dirtyFields)&&(a.dirtyFields=tv(s,n)),m.state.next({name:e,isDirty:j(e,t),dirtyFields:a.dirtyFields,errors:a.errors,isValid:a.isValid})}else e6(n,e,t)},_setDisabledField:R,_setErrors:e=>{a.errors=e,m.state.next({errors:a.errors,isValid:!1})},_getFieldArray:e=>e1(e4(l.mount?n:s,e,r.shouldUnregister?e4(s,e,[]):[])),_reset:z,_resetDefaultValues:()=>th(r.defaultValues)&&r.defaultValues().then(e=>{q(e,r.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:()=>{for(let e of o.unMount){let t=e4(i,e);t&&(t._f.refs?t._f.refs.every(e=>!tg(e)):!tg(t._f.ref))&&P(e)}o.unMount=new Set},_disableForm:e=>{"boolean"==typeof e&&(m.state.next({disabled:e}),tE(i,(t,r)=>{let a=e4(i,r);a&&(t.disabled=a._f.disabled||e,Array.isArray(a._f.refs)&&a._f.refs.forEach(t=>{t.disabled=a._f.disabled||e}))},0,!1))},_subjects:m,_proxyFormState:c,get _fields(){return i},get _formValues(){return n},get _state(){return l},set _state(value){l=value},get _defaultValues(){return s},get _names(){return o},set _names(value){o=value},get _formState(){return a},get _options(){return r},set _options(value){r={...r,...value}}},subscribe:e=>(l.mount=!0,u={...u,...e.formState},T({...e,formState:u})),trigger:D,register:L,handleSubmit:O,watch:(e,t)=>th(e)?m.state.subscribe({next:r=>e(k(void 0,t),r)}):k(e,t,!0),setValue:C,getValues:M,reset:q,resetField:(e,t={})=>{e4(i,e)&&(e2(t.defaultValue)?C(e,e0(e4(s,e))):(C(e,t.defaultValue),e6(s,e,e0(t.defaultValue))),t.keepTouched||tp(a.touchedFields,e),t.keepDirty||(tp(a.dirtyFields,e),a.isDirty=t.defaultValue?j(e,e0(e4(s,e))):j()),!t.keepError&&(tp(a.errors,e),c.isValid&&p()),m.state.next({...a}))},clearErrors:e=>{e&&to(e).forEach(e=>tp(a.errors,e)),m.state.next({errors:e?a.errors:{}})},unregister:P,setError:V,setFocus:(e,t={})=>{let r=e4(i,e),a=r&&r._f;if(a){let e=a.refs?a.refs[0]:a.ref;e.focus&&(e.focus(),t.shouldSelect&&th(e.select)&&e.select())}},getFieldState:E};return{...W,formControl:W}}(e),formState:i},e.formControl&&e.defaultValues&&!th(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));let n=t.current.control;return n._options=e,a.default.useLayoutEffect(()=>n._subscribe({formState:n._proxyFormState,callback:()=>s({...n._formState}),reRenderRoot:!0}),[n]),a.default.useEffect(()=>n._disableForm(e.disabled),[n,e.disabled]),a.default.useEffect(()=>{if(n._proxyFormState.isDirty){let e=n._getDirty();e!==i.isDirty&&n._subjects.state.next({isDirty:e})}},[n,i.isDirty]),a.default.useEffect(()=>{e.values&&!tu(e.values,r.current)?(n._reset(e.values,n._options.resetOptions),r.current=e.values,s(e=>({...e}))):n._resetDefaultValues()},[e.values,n]),a.default.useEffect(()=>{e.errors&&!tm(e.errors)&&n._setErrors(e.errors)},[e.errors,n]),a.default.useEffect(()=>{n._state.mount||(n._setValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),a.default.useEffect(()=>{e.shouldUnregister&&n._subjects.state.next({values:n._getWatch()})},[e.shouldUnregister,n]),t.current.formState=ti(i,n),t.current}({defaultValues:{reviewer_name:e.reviewer_name||"",video_option:e.loom_video_url?"include":"exclude",loom_video_url:e.loom_video_url||"",key_strengths:e.key_strengths?.join("\n")||"",priority_actions:e.priority_actions?.join("\n")||"",strategic_insights:e.strategic_insights?.join("\n")||"",ai_feedback:e.ai_feedback||""},mode:"onChange"}),d=o.watch("video_option");return(0,a.useEffect)(()=>{o.reset({reviewer_name:e.reviewer_name||"",video_option:e.loom_video_url?"include":"exclude",loom_video_url:e.loom_video_url||"",key_strengths:e.key_strengths?.join("\n")||"",priority_actions:e.priority_actions?.join("\n")||"",strategic_insights:e.strategic_insights?.join("\n")||"",ai_feedback:e.ai_feedback||""})},[e.id,o]),(0,r.jsxs)("div",{className:"mt-4 p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("h4",{className:"font-semibold text-sm text-yellow-800",children:"completed"===e.review_status?"Edit Review":"Complete Review"}),"completed"===e.review_status&&(0,r.jsx)(i.Button,{size:"sm",variant:"outline",onClick:()=>{o.reset(),n()},type:"button",children:"Cancel"})]}),(0,r.jsx)(tz,{...o,children:(0,r.jsxs)("form",{onSubmit:o.handleSubmit(t=>{console.log("Form submission data:",t),l(t)&&s(e.id,t)}),className:"space-y-4",children:[(0,r.jsx)(tK,{form:o}),(0,r.jsx)(rh,{form:o}),"include"===d&&(0,r.jsx)(rf,{form:o}),"exclude"===d&&(0,r.jsx)(rg,{form:o,audit:e}),(0,r.jsx)(i.Button,{type:"submit",className:"w-full",disabled:t===e.id,children:t===e.id?"Submitting...":"completed"===e.review_status?"Update Review":"Submit Review"})]})})]})},rx=({audit:e,isSelected:t,editingAudit:a,submittingReview:s,onSelectAudit:n,onEditAudit:l,onCopyAuditCode:o,onViewAudit:d,onCopyShareUrl:c,onDeleteAudit:u,onSubmitReview:m,onCancelEdit:h})=>(0,r.jsxs)("div",{className:"border rounded-lg bg-gray-50",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(z,{checked:t,onCheckedChange:t=>n(e.id,!!t)}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:e.client_name}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Created: ",new Date(e.created_at).toLocaleDateString()]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Slug: ",e.share_url_slug]}),e.audit_code&&(0,r.jsxs)("p",{className:"text-xs text-blue-600 mt-1 font-mono",children:["Code: ",e.audit_code]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(eS.Badge,{variant:"completed"===e.review_status?"default":"secondary",className:"completed"===e.review_status?"bg-green-100 text-green-800 hover:bg-green-200":"",children:"completed"===e.review_status?"Completed":"Pending"}),"completed"===e.review_status&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eM.CheckCircle2,{className:"w-4 h-4 text-green-500"}),(0,r.jsx)(i.Button,{size:"sm",variant:"outline",onClick:()=>l(e.id),children:(0,r.jsx)(eq.Edit,{className:"w-4 h-4"})})]}),e.audit_code&&(0,r.jsx)(i.Button,{size:"sm",variant:"outline",onClick:()=>o(e.audit_code,e.client_name),title:"Copy Audit Code",children:(0,r.jsx)(eI,{className:"w-4 h-4"})}),(0,r.jsx)(i.Button,{size:"sm",variant:"outline",onClick:()=>d(e.share_url_slug),children:(0,r.jsx)(eO.Eye,{className:"w-4 h-4"})}),(0,r.jsx)(i.Button,{size:"sm",variant:"outline",onClick:()=>c(e.share_url_slug),children:(0,r.jsx)(eB,{className:"w-4 h-4"})}),(0,r.jsx)(i.Button,{size:"sm",variant:"destructive",onClick:()=>u(e.id,e.client_name),children:(0,r.jsx)(ez.Trash2,{className:"w-4 h-4"})})]})]}),("pending"===e.review_status||a===e.id)&&(0,r.jsx)(rp,{audit:e,submittingReview:s,onSubmit:m,onCancel:h})]}),ry=({editingAudit:e,submittingReview:t,filteredAudits:a,selectedAudits:i,onSelectAudit:s,onEditAudit:n,onCopyAuditCode:l,onViewAudit:o,onCopyShareUrl:d,onDeleteAudit:c,onSubmitReview:u,onCancelEdit:m})=>e?(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto relative",children:[(0,r.jsx)("button",{onClick:m,className:"absolute top-4 right-4 z-10 p-2 hover:bg-gray-100 rounded-full transition-colors",type:"button",children:(0,r.jsx)(eD.X,{className:"w-5 h-5 text-gray-500"})}),a.filter(t=>t.id===e).map(a=>(0,r.jsx)(rx,{audit:a,isSelected:i.has(a.id),editingAudit:e,submittingReview:t,onSelectAudit:s,onEditAudit:n,onCopyAuditCode:l,onViewAudit:o,onCopyShareUrl:d,onDeleteAudit:c,onSubmitReview:u,onCancelEdit:m},a.id))]})}):null,rv=async e=>{try{console.log("Starting HTML snapshot capture for audit:",e);let t=document.querySelector("[data-audit-container]");if(!t)throw Error("Audit container not found for HTML snapshot");let r=t.cloneNode(!0);await rb(r);let a=rw(r);return console.log("HTML snapshot captured successfully, size:",a.length),a}catch(e){throw console.error("Error capturing HTML snapshot:",e),e}},rb=async e=>{for(let t of[e,...e.querySelectorAll("*")])try{let e=window.getComputedStyle(t),r=[];for(let t of["display","position","top","left","right","bottom","width","height","margin","padding","border","background","color","font-family","font-size","font-weight","text-align","line-height","opacity","visibility","z-index","transform","box-shadow","border-radius","flex","grid","align-items","justify-content"]){let a=e.getPropertyValue(t);a&&"initial"!==a&&"normal"!==a&&r.push(`${t}: ${a}`)}r.length>0&&(t.style.cssText=r.join("; "))}catch(e){console.warn("Could not inline styles for element:",t,e)}},rw=e=>`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Locked Audit Report</title>
  <style>
    /* Reset and base styles */
    * { box-sizing: border-box; }
    body { 
      margin: 0; 
      padding: 0; 
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", sans-serif;
      background: #f8fafc;
    }
    .locked-audit-notice {
      background: #f3f4f6;
      border: 1px solid #d1d5db;
      padding: 12px;
      margin: 16px;
      border-radius: 8px;
      text-align: center;
      color: #374151;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="locked-audit-notice">
    ðŸ”’ This is a locked audit report, captured and preserved as it appeared at the time of locking.
  </div>
  ${e.outerHTML}
</body>
</html>`,r_=async e=>{try{console.log("Starting complete lock process with HTML snapshot for audit:",e);let t=await rv(e),{data:r,error:a}=await d.supabase.from("audit_reports").select("*").eq("id",e).single();if(a)throw a;let i=new Date,s={id:r.id,client_name:r.client_name,share_url_slug:r.share_url_slug,audit_code:r.audit_code,created_at:r.created_at,status:r.status,reviewer_name:r.reviewer_name,loom_video_url:r.loom_video_url,key_strengths:r.key_strengths,priority_actions:r.priority_actions,strategic_insights:r.strategic_insights,review_status:r.review_status,audit_data:r.audit_data,ai_feedback:r.ai_feedback,snapshot_created_at:i.toISOString(),snapshot_version:"2.0.0",header_template:{title:"ðŸ” Free LLM Visibility Miniâ€‘Audit ðŸ”¥ âœ¨",display_date:i.toLocaleDateString(),display_time:i.toLocaleTimeString(),locked_at:i.toISOString()},ui_template:{show_live_insights_badge:!1,show_time_badge:!0}},{error:n}=await d.supabase.from("audit_reports").update({is_locked:!0,html_snapshot:t,snapshot_data:s,snapshot_generated_at:i.toISOString(),snapshot_version:"2.0.0"}).eq("id",e);if(n)throw n;console.log("Successfully locked audit with complete HTML snapshot")}catch(e){throw console.error("Error locking audit with snapshot:",e),e}},rj=async e=>{try{let t=new Date,r=t.toLocaleDateString(),a=t.toLocaleTimeString(),i={id:e.id,client_name:e.client_name,share_url_slug:e.share_url_slug,audit_code:e.audit_code,created_at:e.created_at,status:e.status,reviewer_name:e.reviewer_name,loom_video_url:e.loom_video_url,key_strengths:e.key_strengths,priority_actions:e.priority_actions,strategic_insights:e.strategic_insights,review_status:e.review_status,audit_data:e.audit_data,ai_feedback:e.ai_feedback,snapshot_created_at:new Date().toISOString(),snapshot_version:"v4",header_template:{title:"ðŸ” Free LLM Visibility Miniâ€‘Audit ðŸ”¥ âœ¨",display_date:r,display_time:a,locked_at:t.toISOString()},ui_template:{show_live_insights_badge:!1,show_time_badge:!0}};return console.log("Generated comprehensive snapshot with version v4:",{client_name:i.client_name,snapshot_version:i.snapshot_version,display_time:a,locked_at:i.header_template.locked_at}),i}catch(e){throw console.error("Error generating audit snapshot:",e),e}},rk=async e=>{try{console.log("Starting enhanced lock process with version v4 for audit:",e);try{await r_(e),console.log("Successfully locked audit with complete HTML snapshot");return}catch(e){console.log("HTML snapshot failed, falling back to versioned JSON snapshot...")}let{data:t,error:r}=await d.supabase.from("audit_reports").select("*").eq("id",e).single();if(r)throw r;let a=await rj(t),{error:i}=await d.supabase.from("audit_reports").update({is_locked:!0,snapshot_data:a,snapshot_generated_at:new Date().toISOString(),snapshot_version:"v4"}).eq("id",e);if(i)throw i;console.log("Successfully locked audit with v4 JSON snapshot")}catch(e){throw console.error("Error locking audit:",e),e}},rN=async e=>{try{console.log("Unlocking audit:",e);let{error:t}=await d.supabase.from("audit_reports").update({is_locked:!1,snapshot_data:null,snapshot_generated_at:null,snapshot_version:null,html_snapshot:null}).eq("id",e);if(t)throw t;console.log("Successfully unlocked audit - will now use live templates")}catch(e){throw console.error("Error unlocking audit:",e),e}},rS=async e=>{try{for(let t of(console.log("Bulk locking audits with version v4:",e.length),e))await rk(t);console.log("Successfully bulk locked all audits with v4 snapshots")}catch(e){throw console.error("Error bulk locking audits:",e),e}},rC=async e=>{try{console.log("Bulk unlocking audits:",e.length);let{error:t}=await d.supabase.from("audit_reports").update({is_locked:!1,snapshot_data:null,snapshot_generated_at:null,snapshot_version:null,html_snapshot:null}).in("id",e);if(t)throw t;console.log("Successfully bulk unlocked audits - they will use live templates")}catch(e){throw console.error("Error bulk unlocking audits:",e),e}};e.s(["AuditDashboard",0,({refreshTrigger:e})=>{let{audits:t,loading:i,selectedAudits:s,showArchived:n,setShowArchived:l,copyShareUrl:u,viewAudit:m,deleteAudit:h,archiveAudits:f,restoreAudits:p,handleSelectAudit:x,handleSelectAll:y,copyAuditCode:v,fetchAudits:b,editingAudit:w,setEditingAudit:_,toggleAuditLock:j,bulkLockSelected:k,bulkUnlockSelected:N}=(e=>{let[t,r]=(0,a.useState)([]),[i,s]=(0,a.useState)(!0),[n,l]=(0,a.useState)(null),[o,u]=(0,a.useState)(new Set),[m,h]=(0,a.useState)(!1),{toast:f}=(0,c.useToast)(),g=async()=>{try{let{data:e,error:t}=await d.supabase.from("audit_reports").select("id, client_name, share_url_slug, audit_code, created_at, status, reviewer_name, loom_video_url, key_strengths, priority_actions, strategic_insights, review_status, audit_data, ai_feedback, is_locked, snapshot_data, snapshot_generated_at, snapshot_version").order("created_at",{ascending:!1});if(t)throw t;let{data:a,error:i}=await d.supabase.from("user_audit_codes").select("audit_report_id, user_id, created_at");if(i)throw i;let s=[...new Set((a||[]).map(e=>e.user_id))],{data:n,error:l}=await d.supabase.from("profiles").select("id, email, full_name").in("id",s);if(l)throw l;let o=(e||[]).map(e=>{let t=(a||[]).filter(t=>t.audit_report_id===e.id).map(e=>({...e,profiles:(n||[]).find(t=>t.id===e.user_id)||null}));return{...e,user_audit_codes:t}});r(o)}catch(e){console.error("Error fetching audits:",e),f({title:"Error",description:"Failed to fetch audit reports",variant:"destructive"})}finally{s(!1)}};(0,a.useEffect)(()=>{g()},[e]);let p=async(e,t)=>{try{if(t){if(!confirm("Unlocking this audit will cause it to re-render using the latest templates. Any previous snapshot will be lost. Are you sure you want to unlock it?"))return;await rN(e),f({title:"Success",description:"Audit unlocked successfully"})}else await rk(e),f({title:"Success",description:"Audit locked and snapshot generated"});g()}catch(e){f({title:"Error",description:`Failed to ${t?"unlock":"lock"} audit`,variant:"destructive"})}},x=async()=>{let e=Array.from(o);try{await rS(e),f({title:"Success",description:`${e.length} audit(s) locked successfully`}),u(new Set),g()}catch(e){f({title:"Error",description:"Failed to lock selected audits",variant:"destructive"})}},y=async()=>{if(!confirm("Unlocking these audits will cause them to re-render using the latest templates. Any previous snapshots will be lost. Are you sure?"))return;let e=Array.from(o);try{await rC(e),f({title:"Success",description:`${e.length} audit(s) unlocked successfully`}),u(new Set),g()}catch(e){f({title:"Error",description:"Failed to unlock selected audits",variant:"destructive"})}};return{audits:t,loading:i,editingAudit:n,setEditingAudit:l,selectedAudits:o,showArchived:m,setShowArchived:h,copyShareUrl:e=>{let t=`${window.location.origin}/audit/${e}`;navigator.clipboard.writeText(t),f({title:"Success",description:"Share URL copied to clipboard!"})},viewAudit:e=>{window.open(`/audit/${e}`,"_blank")},deleteAudit:async(e,t)=>{if(confirm(`Are you sure you want to delete the audit for ${t}?`))try{let{error:r}=await d.supabase.from("audit_reports").delete().eq("id",e);if(r)throw r;f({title:"Success",description:`Audit for ${t} deleted successfully`}),g()}catch(e){f({title:"Error",description:"Failed to delete audit report",variant:"destructive"})}},archiveAudits:async e=>{try{let{error:t}=await d.supabase.from("audit_reports").update({status:"archived"}).in("id",e);if(t)throw t;f({title:"Success",description:`${e.length} audit(s) archived successfully`}),u(new Set),g()}catch(e){f({title:"Error",description:"Failed to archive audits",variant:"destructive"})}},restoreAudits:async e=>{try{let{error:t}=await d.supabase.from("audit_reports").update({status:"active"}).in("id",e);if(t)throw t;f({title:"Success",description:`${e.length} audit(s) restored successfully`}),u(new Set),g()}catch(e){f({title:"Error",description:"Failed to restore audits",variant:"destructive"})}},handleSelectAudit:(e,t)=>{let r=new Set(o);t?r.add(e):r.delete(e),u(r)},handleSelectAll:e=>{let r=t.filter(e=>m?"archived"===e.status:"archived"!==e.status);e?u(new Set(r.map(e=>e.id))):u(new Set)},copyAuditCode:(e,t)=>{navigator.clipboard.writeText(e),f({title:"Success",description:`Audit code for ${t} copied to clipboard!`})},fetchAudits:g,toggleAuditLock:p,bulkLockSelected:x,bulkUnlockSelected:y}})(e),{submittingReview:S,submitReview:C}=(e=>{let[t,r]=(0,a.useState)(null),{toast:i}=(0,c.useToast)();return{submittingReview:t,submitReview:async(t,a)=>{r(t);try{let r={reviewer_name:a.reviewer_name,review_status:"completed"};if("include"===a.video_option){let e=(e=>{if(e.includes("/embed/"))return e;let t=e.match(/loom\.com\/share\/([a-zA-Z0-9]+)/);if(t)return`https://www.loom.com/embed/${t[1]}`;let r=e.match(/src="([^"]*loom\.com\/embed\/[^"]*)"/);return r?r[1]:e})(a.loom_video_url);r={...r,loom_video_url:e,key_strengths:a.key_strengths.split("\n").filter(e=>e.trim()),priority_actions:a.priority_actions.split("\n").filter(e=>e.trim()),strategic_insights:a.strategic_insights.split("\n").filter(e=>e.trim()),ai_feedback:null}}else r={...r,loom_video_url:null,key_strengths:null,priority_actions:null,strategic_insights:null,ai_feedback:a.ai_feedback};let{error:s}=await d.supabase.from("audit_reports").update(r).eq("id",t);if(s)throw s;i({title:"Success",description:"Review submitted successfully!"}),e()}catch(e){i({title:"Error",description:"Failed to submit review",variant:"destructive"})}finally{r(null)}}}})(b),A=e=>{_(e)};if(i)return(0,r.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,r.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading audit reports..."})]});let F=t.filter(e=>n?"archived"===e.status:"archived"!==e.status),D=t.filter(e=>"archived"!==e.status).length,M=t.filter(e=>"archived"===e.status).length,E=t.filter(e=>"completed"===e.review_status).length,V=t.filter(e=>"pending"===e.review_status).length;return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(g,{totalAudits:t.length,completedCount:E,pendingCount:V,activeCount:D}),(0,r.jsxs)(o.Card,{className:"shadow-lg border-0 bg-gradient-to-r from-white to-gray-50",children:[(0,r.jsx)(H,{showArchived:n,activeCount:D,archivedCount:M,selectedAudits:s,totalCount:F.length,onToggleArchived:l,onSelectAll:y,onBulkArchive:()=>f(Array.from(s)),onBulkRestore:()=>p(Array.from(s)),onBulkLock:k,onBulkUnlock:N}),(0,r.jsx)("div",{className:"p-0",children:(0,r.jsx)(eG,{audits:F,selectedAudits:s,onSelectAudit:x,onSelectAll:y,onCopyAuditCode:v,onViewAudit:m,onCopyShareUrl:u,onDeleteAudit:h,onEditAudit:A,onToggleLock:j})})]}),(0,r.jsx)(ry,{editingAudit:w,submittingReview:S,filteredAudits:F,selectedAudits:s,onSelectAudit:x,onEditAudit:A,onCopyAuditCode:v,onViewAudit:m,onCopyShareUrl:u,onDeleteAudit:h,onSubmitReview:C,onCancelEdit:()=>{_(null)}})]})}],42082)}]);