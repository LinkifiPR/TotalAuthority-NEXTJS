(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,61001,e=>{"use strict";var t=e.i(43476),a=e.i(71645),i=e.i(18566),n=e.i(91386),l=e.i(18462),s=e.i(39412),r=e.i(11522),o=e.i(67881),d=e.i(75254);let c=(0,d.default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var u=e.i(86536),m=e.i(78917);let h=({isEditing:e,saving:a,onPreview:i,onSaveDraft:n,onPublish:l,onCancel:s})=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:e?"Edit Post":"New Post"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(o.Button,{variant:"outline",onClick:i,className:"flex items-center gap-2",children:[(0,t.jsx)(m.ExternalLink,{className:"w-4 h-4"}),"Preview"]}),(0,t.jsxs)(o.Button,{variant:"outline",onClick:n,disabled:a,children:[(0,t.jsx)(c,{className:"w-4 h-4 mr-2"}),"Save Draft"]}),(0,t.jsxs)(o.Button,{onClick:l,disabled:a,children:[(0,t.jsx)(u.Eye,{className:"w-4 h-4 mr-2"}),"Publish"]}),(0,t.jsx)(o.Button,{variant:"outline",onClick:s,children:"Cancel"})]})]});var g=e.i(27341),p=e.i(70065),x=e.i(23750),b=e.i(10708),v=e.i(84762);let f=e.i(47167).default.env.NEXT_PUBLIC_SITE_URL||"https://totalauthority.com",j=f.endsWith("/")?f.slice(0,-1):f,y=({formData:e,onInputChange:a})=>(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(b.Label,{htmlFor:"title",children:"Title"}),(0,t.jsx)(x.Input,{id:"title",value:e.title,onChange:e=>a("title",e.target.value),placeholder:"Enter post title",className:"text-lg font-semibold"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b.Label,{htmlFor:"slug",children:"URL Slug"}),(0,t.jsx)(x.Input,{id:"slug",value:e.slug,onChange:e=>a("slug",e.target.value),placeholder:"url-slug"}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[j,"/blog/",e.slug]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b.Label,{htmlFor:"excerpt",children:"Excerpt"}),(0,t.jsx)(v.Textarea,{id:"excerpt",value:e.excerpt,onChange:e=>a("excerpt",e.target.value),placeholder:"Brief description of the post for listings and SEO",rows:3})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b.Label,{htmlFor:"author_name",children:"Author Name"}),(0,t.jsx)(x.Input,{id:"author_name",value:e.author_name||"",onChange:e=>a("author_name",e.target.value),placeholder:"Author name (e.g., TotalAuthority Team)"})]})]}),w=({formData:e,onInputChange:a})=>(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(b.Label,{htmlFor:"meta_title",children:"Meta Title"}),(0,t.jsx)(x.Input,{id:"meta_title",value:e.meta_title,onChange:e=>a("meta_title",e.target.value),placeholder:"SEO title (defaults to post title)"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b.Label,{htmlFor:"meta_description",children:"Meta Description"}),(0,t.jsx)(v.Textarea,{id:"meta_description",value:e.meta_description,onChange:e=>a("meta_description",e.target.value),placeholder:"SEO description (defaults to excerpt)",rows:3})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b.Label,{htmlFor:"canonical_url",children:"Canonical URL"}),(0,t.jsx)(x.Input,{id:"canonical_url",value:e.canonical_url,onChange:e=>a("canonical_url",e.target.value),placeholder:`${j}/blog/post-slug`})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b.Label,{htmlFor:"og_image_url",children:"Social Media Image URL"}),(0,t.jsx)(x.Input,{id:"og_image_url",value:e.og_image_url,onChange:e=>a("og_image_url",e.target.value),placeholder:"https://example.com/image.jpg"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b.Label,{htmlFor:"og_image_alt",children:"Social Media Image Alt Text"}),(0,t.jsx)(x.Input,{id:"og_image_alt",value:e.og_image_alt,onChange:e=>a("og_image_alt",e.target.value),placeholder:"Describe the social media image"})]})]});var k=e.i(19036),N=e.i(62870);let C=({formData:e,onInputChange:a})=>(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(b.Label,{children:"Search Engine Indexing"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Allow search engines to index this page"})]}),(0,t.jsx)(k.Switch,{checked:e.is_indexed,onCheckedChange:e=>a("is_indexed",e)})]}),e.reading_time&&(0,t.jsxs)("div",{children:[(0,t.jsx)(b.Label,{children:"Reading Time"}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[e.reading_time," minutes (auto-calculated)"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b.Label,{children:"Status"}),(0,t.jsxs)(N.Select,{value:e.status,onValueChange:e=>a("status",e),children:[(0,t.jsx)(N.SelectTrigger,{children:(0,t.jsx)(N.SelectValue,{})}),(0,t.jsxs)(N.SelectContent,{children:[(0,t.jsx)(N.SelectItem,{value:"draft",children:"Draft"}),(0,t.jsx)(N.SelectItem,{value:"published",children:"Published"})]})]})]})]});var T=e.i(94179),S=e.i(7233),L=e.i(37727);let I=({tags:e,onTagsChange:i})=>{let[l,s]=(0,a.useState)(""),[r,d]=(0,a.useState)([]),[c,u]=(0,a.useState)(!1);(0,a.useEffect)(()=>{m()},[]);let m=async()=>{try{let{data:e,error:t}=await n.supabase.from("blog_posts").select("tags").not("tags","is",null);if(t)return void console.error("Error fetching tags:",t);let a=new Set;e?.forEach(e=>{e.tags&&Array.isArray(e.tags)&&e.tags.forEach(e=>a.add(e))}),d(Array.from(a).sort())}catch(e){console.error("Error fetching existing tags:",e)}},h=t=>{let a=t||l.trim();a&&!e.includes(a)&&(i([...e,a]),s(""),u(!1),m())},g=r.filter(t=>!e.includes(t)&&t.toLowerCase().includes(l.toLowerCase())).slice(0,8);return(0,t.jsxs)("div",{children:[(0,t.jsx)(b.Label,{children:"Tags"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:e.map((a,n)=>(0,t.jsxs)(T.Badge,{variant:"secondary",className:"flex items-center gap-1",children:[a,(0,t.jsx)("button",{onClick:()=>{i(e.filter(e=>e!==a))},className:"ml-1 hover:text-red-500",children:(0,t.jsx)(L.X,{className:"w-3 h-3"})})]},n))}),(0,t.jsx)("div",{className:"relative",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(x.Input,{value:l,onChange:e=>s(e.target.value),placeholder:"Add a tag or select from existing",onKeyPress:e=>"Enter"===e.key&&h(),onFocus:()=>{u(!0)},onBlur:()=>{setTimeout(()=>u(!1),200)}}),c&&(g.length>0||r.length>0)&&(0,t.jsx)("div",{className:"absolute top-full left-0 right-0 z-50 mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-48 overflow-y-auto",children:(0,t.jsxs)("div",{className:"p-2",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Existing tags:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:(l?g:r.filter(t=>!e.includes(t)).slice(0,10)).map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>h(e),className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:e},e))})]})})]}),(0,t.jsx)(o.Button,{type:"button",onClick:()=>h(),size:"sm",children:(0,t.jsx)(S.Plus,{className:"w-4 h-4"})})]})})]})},E=()=>(0,t.jsx)("style",{dangerouslySetInnerHTML:{__html:`
        [contenteditable] ul {
          list-style-type: disc !important;
          margin-left: 1.5rem !important;
          padding-left: 1rem !important;
          margin-top: 0.5rem !important;
          margin-bottom: 0.5rem !important;
        }
        
        [contenteditable] ol {
          list-style-type: decimal !important;
          margin-left: 1.5rem !important;
          padding-left: 1rem !important;
          margin-top: 0.5rem !important;
          margin-bottom: 0.5rem !important;
        }
        
        [contenteditable] li {
          margin-bottom: 0.25rem !important;
          display: list-item !important;
          list-style-position: outside !important;
        }
        
        [contenteditable] ul ul,
        [contenteditable] ol ol {
          margin-left: 1rem !important;
        }
        
        [contenteditable] a {
          color: hsl(22 90% 52%) !important;
          font-weight: 600 !important;
          text-decoration: underline !important;
        }
        
        [contenteditable] a:hover {
          color: hsl(22 90% 45%) !important;
        }
        
        [contenteditable] h1 {
          font-size: 2.25rem !important;
          font-weight: bold !important;
          margin-bottom: 1rem !important;
          line-height: 1.2 !important;
        }
        
        [contenteditable] h2 {
          font-size: 1.875rem !important;
          font-weight: bold !important;
          margin-bottom: 0.75rem !important;
          line-height: 1.3 !important;
        }
        
        [contenteditable] h3 {
          font-size: 1.5rem !important;
          font-weight: bold !important;
          margin-bottom: 0.5rem !important;
          line-height: 1.4 !important;
        }
      `}}),R=({content:e,onChange:t})=>(a.default.useEffect(()=>{let a=a=>{let i=a.target;if(i.classList.contains("cta-remove-btn")){let n,l;a.preventDefault(),a.stopPropagation();let s=i.getAttribute("data-block-id");s&&((n=document.createElement("div")).innerHTML=e,(l=n.querySelector(`[data-block-id="${s}"]`))&&(l.remove(),t(n.innerHTML)))}};return document.addEventListener("click",a),()=>{document.removeEventListener("click",a)}},[e]),null),M=()=>(0,t.jsx)("style",{dangerouslySetInnerHTML:{__html:`
        .youtube-embed {
          margin: 16px 0;
          position: relative;
        }
        
        .youtube-caption {
          margin-top: 8px;
          text-align: center;
          font-size: 14px;
          color: #6b7280;
          font-style: italic;
        }
        
        .image-container {
          margin: 16px 0;
          display: block;
          position: relative;
        }
        
        .image-container img {
          max-width: 100%;
          height: auto;
          border-radius: 8px;
        }
      `}});var _=e.i(20682),A=e.i(30374);let U=({isOpen:e,onClose:i,onInsert:n,initialData:l})=>{let[s,r]=(0,a.useState)({url:"",alt:"",title:"",width:"",height:"",alignment:"center",linkUrl:"",linkNewTab:!1,linkNofollow:!1,linkSponsored:!1});(0,a.useEffect)(()=>{l&&r({url:l.url||"",alt:l.alt||"",title:l.title||"",width:l.width||"",height:l.height||"",alignment:l.alignment||"center",linkUrl:l.linkUrl||"",linkNewTab:l.linkNewTab||!1,linkNofollow:l.linkNofollow||!1,linkSponsored:l.linkSponsored||!1})},[l]);let d=()=>{i(),r({url:"",alt:"",title:"",width:"",height:"",alignment:"center",linkUrl:"",linkNewTab:!1,linkNofollow:!1,linkSponsored:!1})},c=l?.url&&l.url.includes("supabase");return(0,t.jsx)(A.Dialog,{open:e,onOpenChange:d,children:(0,t.jsxs)(A.DialogContent,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,t.jsx)(A.DialogHeader,{children:(0,t.jsx)(A.DialogTitle,{children:c?"Edit Image":"Insert/Edit Image"})}),(0,t.jsxs)("div",{className:"space-y-6",children:[!c&&(0,t.jsxs)("div",{children:[(0,t.jsx)(b.Label,{htmlFor:"imageUrl",children:"Image URL *"}),(0,t.jsx)(x.Input,{id:"imageUrl",value:s.url,onChange:e=>r({...s,url:e.target.value}),placeholder:"https://example.com/image.jpg"})]}),c&&s.url&&(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)(b.Label,{className:"text-sm font-medium mb-2 block",children:"Uploaded Image"}),(0,t.jsx)("img",{src:s.url,alt:s.alt||"Uploaded image",className:"max-w-full max-h-32 object-contain border rounded"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b.Label,{htmlFor:"altText",children:"Alt Text (SEO & Accessibility) *"}),(0,t.jsx)(v.Textarea,{id:"altText",value:s.alt,onChange:e=>r({...s,alt:e.target.value}),placeholder:"Describe the image for accessibility and SEO",rows:2})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b.Label,{htmlFor:"titleText",children:"Title (Tooltip on hover)"}),(0,t.jsx)(x.Input,{id:"titleText",value:s.title,onChange:e=>r({...s,title:e.target.value}),placeholder:"Optional tooltip text"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(b.Label,{htmlFor:"width",children:"Width"}),(0,t.jsx)(x.Input,{id:"width",value:s.width,onChange:e=>r({...s,width:e.target.value}),placeholder:"e.g., 300px, 50%, auto"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b.Label,{htmlFor:"height",children:"Height"}),(0,t.jsx)(x.Input,{id:"height",value:s.height,onChange:e=>r({...s,height:e.target.value}),placeholder:"e.g., 200px, auto"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b.Label,{htmlFor:"alignment",children:"Alignment"}),(0,t.jsxs)(N.Select,{value:s.alignment,onValueChange:e=>r({...s,alignment:e}),children:[(0,t.jsx)(N.SelectTrigger,{children:(0,t.jsx)(N.SelectValue,{})}),(0,t.jsxs)(N.SelectContent,{children:[(0,t.jsx)(N.SelectItem,{value:"left",children:"Left"}),(0,t.jsx)(N.SelectItem,{value:"center",children:"Center"}),(0,t.jsx)(N.SelectItem,{value:"right",children:"Right"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(b.Label,{htmlFor:"linkUrl",children:"Link URL (Make image clickable)"}),(0,t.jsx)(x.Input,{id:"linkUrl",value:s.linkUrl,onChange:e=>r({...s,linkUrl:e.target.value}),placeholder:"https://example.com (optional)"})]}),s.linkUrl&&(0,t.jsxs)("div",{className:"space-y-3 p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium text-sm",children:"Link Options"}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(b.Label,{htmlFor:"linkNewTab",className:"text-sm font-medium",children:"Open in new tab"}),(0,t.jsx)(k.Switch,{id:"linkNewTab",checked:s.linkNewTab,onCheckedChange:e=>r({...s,linkNewTab:e})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(b.Label,{htmlFor:"linkNofollow",className:"text-sm font-medium",children:"Add nofollow"}),(0,t.jsx)(k.Switch,{id:"linkNofollow",checked:s.linkNofollow,onCheckedChange:e=>r({...s,linkNofollow:e})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(b.Label,{htmlFor:"linkSponsored",className:"text-sm font-medium",children:"Mark as sponsored"}),(0,t.jsx)(k.Switch,{id:"linkSponsored",checked:s.linkSponsored,onCheckedChange:e=>r({...s,linkSponsored:e})})]})]})]}),s.url&&(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)(b.Label,{className:"text-sm font-medium mb-2 block",children:"Preview"}),(0,t.jsx)("div",{className:`flex ${"left"===s.alignment?"justify-start":"right"===s.alignment?"justify-end":"justify-center"}`,children:(0,t.jsx)("img",{src:s.url,alt:s.alt,title:s.title,style:{width:s.width||"auto",height:s.height||"auto",maxWidth:"300px",maxHeight:"200px"},className:"border rounded"})})]}),(0,t.jsx)(o.Button,{onClick:()=>{s.url&&s.alt&&(n(s),d())},className:"w-full",disabled:!s.url||!s.alt,children:c?"Update Image":"Insert Image"})]})]})})},H=(0,d.default)("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]),F=(0,d.default)("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]),z=(0,d.default)("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]),D=({onFormatText:e,onInsertQuote:a})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(o.Button,{variant:"outline",size:"sm",onClick:()=>e("bold"),className:"flex items-center gap-2 bg-white hover:bg-gray-100",type:"button",children:[(0,t.jsx)(H,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Bold"})]}),(0,t.jsxs)(o.Button,{variant:"outline",size:"sm",onClick:()=>e("italic"),className:"flex items-center gap-2 bg-white hover:bg-gray-100",type:"button",children:[(0,t.jsx)(F,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Italic"})]}),(0,t.jsxs)(o.Button,{variant:"outline",size:"sm",onClick:a,className:"flex items-center gap-2 bg-white hover:bg-gray-100",type:"button",children:[(0,t.jsx)(z,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Quote"})]})]}),B=(0,d.default)("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]),P=(0,d.default)("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]),$=(0,d.default)("Heading3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]),O=({onInsertHeading:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(o.Button,{variant:"outline",size:"sm",onClick:()=>e(1),className:"flex items-center gap-2 bg-white hover:bg-gray-100",type:"button",children:[(0,t.jsx)(B,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"H1"})]}),(0,t.jsxs)(o.Button,{variant:"outline",size:"sm",onClick:()=>e(2),className:"flex items-center gap-2 bg-white hover:bg-gray-100",type:"button",children:[(0,t.jsx)(P,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"H2"})]}),(0,t.jsxs)(o.Button,{variant:"outline",size:"sm",onClick:()=>e(3),className:"flex items-center gap-2 bg-white hover:bg-gray-100",type:"button",children:[(0,t.jsx)($,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"H3"})]})]}),q=(0,d.default)("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),Y=(0,d.default)("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]),V=({onInsertList:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(o.Button,{variant:"outline",size:"sm",onClick:()=>e(!1),className:"flex items-center gap-2 bg-white hover:bg-gray-100",type:"button",children:[(0,t.jsx)(q,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Bullets"})]}),(0,t.jsxs)(o.Button,{variant:"outline",size:"sm",onClick:()=>e(!0),className:"flex items-center gap-2 bg-white hover:bg-gray-100",type:"button",children:[(0,t.jsx)(Y,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Numbers"})]})]}),Q=(0,d.default)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),J=({onLinkClick:e,showLinkDialog:a,setShowLinkDialog:i,linkUrl:n,setLinkUrl:l,linkText:s,setLinkText:r,linkNofollow:d,setLinkNofollow:c,linkSponsored:u,setLinkSponsored:m,linkNewTab:h,setLinkNewTab:g,onInsertLink:p})=>(0,t.jsxs)(A.Dialog,{open:a,onOpenChange:i,children:[(0,t.jsx)(A.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(o.Button,{variant:"outline",size:"sm",className:"flex items-center gap-2 bg-white hover:bg-gray-100",type:"button",onClick:e,children:[(0,t.jsx)(Q,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Link"})]})}),(0,t.jsxs)(A.DialogContent,{className:"max-w-md",children:[(0,t.jsx)(A.DialogHeader,{children:(0,t.jsx)(A.DialogTitle,{children:"Insert Link"})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(b.Label,{htmlFor:"linkText",children:"Link Text"}),(0,t.jsx)(x.Input,{id:"linkText",value:s,onChange:e=>r(e.target.value),placeholder:"Click here"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b.Label,{htmlFor:"linkUrl",children:"URL"}),(0,t.jsx)(x.Input,{id:"linkUrl",value:n,onChange:e=>l(e.target.value),placeholder:"https://example.com"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(b.Label,{htmlFor:"linkNewTab",className:"text-sm font-medium",children:"Open in new tab"}),(0,t.jsx)(k.Switch,{id:"linkNewTab",checked:h,onCheckedChange:g})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(b.Label,{htmlFor:"linkNofollow",className:"text-sm font-medium",children:"Add nofollow"}),(0,t.jsx)(k.Switch,{id:"linkNofollow",checked:d,onCheckedChange:c})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(b.Label,{htmlFor:"linkSponsored",className:"text-sm font-medium",children:"Mark as sponsored"}),(0,t.jsx)(k.Switch,{id:"linkSponsored",checked:u,onCheckedChange:m})]})]}),(0,t.jsx)(o.Button,{onClick:p,className:"w-full",type:"button",children:"Insert Link"})]})]})]});var W=e.i(69074);let K=({onImageUpload:e,uploading:a})=>(0,t.jsxs)(o.Button,{variant:"outline",size:"sm",onClick:e,disabled:a,className:"flex items-center gap-2 bg-white hover:bg-gray-100",type:"button",children:[(0,t.jsx)(W.Upload,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:a?"Uploading...":"Insert Image"})]});var X=e.i(23616);let G=({onFormatText:e,onInsertHeading:a,onInsertList:i,onInsertQuote:n,onLinkClick:l,onImageUpload:s,onYouTubeClick:r,uploading:d,showLinkDialog:c,setShowLinkDialog:u,linkUrl:m,setLinkUrl:h,linkText:g,setLinkText:p,linkNofollow:x,setLinkNofollow:b,linkSponsored:v,setLinkSponsored:f,linkNewTab:j,setLinkNewTab:y,onInsertLink:w,showImageDialog:k,setShowImageDialog:N,showImageEditor:C,setShowImageEditor:T,imageUrl:S,setImageUrl:L,imageAlt:I,setImageAlt:E,onInsertImageUrl:R,onInsertImage:M,imageToEdit:_})=>(0,t.jsxs)("div",{className:"border rounded-lg p-3 bg-gray-50",children:[(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsx)(O,{onInsertHeading:a}),(0,t.jsx)(D,{onFormatText:e,onInsertQuote:n}),(0,t.jsx)(V,{onInsertList:i}),(0,t.jsx)(J,{onLinkClick:l,showLinkDialog:c,setShowLinkDialog:u,linkUrl:m,setLinkUrl:h,linkText:g,setLinkText:p,linkNofollow:x,setLinkNofollow:b,linkSponsored:v,setLinkSponsored:f,linkNewTab:j,setLinkNewTab:y,onInsertLink:w}),(0,t.jsx)(K,{onImageUpload:s,uploading:d}),(0,t.jsxs)(o.Button,{variant:"outline",size:"sm",onClick:r,className:"flex items-center gap-2 bg-white hover:bg-gray-100",type:"button",children:[(0,t.jsx)(X.Youtube,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"YouTube"})]})]}),(0,t.jsx)(U,{isOpen:C,onClose:()=>T(!1),onInsert:M,initialData:_||(S?{url:S,alt:I}:void 0)})]}),Z=({editorRef:e,onInput:a,onPaste:i})=>(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)("div",{ref:e,contentEditable:!0,onInput:a,onPaste:i,className:"min-h-[400px] p-4 border rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-orange-500",style:{lineHeight:"1.6",fontSize:"16px",color:"#374151"}})}),ee=({content:e})=>(0,t.jsxs)("div",{className:"min-h-[400px] p-4 border rounded-lg bg-white",children:[(0,t.jsx)("style",{dangerouslySetInnerHTML:{__html:`
        `}}),(0,t.jsx)("div",{className:"prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:e}})]}),et=({activeTab:e,setActiveTab:a,content:i,editorLogic:n,youtubeManager:l,handleImageUploadClick:s,handleImageInsert:r,handleEditorInput:o,handlePaste:d,htmlContent:c,handleHtmlChange:u})=>(0,t.jsxs)(g.Tabs,{value:e,onValueChange:e=>a(e),children:[(0,t.jsxs)(g.TabsList,{className:"grid w-full grid-cols-3",children:[(0,t.jsx)(g.TabsTrigger,{value:"edit",children:"Edit"}),(0,t.jsx)(g.TabsTrigger,{value:"preview",children:"Preview"}),(0,t.jsx)(g.TabsTrigger,{value:"html",children:"HTML"})]}),(0,t.jsxs)(g.TabsContent,{value:"edit",className:"space-y-4",children:[(0,t.jsx)(G,{onFormatText:n.formatText,onInsertHeading:n.insertHeading,onInsertList:n.insertList,onInsertQuote:n.insertQuote,onLinkClick:n.handleLinkClick,onImageUpload:s,onYouTubeClick:l.handleYouTubeClick,uploading:n.uploading,showLinkDialog:n.showLinkDialog,setShowLinkDialog:n.setShowLinkDialog,linkUrl:n.linkUrl,setLinkUrl:n.setLinkUrl,linkText:n.linkText,setLinkText:n.setLinkText,linkNofollow:n.linkNofollow,setLinkNofollow:n.setLinkNofollow,linkSponsored:n.linkSponsored,setLinkSponsored:n.setLinkSponsored,linkNewTab:n.linkNewTab,setLinkNewTab:n.setLinkNewTab,onInsertLink:n.insertLink,showImageDialog:n.showImageDialog,setShowImageDialog:n.setShowImageDialog,showImageEditor:n.showImageEditor,setShowImageEditor:n.setShowImageEditor,imageUrl:n.imageUrl,setImageUrl:n.setImageUrl,imageAlt:n.imageAlt,setImageAlt:n.setImageAlt,onInsertImageUrl:n.insertImageUrl,onInsertImage:r,imageToEdit:n.imageToEdit}),(0,t.jsx)(Z,{editorRef:n.editorRef,onInput:o,onPaste:d}),(0,t.jsx)("div",{className:"text-sm text-gray-500 mt-2",children:"Use the toolbar buttons above to format your content and insert elements like images and YouTube videos."})]}),(0,t.jsx)(g.TabsContent,{value:"preview",className:"space-y-4",children:(0,t.jsx)(ee,{content:i})}),(0,t.jsx)(g.TabsContent,{value:"html",className:"space-y-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Raw HTML"}),(0,t.jsx)("textarea",{value:c||i,onChange:e=>u?.(e.target.value),className:"w-full min-h-[400px] p-4 border rounded-lg bg-white font-mono text-sm focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Enter raw HTML content..."}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Edit the raw HTML directly. Changes will sync with the visual editor."})]})})]}),ea=({isOpen:e,onClose:i,onInsert:n,initialData:l})=>{let[s,r]=(0,a.useState)(l?.url||""),[d,c]=(0,a.useState)(l?.caption||""),[u,m]=(0,a.useState)(l?.videoId||"");(0,a.useEffect)(()=>{if(s){let e;m(((e=s.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/))?e[1]:null)||"")}else m("")},[s]);let h=()=>{r(l?.url||""),c(l?.caption||""),m(l?.videoId||""),i()};return(0,t.jsx)(A.Dialog,{open:e,onOpenChange:h,children:(0,t.jsxs)(A.DialogContent,{className:"max-w-2xl",children:[(0,t.jsx)(A.DialogHeader,{children:(0,t.jsxs)(A.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(X.Youtube,{className:"w-5 h-5"}),l?"Edit YouTube Video":"Embed YouTube Video"]})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(b.Label,{htmlFor:"youtube-url",children:"YouTube URL"}),(0,t.jsx)(x.Input,{id:"youtube-url",type:"url",placeholder:"https://www.youtube.com/watch?v=...",value:s,onChange:e=>r(e.target.value)}),s&&!u&&(0,t.jsx)("p",{className:"text-sm text-red-600 mt-1",children:"Invalid YouTube URL"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b.Label,{htmlFor:"youtube-caption",children:"Caption (Optional)"}),(0,t.jsx)(v.Textarea,{id:"youtube-caption",placeholder:"Add a caption to describe this video...",value:d,onChange:e=>c(e.target.value),rows:2})]}),u&&(0,t.jsxs)("div",{children:[(0,t.jsx)(b.Label,{children:"Preview"}),(0,t.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,t.jsx)("div",{className:"relative w-full h-0 pb-[56.25%]",children:(0,t.jsx)("iframe",{className:"absolute top-0 left-0 w-full h-full",src:`https://www.youtube.com/embed/${u}`,title:"YouTube video preview",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),d&&(0,t.jsx)("div",{className:"p-3 bg-gray-50",children:(0,t.jsx)("p",{className:"text-sm text-gray-600 italic",children:d})})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(o.Button,{variant:"outline",onClick:h,children:"Cancel"}),(0,t.jsxs)(o.Button,{onClick:()=>{s.trim()&&u&&(n({id:l?.id||`youtube-${Date.now()}`,url:s.trim(),videoId:u,caption:d.trim()}),i())},disabled:!u,children:[l?"Update":"Insert"," Video"]})]})]})]})})},ei=({youtubeManager:e})=>(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(ea,{isOpen:e.showYouTubeEditor,onClose:()=>{e.setShowYouTubeEditor(!1),e.setYoutubeToEdit(null)},onInsert:e.insertYouTubeEmbed,initialData:e.youtubeToEdit||void 0})}),en=({content:e,onChange:i})=>{let{activeTab:l,setActiveTab:s,editorLogic:r,youtubeManager:o,handleImageUploadClick:d,handleImageInsert:c,handleEditorInput:u,handlePaste:m,htmlContent:h,handleHtmlChange:g}=(({content:e,onChange:t})=>{let[i,l]=(0,a.useState)("edit"),[s,r]=(0,a.useState)(e),o=(e=>{let t=(0,a.useRef)(null),[i,l]=(0,a.useState)(null),s=(()=>{let[e,t]=(0,a.useState)(""),[i,n]=(0,a.useState)(""),[l,s]=(0,a.useState)(!1),[r,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)(!1),[h,g]=(0,a.useState)(null);return{linkUrl:e,setLinkUrl:t,linkText:i,setLinkText:n,linkNofollow:l,setLinkNofollow:s,linkSponsored:r,setLinkSponsored:o,linkNewTab:d,setLinkNewTab:c,showLinkDialog:u,setShowLinkDialog:m,handleLinkClick:()=>{let e=window.getSelection();if(e&&e.rangeCount>0){g(e.getRangeAt(0).cloneRange());let t=e.toString().trim();t?n(t):n("")}else g(null),n("");t(""),s(!1),o(!1),c(!1),m(!0)},insertLink:(a,u)=>{if(e){if(h&&a.current){a.current.focus();let t=window.getSelection();if(t){t.removeAllRanges(),t.addRange(h);let a=t.toString().trim(),n=[];l&&n.push("nofollow"),r&&n.push("sponsored");let s=n.length>0?` rel="${n.join(" ")}"`:"",o=`<a href="${e}"${s}${d?' target="_blank"':""} style="color: hsl(22 90% 52%); font-weight: 600; text-decoration: underline;">${a||i||e}</a>`;if(a){h.deleteContents();let e=document.createElement("div");e.innerHTML=o;let t=e.firstChild;t&&h.insertNode(t)}else{let e=document.createElement("div");e.innerHTML=o+"&nbsp;";let t=e.firstChild;t&&h.insertNode(t)}t.removeAllRanges(),u()}}t(""),n(""),s(!1),o(!1),c(!1),g(null),m(!1)}}}})(),r=(()=>{let[e,t]=(0,a.useState)(!1),[i,l]=(0,a.useState)(!1),[s,r]=(0,a.useState)(!1),[o,d]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[m,h]=(0,a.useState)(null),[g,p]=(0,a.useState)(null),x=(0,a.useRef)(null),b=(0,a.useRef)(null),{toast:v}=(0,_.useToast)(),f=async e=>{let a=e.target.files?.[0];if(a){t(!0);try{let{data:{user:e},error:t}=await n.supabase.auth.getUser();if(t||!e)throw Error("You must be logged in to upload images");let i=a.name.split(".").pop(),l=`${Date.now()}-${Math.random().toString(36).substring(2)}.${i}`,s=`blog-images/${l}`,{error:o}=await n.supabase.storage.from("blog-media").upload(s,a);if(o)throw o;let{data:c}=n.supabase.storage.from("blog-media").getPublicUrl(s);d(c.publicUrl),u(a.name.split(".")[0].replace(/[-_]/g," ")),h(null),p(null),r(!0),v({title:"Success",description:"Image uploaded successfully. Configure your image settings."})}catch(e){console.error("Error uploading image:",e),v({title:"Error",description:"Failed to upload image",variant:"destructive"})}finally{t(!1),x.current&&(x.current.value="")}}};return{uploading:e,showImageDialog:i,setShowImageDialog:l,showImageEditor:s,setShowImageEditor:r,imageUrl:o,setImageUrl:d,imageAlt:c,setImageAlt:u,imageToEdit:m,fileInputRef:x,handleImageUpload:f,insertImageUrl:()=>{o&&(h(null),p(null),r(!0))},insertImage:(e,t,a,i)=>{if(console.log("insertImage called with:",{imageData:e,editorRef:!!t.current,isEditing:!!g}),!e.url||!t.current)return void console.error("Missing required data for image insertion:",{url:e.url,editor:!!t.current});t.current.focus();let n=["border-radius: 8px","max-width: 100%","height: auto","display: block"];e.width&&n.push(`width: ${e.width}`),e.height&&n.push(`height: ${e.height}`),n.push({left:"margin-right: auto; margin-left: 0",center:"margin-left: auto; margin-right: auto",right:"margin-left: auto; margin-right: 0"}[e.alignment]);let l=`img-${Date.now()}-${Math.random().toString(36).substring(2)}`,s=document.createElement("img");s.src=e.url,s.alt=e.alt,e.title&&(s.title=e.title),s.style.cssText=n.join("; "),s.setAttribute("data-image-id",l),s.setAttribute("data-image-data",JSON.stringify(e));let o=s;if(e.linkUrl){let t=document.createElement("a");t.href=e.linkUrl;let a=[];e.linkNofollow&&a.push("nofollow"),e.linkSponsored&&a.push("sponsored"),a.length>0&&(t.rel=a.join(" ")),e.linkNewTab&&(t.target="_blank"),t.appendChild(s),o=t}let c=document.createElement("div");c.className="image-container",c.style.cssText="margin: 16px 0; display: block; position: relative;",c.appendChild(o);try{if(g)console.log("Replacing existing image"),g.replaceWith(c),p(null);else{let e=window.getSelection(),a=!1;if((()=>{if(b.current){let e=window.getSelection();if(e)return e.removeAllRanges(),e.addRange(b.current),console.log("Cursor position restored"),!0}return!1})()){let t=e?.getRangeAt(0);t&&(console.log("Inserting at restored cursor position"),t.deleteContents(),t.insertNode(c),t.setStartAfter(c),t.collapse(!0),e?.removeAllRanges(),e?.addRange(t),a=!0)}if(!a)if(e&&e.rangeCount>0){console.log("Inserting at current cursor position");let t=e.getRangeAt(0);t.deleteContents(),t.insertNode(c),t.setStartAfter(c),t.collapse(!0),e.removeAllRanges(),e.addRange(t)}else console.log("No cursor position, appending to end"),t.current.appendChild(c)}console.log("Image inserted using DOM selection")}catch(e){console.error("Error inserting image:",e),t.current.appendChild(c)}b.current=null,a(),setTimeout(()=>i(),200),d(""),u(""),h(null),r(!1),console.log("Image insertion completed")},saveSelection:()=>{let e=window.getSelection();e&&e.rangeCount>0&&(b.current=e.getRangeAt(0).cloneRange(),console.log("Cursor position saved"))},startImageEdit:(e,t)=>{console.log("Starting image edit with data:",e),h(e),p(t),d(e.url),u(e.alt),r(!0)}}})(),o=()=>{t.current&&e(t.current.innerHTML)},d=()=>{((e,t)=>{if(console.log("addRemoveButtonsToImages called, editor exists:",!!e.current),!e.current)return;let a=e.current.querySelectorAll(".image-container"),i=e.current.querySelectorAll("img[data-image-id]:not([data-has-remove-btn])"),n=e.current.querySelectorAll("img");console.log("Found image containers:",a.length),console.log("Found standalone images:",i.length),console.log("Found all images:",n.length),console.log("Editor innerHTML length:",e.current.innerHTML.length),console.log("Editor innerHTML preview:",e.current.innerHTML.substring(e.current.innerHTML.length-500)),a.forEach(a=>{let i=a.querySelector("img[data-image-id]");if(!i||i.getAttribute("data-has-remove-btn")||(i.setAttribute("data-has-remove-btn","true"),a.querySelector(".editor-edit-btn")))return;let n=document.createElement("button");n.innerHTML="×",n.className="editor-remove-btn",n.style.cssText="position: absolute; top: 8px; right: 8px; width: 24px; height: 24px; background: #ef4444; border: none; border-radius: 50%; cursor: pointer; font-size: 16px; line-height: 1; display: flex; align-items: center; justify-content: center; font-weight: bold; z-index: 1000; opacity: 0; transition: opacity 0.2s; color: white;",n.title="Remove image",n.type="button",n.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),a.remove(),t()});let l=document.createElement("button");l.innerHTML="✏️",l.className="editor-edit-btn",l.style.cssText="position: absolute; top: 8px; right: 36px; width: 24px; height: 24px; background: #3b82f6; border: none; border-radius: 50%; cursor: pointer; font-size: 12px; line-height: 1; display: flex; align-items: center; justify-content: center; font-weight: bold; z-index: 1000; opacity: 0; transition: opacity 0.2s; color: white;",l.title="Edit image",l.type="button",l.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();let n=i.getAttribute("data-image-data");if(n&&e.current)try{let t=JSON.parse(n);console.log("Triggering edit event with data:",t);let i=new CustomEvent("editImage",{detail:{...t,sourceContainer:a},bubbles:!0});e.current.dispatchEvent(i)}catch(e){console.error("Error parsing image data:",e)}}),a.appendChild(n),a.appendChild(l),a.addEventListener("mouseenter",()=>{n.style.opacity="1",l.style.opacity="1"}),a.addEventListener("mouseleave",()=>{n.style.opacity="0",l.style.opacity="0"}),console.log("Added buttons to image container")}),i.forEach(a=>{if(a.closest(".image-container"))return void console.log("Skipping standalone image processing - already in container");if(a.setAttribute("data-has-remove-btn","true"),!a.parentElement?.classList.contains("editor-image-container")){let i=document.createElement("div");i.className="editor-image-container",i.style.cssText="position: relative; display: inline-block; margin: 16px 0;",a.parentNode?.insertBefore(i,a),i.appendChild(a);let n=document.createElement("button");n.innerHTML="×",n.className="editor-remove-btn",n.style.cssText="position: absolute; top: 8px; right: 8px; width: 24px; height: 24px; background: #ef4444; border: none; border-radius: 50%; cursor: pointer; font-size: 16px; line-height: 1; display: flex; align-items: center; justify-content: center; font-weight: bold; z-index: 1000; color: white;",n.title="Remove image",n.type="button",n.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),i.remove(),t()});let l=document.createElement("button");l.innerHTML="✏️",l.className="editor-edit-btn",l.style.cssText="position: absolute; top: 8px; right: 36px; width: 24px; height: 24px; background: #3b82f6; border: none; border-radius: 50%; cursor: pointer; font-size: 12px; line-height: 1; display: flex; align-items: center; justify-content: center; font-weight: bold; z-index: 1000; color: white;",l.title="Edit image",l.type="button",l.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();let n=a.getAttribute("data-image-data");if(n&&e.current)try{let t=JSON.parse(n);console.log("Triggering edit event with data:",t);let a=new CustomEvent("editImage",{detail:{...t,sourceContainer:i},bubbles:!0});e.current.dispatchEvent(a)}catch(e){console.error("Error parsing image data:",e)}}),i.appendChild(n),i.appendChild(l),console.log("Added buttons to standalone image container")}})})(t,o)};return{editorRef:t,handleContentChange:o,saveSelection:()=>{let e=window.getSelection();e&&e.rangeCount>0&&l(e.getRangeAt(0).cloneRange())},restoreSelection:()=>{if(i){let e=window.getSelection();e&&(e.removeAllRanges(),e.addRange(i))}},formatText:e=>{var t,a;return t=e,a=o,void(document.execCommand(t,!1),a())},insertHeading:e=>{var a,i,n;return a=e,i=t,n=o,void(i.current&&(i.current.focus(),document.execCommand("formatBlock",!1,`h${a}`),n()))},insertList:e=>{var a,i,n;return a=e,i=t,n=o,void(i.current&&(i.current.focus(),document.execCommand(a?"insertOrderedList":"insertUnorderedList",!1),n()))},insertQuote:()=>{var e,a;return e=t,a=o,void(e.current&&(e.current.focus(),document.execCommand("insertHTML",!1,'<blockquote style="border-left: 4px solid hsl(22 90% 52%); padding-left: 1rem; margin: 1rem 0; font-style: italic; color: #6b7280;">Your quote here</blockquote>'),a()))},...s,insertLink:()=>s.insertLink(t,o),...r,insertImage:e=>r.insertImage(e,t,o,d),addRemoveButtonsToImages:d}})(t),d=(({editorRef:e,onChange:t,handleContentChange:i,saveSelection:n})=>{let[l,s]=(0,a.useState)(!1),[r,o]=(0,a.useState)(null),[d,c]=(0,a.useState)(null),u=()=>{e.current&&e.current.querySelectorAll(".youtube-embed:not([data-has-buttons])").forEach(a=>{a.setAttribute("data-has-buttons","true"),a.style.position="relative";let i=document.createElement("button");i.innerHTML="×",i.style.cssText="position: absolute; top: 8px; right: 8px; width: 24px; height: 24px; background: #ef4444; border: none; border-radius: 50%; cursor: pointer; font-size: 16px; color: white; z-index: 1000; opacity: 0; transition: opacity 0.2s;",i.addEventListener("click",i=>{i.preventDefault(),i.stopPropagation(),a.remove(),t(e.current?.innerHTML||"")});let n=document.createElement("button");n.innerHTML="✏️",n.style.cssText="position: absolute; top: 8px; right: 36px; width: 24px; height: 24px; background: #3b82f6; border: none; border-radius: 50%; cursor: pointer; font-size: 12px; color: white; z-index: 1000; opacity: 0; transition: opacity 0.2s;",n.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();let t=a.getAttribute("data-youtube-data");t&&(o(JSON.parse(t)),s(!0))}),a.appendChild(i),a.appendChild(n),a.addEventListener("mouseenter",()=>{i.style.opacity="1",n.style.opacity="1"}),a.addEventListener("mouseleave",()=>{i.style.opacity="0",n.style.opacity="0"})})};return{showYouTubeEditor:l,setShowYouTubeEditor:s,youtubeToEdit:r,setYoutubeToEdit:o,insertYouTubeEmbed:t=>{if(!e.current)return;let a=`
      <div class="youtube-embed" data-youtube-id="${t.id}" data-youtube-data='${JSON.stringify(t)}'>
        <div class="relative w-full h-0 pb-[56.25%] mb-4">
          <iframe 
            class="absolute top-0 left-0 w-full h-full rounded-lg"
            src="https://www.youtube.com/embed/${t.videoId}" 
            title="YouTube video" 
            frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
            allowfullscreen>
          </iframe>
        </div>
        ${t.caption?`<div class="youtube-caption text-center text-sm text-gray-600 italic mb-4">${t.caption}</div>`:""}
      </div>
    `;if(r){let t=e.current.querySelector(`[data-youtube-id="${r.id}"]`);if(t){let e=document.createElement("div");e.innerHTML=a;let n=e.firstElementChild;t.parentNode?.replaceChild(n,t),i(),setTimeout(()=>u(),100),o(null);return}}let n=d;if(!n){let e=window.getSelection();e&&e.rangeCount>0&&(n=e.getRangeAt(0))}n||((n=document.createRange()).selectNodeContents(e.current),n.collapse(!1)),e.current.contains(n.commonAncestorContainer)||((n=document.createRange()).selectNodeContents(e.current),n.collapse(!1));let l=document.createElement("div");l.innerHTML=a;let s=l.firstElementChild;try{n.deleteContents(),n.insertNode(s),n.setStartAfter(s),n.collapse(!0);let e=window.getSelection();e&&(e.removeAllRanges(),e.addRange(n))}catch(t){console.error("Error inserting YouTube embed:",t),e.current.appendChild(s)}c(null),i(),setTimeout(()=>u(),100)},addRemoveButtonsToEmbeds:u,handleYouTubeClick:()=>{let e=window.getSelection();e&&e.rangeCount>0&&c(e.getRangeAt(0).cloneRange()),n?.(),s(!0)}}})({editorRef:o.editorRef,onChange:t,handleContentChange:o.handleContentChange,saveSelection:o.saveSelection});return(0,a.useEffect)(()=>{r(e),o.editorRef.current&&e!==o.editorRef.current.innerHTML&&(o.editorRef.current.innerHTML=e,setTimeout(()=>{o.addRemoveButtonsToImages(),d.addRemoveButtonsToEmbeds()},100))},[e,o.addRemoveButtonsToImages,d.addRemoveButtonsToEmbeds]),(0,a.useEffect)(()=>{let e=e=>{let t=e.detail,a=t.sourceContainer||e.target?.closest?.(".image-container")||e.target;if(t&&a){let{sourceContainer:e,...i}=t;o.startImageEdit(i,a)}};if(o.editorRef.current)return o.editorRef.current.addEventListener("editImage",e),()=>{o.editorRef.current&&o.editorRef.current.removeEventListener("editImage",e)}},[o.startImageEdit]),{activeTab:i,setActiveTab:e=>{if("edit"===i&&o.editorRef.current){let e=o.editorRef.current.innerHTML;r(e),t(e)}l(e),"edit"===e&&setTimeout(()=>{o.editorRef.current&&(o.editorRef.current.innerHTML=s,o.addRemoveButtonsToImages(),d.addRemoveButtonsToEmbeds())},50)},editorLogic:o,youtubeManager:d,handleImageUploadClick:()=>{o.saveSelection?.(),o.fileInputRef.current?.click()},handleImageInsert:e=>{o.insertImage(e)},handleEditorInput:e=>{let a=o.editorRef.current?.innerHTML||"";r(a),t(a),setTimeout(()=>{o.editorRef.current&&(o.addRemoveButtonsToImages(),d.addRemoveButtonsToEmbeds())},100)},handlePaste:e=>{setTimeout(()=>{let e=o.editorRef.current?.innerHTML||"";r(e),t(e),o.addRemoveButtonsToImages(),d.addRemoveButtonsToEmbeds()},100)},htmlContent:s,handleHtmlChange:e=>{r(e),t(e)}}})({content:e,onChange:i});return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(b.Label,{children:"Content"}),(0,t.jsx)(et,{activeTab:l,setActiveTab:s,content:e,editorLogic:r,youtubeManager:o,handleImageUploadClick:d,handleImageInsert:c,handleEditorInput:u,handlePaste:m,htmlContent:h,handleHtmlChange:g}),(0,t.jsx)(E,{}),(0,t.jsx)(R,{content:e,onChange:i}),(0,t.jsx)(ei,{youtubeManager:o}),(0,t.jsx)("input",{ref:r.fileInputRef,type:"file",accept:"image/*",onChange:r.handleImageUpload,className:"hidden"}),(0,t.jsx)(M,{})]})},el=({formData:e,onInputChange:a,onTagsChange:i})=>(0,t.jsxs)(g.Tabs,{defaultValue:"content",className:"space-y-6",children:[(0,t.jsxs)(g.TabsList,{children:[(0,t.jsx)(g.TabsTrigger,{value:"content",children:"Content"}),(0,t.jsx)(g.TabsTrigger,{value:"seo",children:"SEO & Meta"}),(0,t.jsx)(g.TabsTrigger,{value:"settings",children:"Settings"})]}),(0,t.jsx)(g.TabsContent,{value:"content",children:(0,t.jsxs)(p.Card,{children:[(0,t.jsx)(p.CardHeader,{children:(0,t.jsx)(p.CardTitle,{children:"Post Content"})}),(0,t.jsxs)(p.CardContent,{className:"space-y-6",children:[(0,t.jsx)(y,{formData:e,onInputChange:a}),(0,t.jsx)("div",{children:(0,t.jsx)(en,{content:e.content,onChange:e=>a("content",e)})}),(0,t.jsx)(I,{tags:e.tags,onTagsChange:i})]})]})}),(0,t.jsx)(g.TabsContent,{value:"seo",children:(0,t.jsxs)(p.Card,{children:[(0,t.jsx)(p.CardHeader,{children:(0,t.jsx)(p.CardTitle,{children:"SEO & Meta Tags"})}),(0,t.jsx)(p.CardContent,{children:(0,t.jsx)(w,{formData:e,onInputChange:a})})]})}),(0,t.jsx)(g.TabsContent,{value:"settings",children:(0,t.jsxs)(p.Card,{children:[(0,t.jsx)(p.CardHeader,{children:(0,t.jsx)(p.CardTitle,{children:"Post Settings"})}),(0,t.jsx)(p.CardContent,{children:(0,t.jsx)(C,{formData:e,onInputChange:a})})]})})]}),es=(0,d.default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),er=({imageUrl:e,imageAlt:i,onImageChange:l,onImageRemove:s})=>{let[r,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(i||""),m=(0,a.useRef)(null),{toast:h}=(0,_.useToast)(),g=async e=>{let t=e.target.files?.[0];if(t){console.log("Starting featured image upload...",t.name,t.size),d(!0);try{let{data:{session:e},error:a}=await n.supabase.auth.getSession();if(a)throw console.error("Session error:",a),Error("Authentication session error");if(!e||!e.user)throw console.error("No active session or user"),Error("You must be logged in to upload images. Please refresh the page and try again.");console.log("User authenticated:",e.user.id);let i=t.name.split(".").pop(),s=`featured-${Date.now()}-${Math.random().toString(36).substring(2)}.${i}`,r=`featured-images/${s}`;console.log("Uploading to path:",r);let{data:o,error:d}=await n.supabase.storage.from("blog-media").upload(r,t,{cacheControl:"3600",upsert:!1});if(d)throw console.error("Upload error:",d),d;console.log("Upload successful:",o);let{data:u}=n.supabase.storage.from("blog-media").getPublicUrl(r);console.log("Public URL:",u.publicUrl);let m=c||t.name.split(".")[0];l(u.publicUrl,m),h({title:"Success",description:"Featured image uploaded successfully"})}catch(e){console.error("Error uploading featured image:",e),h({title:"Upload Error",description:e.message||"Failed to upload featured image. Please try again.",variant:"destructive"})}finally{d(!1),m.current&&(m.current.value="")}}};return(0,t.jsx)(p.Card,{className:"border border-gray-200 shadow-sm",children:(0,t.jsx)(p.CardContent,{className:"p-4",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(b.Label,{className:"text-sm font-medium text-gray-900",children:"Featured Image"}),e?(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("img",{src:e,alt:c,className:"w-full h-48 object-cover rounded-lg border"}),(0,t.jsx)(o.Button,{variant:"destructive",size:"sm",onClick:s,className:"absolute top-2 right-2 h-8 w-8 p-0",children:(0,t.jsx)(L.X,{className:"w-4 h-4"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b.Label,{htmlFor:"altText",className:"text-sm font-medium text-gray-700",children:"Alt Text"}),(0,t.jsx)(x.Input,{id:"altText",value:c,onChange:t=>{var a;u(a=t.target.value),e&&l(e,a)},placeholder:"Describe the image for accessibility",className:"mt-1"})]})]}):(0,t.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center bg-gray-50 hover:bg-gray-100 transition-colors",children:[(0,t.jsx)(es,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)(o.Button,{onClick:()=>m.current?.click(),disabled:r,className:"w-full bg-orange-500 hover:bg-orange-600",children:[(0,t.jsx)(W.Upload,{className:"w-4 h-4 mr-2"}),r?"Uploading...":"Upload Featured Image"]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 leading-tight",children:"Recommended size: 1200x630px for optimal social sharing"})]})]}),(0,t.jsx)("input",{ref:m,type:"file",accept:"image/*",onChange:g,className:"hidden"})]})})})},eo=({onInsertBlock:e,onOpenForm:a})=>{let{toast:i}=(0,_.useToast)(),n=[{name:"Free LLM Visibility Audit CTA",description:"Sleek CTA with animated particles",preview:(0,t.jsxs)("div",{className:"scale-75 origin-top-left transform w-full h-24 overflow-hidden bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl relative",children:[(0,t.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute top-1/4 left-1/4 w-0.5 h-0.5 bg-orange-400 rounded-full animate-bounce opacity-60"}),(0,t.jsx)("div",{className:"absolute top-1/3 right-1/3 w-0.5 h-0.5 bg-blue-400 rounded-full animate-bounce opacity-60"}),(0,t.jsx)("div",{className:"absolute bottom-1/3 left-1/3 w-0.5 h-0.5 bg-purple-400 rounded-full animate-bounce opacity-60"}),(0,t.jsx)("div",{className:"absolute bottom-1/4 right-1/4 w-0.5 h-0.5 bg-orange-300 rounded-full animate-bounce opacity-60"})]}),(0,t.jsxs)("div",{className:"relative z-10 p-3 text-center",children:[(0,t.jsx)("div",{className:"mb-1",children:(0,t.jsx)("span",{className:"text-orange-200 font-semibold text-xs",children:"Get Your Free LLM Visibility Audit"})}),(0,t.jsx)("button",{onClick:a,className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white px-3 py-1 text-xs font-bold rounded-lg shadow-lg",children:"Start Free Audit →"}),(0,t.jsx)("div",{className:"mt-1 text-slate-400 text-xs",children:"24-hour delivery"})]})]}),getContent:e=>`<div class="relative bg-gradient-to-br from-slate-800/95 to-slate-900/95 backdrop-blur-xl rounded-2xl p-8 border border-orange-400/30 shadow-xl overflow-hidden my-6 max-w-2xl mx-auto cta-block" data-block-type="floating-particles" data-block-id="${e}">
        <!-- Remove button -->
        <button class="cta-remove-btn absolute top-3 right-3 z-20 w-6 h-6 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center shadow-lg transition-all duration-200 text-sm font-bold leading-none" data-block-id="${e}" title="Remove this block" type="button">
          \xd7
        </button>
        
        <!-- Floating particles -->
        <div class="absolute inset-0 overflow-hidden">
          <div class="absolute top-1/4 left-1/4 w-1 h-1 bg-orange-400 rounded-full animate-bounce opacity-60"></div>
          <div class="absolute top-1/3 right-1/3 w-1 h-1 bg-blue-400 rounded-full animate-bounce opacity-60"></div>
          <div class="absolute bottom-1/3 left-1/3 w-1 h-1 bg-purple-400 rounded-full animate-bounce opacity-60"></div>
          <div class="absolute bottom-1/4 right-1/4 w-1 h-1 bg-orange-300 rounded-full animate-bounce opacity-60"></div>
        </div>
        
         <div class="relative z-10 text-center">
           <div class="mb-4">
             <h3 class="text-white font-black text-sm sm:text-xl mb-2 drop-shadow-lg leading-tight" style="color: white !important;">Get Your Free LLM Visibility Audit</h3>
             <p class="text-white/90 text-xs sm:text-sm font-semibold drop-shadow leading-tight" style="color: rgba(255, 255, 255, 0.9) !important;">Discover how visible your brand is across AI platforms</p>
           </div>
          
          <button onclick="window.parent.postMessage({type: 'OPEN_FORM'}, '*')" class="relative inline-block bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white px-8 py-3 text-lg font-bold rounded-xl shadow-xl transition-all duration-300 transform hover:scale-105 border border-orange-400/50 cursor-pointer border-none mb-4">
            Start Free Audit →
          </button>
          
          <div class="flex items-center justify-center gap-4 text-white/80 text-sm font-medium" style="color: rgba(255, 255, 255, 0.8) !important;">
            <div class="flex items-center gap-1">
              <div class="w-2 h-2 bg-orange-400 rounded-full animate-pulse"></div>
              <span>24-hour delivery</span>
            </div>
            <div class="flex items-center gap-1">
              <div class="w-2 h-2 bg-blue-400 rounded-full animate-pulse"></div>
              <span>No sales call</span>
            </div>
          </div>
        </div>
      </div>`}];return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Homepage CTAs"}),(0,t.jsx)("div",{className:"space-y-4",children:n.map((a,n)=>(0,t.jsxs)(p.Card,{className:"border border-gray-200 hover:shadow-md transition-shadow",children:[(0,t.jsx)(p.CardHeader,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)(p.CardTitle,{className:"text-sm font-semibold text-gray-900",children:a.name}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:a.description})]}),(0,t.jsx)(o.Button,{size:"sm",onClick:()=>{var t;let n;return t=a.getContent,void((n=document.activeElement)&&n.disabled||(n&&(n.disabled=!0,setTimeout(()=>{n.disabled=!1},1e3)),e(t(`cta-block-${Date.now()}-${Math.random().toString(36).substr(2,9)}`)),i({title:"Success",description:"CTA block inserted into content"})))},className:"ml-3 bg-orange-500 hover:bg-orange-600",type:"button",children:"Insert"})]})}),(0,t.jsxs)(p.CardContent,{className:"pt-0",children:[(0,t.jsx)("div",{className:"text-xs text-gray-600 mb-2",children:"Preview:"}),(0,t.jsx)("div",{className:"border rounded-lg overflow-hidden bg-gray-50",children:a.preview})]})]},n))})]})},ed=({featuredImageUrl:e,featuredImageAlt:a,onFeaturedImageChange:i,onFeaturedImageRemove:n,onInsertBlock:l})=>(0,t.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,t.jsx)(er,{imageUrl:e,imageAlt:a,onImageChange:i,onImageRemove:n}),(0,t.jsxs)(p.Card,{children:[(0,t.jsx)(p.CardHeader,{children:(0,t.jsx)(p.CardTitle,{className:"text-lg",children:"Content Blocks"})}),(0,t.jsx)(p.CardContent,{children:(0,t.jsx)(eo,{onInsertBlock:l,onOpenForm:()=>alert("Form popup would open on the live site")})})]})]});var ec=e.i(67842);let eu=({post:e,onSave:i,onCancel:l})=>{let{formData:s,saving:r,handleInputChange:o,handleTagsChange:d,handleFeaturedImageChange:c,handleFeaturedImageRemove:u,handlePreview:m,handleSave:g}=(({post:e,onSave:t})=>{let[i,l]=(0,a.useState)({title:"",slug:"",content:"",excerpt:"",status:"draft",meta_title:"",meta_description:"",og_image_url:"",og_image_alt:"",featured_image_url:"",featured_image_alt:"",canonical_url:"",is_indexed:!0,tags:[],author_name:"TotalAuthority Team",...e}),[s,r]=(0,a.useState)(!1),{user:o,loading:d}=(0,ec.useAuth)(),{toast:c}=(0,_.useToast)();(0,a.useEffect)(()=>{if(i.title&&!e){let e=i.title.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");l(t=>({...t,slug:e}))}},[i.title,e]),(0,a.useEffect)(()=>{if(i.content){let e=Math.ceil(i.content.replace(/<[^>]*>/g,"").split(/\s+/).length/200);l(t=>({...t,reading_time:e}))}},[i.content]);let u=async a=>{r(!0);try{if(console.log("Starting save process..."),console.log("Current user:",o?.id),console.log("Auth loading state:",d),d){console.log("Auth still loading, waiting..."),c({title:"Loading",description:"Please wait while we verify your authentication..."}),r(!1);return}if(!o){console.error("No authenticated user found"),c({title:"Authentication Required",description:"You must be logged in to save posts. Please sign in and try again.",variant:"destructive"}),r(!1);return}let l={...i,status:a,author_id:o.id,published_at:"published"===a?new Date().toISOString():i.published_at};if(console.log("About to save post data:",l),e?.id){console.log("Updating existing post with ID:",e.id);let{error:t}=await n.supabase.from("blog_posts").update(l).eq("id",e.id);if(t)throw console.error("Update error:",t),t}else{console.log("Creating new post...");let{data:e,error:t}=await n.supabase.from("blog_posts").insert([l]).select().single();if(console.log("Insert result:",{data:e,error:t}),t)throw console.error("Insert error:",t),t;l.id=e.id}c({title:"Success",description:`Post ${"published"===a?"published":"saved as draft"} successfully`}),t(l)}catch(e){console.error("Error saving post:",e),c({title:"Save Error",description:`Failed to save post: ${e.message}`,variant:"destructive"})}finally{r(!1)}};return{formData:i,saving:s,handleInputChange:(e,t)=>{l(a=>({...a,[e]:t}))},handleTagsChange:e=>{l(t=>({...t,tags:e}))},handleFeaturedImageChange:(e,t)=>{l(a=>({...a,featured_image_url:e,featured_image_alt:t}))},handleFeaturedImageRemove:()=>{l(e=>({...e,featured_image_url:"",featured_image_alt:""}))},handlePreview:()=>{if(i.slug){let e=`/preview/${i.slug}`;window.open(e,"_blank")}else c({title:"Preview Not Available",description:"Please enter a title/slug first to preview the post.",variant:"destructive"})},handleSave:u}})({post:e,onSave:i});return(0,t.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,t.jsx)(h,{isEditing:!!e,saving:r,onPreview:m,onSaveDraft:()=>g("draft"),onPublish:()=>g("published"),onCancel:l}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-3",children:(0,t.jsx)(el,{formData:s,onInputChange:o,onTagsChange:d})}),(0,t.jsx)(ed,{featuredImageUrl:s.featured_image_url,featuredImageAlt:s.featured_image_alt,onFeaturedImageChange:c,onFeaturedImageRemove:u,onInsertBlock:e=>{o("content",s.content+"\n\n"+e)}})]})]})};e.s(["default",0,()=>{let e=(0,i.useParams)(),o=e?.id,d=(0,i.useRouter)(),[c,u]=(0,a.useState)(null),[m,h]=(0,a.useState)(!0),{toast:g}=(0,_.useToast)(),{user:p,loading:x}=(0,ec.useAuth)();(0,a.useEffect)(()=>{x||p||d.push("/auth")},[p,x,d]),(0,a.useEffect)(()=>{o&&"new"!==o?b():h(!1)},[o]);let b=async()=>{try{let{data:e,error:t}=await n.supabase.from("blog_posts").select("*").eq("id",o).single();if(t)throw t;u(e)}catch(e){console.error("Error fetching post:",e),g({title:"Error",description:"Failed to load blog post",variant:"destructive"}),d.push("/admin/posts")}finally{h(!1)}};return x||m?(0,t.jsxs)(r.SidebarProvider,{children:[(0,t.jsx)(l.AdminSidebar,{}),(0,t.jsxs)(r.SidebarInset,{children:[(0,t.jsx)(s.AdminHeader,{}),(0,t.jsx)("div",{className:"flex-1 p-8 pt-6",children:(0,t.jsx)("div",{className:"text-center py-8",children:"Loading..."})})]})]}):p?(0,t.jsxs)(r.SidebarProvider,{children:[(0,t.jsx)(l.AdminSidebar,{}),(0,t.jsxs)(r.SidebarInset,{children:[(0,t.jsx)(s.AdminHeader,{}),(0,t.jsx)("div",{className:"flex-1 p-8 pt-6",children:(0,t.jsx)(eu,{post:c,onSave:()=>{g({title:"Success",description:"Blog post saved successfully"}),d.push("/admin/posts")},onCancel:()=>{d.push("/admin/posts")}})})]})]}):null}],61001)}]);